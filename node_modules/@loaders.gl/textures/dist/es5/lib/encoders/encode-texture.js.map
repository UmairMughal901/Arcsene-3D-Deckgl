{"version":3,"sources":["../../../../src/lib/encoders/encode-texture.ts"],"names":["MODULE_ROOT","__dirname","encodeImageURLToCompressedTextureURL","inputUrl","outputUrl","args","childProcess","ChildProcessProxy","start","command","arguments","spawn","cwd"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA,IAAMA,WAAW,aAAMC,SAAN,cAAjB;;SAKsBC,oC;;;;;oGAAf,iBAAoDC,QAApD,EAA8DC,SAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAECC,YAAAA,IAFD,GAEQ,CAEX,oBAFW,EAGX,QAHW,EAGD,MAHC,EAIX,eAJW,EAIM,MAJN,EAKX,WALW,EAKE,QALF,EAMX,SANW,EAMAF,QANA,EAOX,UAPW,EAOCC,SAPD,CAFR;AAWCE,YAAAA,YAXD,GAWgB,IAAIC,8BAAJ,EAXhB;AAAA;AAAA,mBAYCD,YAAY,CAACE,KAAb,CAAmB;AACvBC,cAAAA,OAAO,EAAE,KADc;AAEvBC,cAAAA,SAAS,EAAEL,IAFY;AAGvBM,cAAAA,KAAK,EAAE;AACLC,gBAAAA,GAAG,EAAEZ;AADA;AAHgB,aAAnB,CAZD;;AAAA;AAAA,6CAmBEI,SAnBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import {ChildProcessProxy} from '@loaders.gl/worker-utils';\n\nconst MODULE_ROOT = `${__dirname}/../../..`;\n\n/*\n * @see https://github.com/TimvanScherpenzeel/texture-compressor\n */\nexport async function encodeImageURLToCompressedTextureURL(inputUrl, outputUrl) {\n  // prettier-ignore\n  const args = [\n    // Note: our actual executable is `npx`, so `texture-compressor` is an argument\n    'texture-compressor',\n    '--type', 's3tc',\n    '--compression', 'DXT1',\n    '--quality', 'normal',\n    '--input', inputUrl,\n    '--output', outputUrl\n  ];\n  const childProcess = new ChildProcessProxy();\n  await childProcess.start({\n    command: 'npx',\n    arguments: args,\n    spawn: {\n      cwd: MODULE_ROOT\n    }\n  });\n  return outputUrl;\n}\n"],"file":"encode-texture.js"}