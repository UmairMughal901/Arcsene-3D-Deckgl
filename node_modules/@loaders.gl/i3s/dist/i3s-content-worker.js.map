{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/regenerator/index.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/defineProperty.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/inherits.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/createClass.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/typeof.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///../worker-utils/src/lib/env-utils/globals.ts","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/env/globals.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js","webpack:////home/user/apps/loaders.gl/node_modules/process/browser.js","webpack:///../images/src/lib/utils/globals.ts","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/asyncIterator.js","webpack:///(webpack)/buildin/global.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/AwaitValue.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/env/is-browser.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/env/is-electron.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:////home/user/apps/loaders.gl/node_modules/regenerator-runtime/runtime.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/AsyncGenerator.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:////home/user/apps/loaders.gl/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///../worker-utils/src/lib/worker-utils/get-transfer-list.ts","webpack:///../worker-utils/src/lib/worker-farm/worker-body.ts","webpack:///../loader-utils/src/lib/worker-loader-utils/create-loader-worker.ts","webpack:///../core/src/javascript-utils/is-type.ts","webpack:///../loader-utils/src/lib/env-utils/assert.ts","webpack:///../core/src/lib/loader-utils/normalize-loader.ts","webpack:///../loader-utils/src/lib/path-utils/file-aliases.ts","webpack:///../core/src/lib/utils/mime-type-utils.ts","webpack:///../core/src/lib/utils/resource-utils.ts","webpack:///../core/src/lib/utils/response-utils.ts","webpack:///../core/src/lib/fetch/fetch-file.ts","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/utils/globals.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/utils/formatters.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/utils/color.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/utils/assert.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/lib/log.js","webpack:////home/user/apps/loaders.gl/node_modules/probe.gl/dist/esm/utils/autobind.js","webpack:///../core/src/lib/loader-utils/loggers.ts","webpack:///../core/src/lib/loader-utils/option-defaults.ts","webpack:///../core/src/lib/loader-utils/option-utils.ts","webpack:///../worker-utils/src/lib/env-utils/assert.ts","webpack:///../worker-utils/src/lib/worker-api/validate-worker-version.ts","webpack:///../worker-utils/src/lib/env-utils/version.ts","webpack:///../worker-utils/src/lib/worker-utils/get-loadable-worker-url.ts","webpack:///../worker-utils/src/lib/worker-farm/worker-thread.ts","webpack:///../worker-utils/src/lib/worker-farm/worker-job.ts","webpack:///../worker-utils/src/lib/worker-farm/worker-pool.ts","webpack:///../worker-utils/src/lib/worker-farm/worker-farm.ts","webpack:///../worker-utils/src/lib/worker-api/get-worker-url.ts","webpack:///../loader-utils/src/lib/worker-loader-utils/parse-with-worker.ts","webpack:///../loader-utils/src/lib/binary-utils/array-buffer-utils.ts","webpack:///../loader-utils/src/lib/binary-utils/buffer-utils.ts","webpack:///../loader-utils/src/lib/iterators/async-iteration.ts","webpack:///../core/src/iterators/make-iterator/make-string-iterator.ts","webpack:///../core/src/iterators/make-iterator/make-array-buffer-iterator.ts","webpack:///../core/src/iterators/make-iterator/make-blob-iterator.ts","webpack:///../core/src/iterators/make-iterator/make-stream-iterator.ts","webpack:///../core/src/iterators/make-iterator/make-iterator.ts","webpack:///../core/src/lib/loader-utils/get-data.ts","webpack:///../core/src/lib/loader-utils/loader-context.ts","webpack:///../core/src/lib/api/register-loaders.ts","webpack:///../core/src/lib/api/select-loader.ts","webpack:///../core/src/lib/api/parse.ts","webpack:///../core/src/lib/api/load.ts","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/lib/common.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:////home/user/apps/loaders.gl/node_modules/gl-matrix/esm/common.js","webpack:////home/user/apps/loaders.gl/node_modules/gl-matrix/esm/vec3.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:////home/user/apps/loaders.gl/node_modules/gl-matrix/esm/mat4.js","webpack:////home/user/apps/loaders.gl/node_modules/gl-matrix/esm/vec2.js","webpack:////home/user/apps/loaders.gl/node_modules/gl-matrix/esm/vec4.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/core/dist/esm/lib/math-utils.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/geospatial/dist/esm/constants.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/geospatial/dist/esm/type-utils.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/geospatial/dist/esm/ellipsoid/helpers/scale-to-geodetic-surface.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/geospatial/dist/esm/ellipsoid/helpers/ellipsoid-transform.js","webpack:////home/user/apps/loaders.gl/node_modules/@math.gl/geospatial/dist/esm/ellipsoid/ellipsoid.js","webpack:///../images/src/lib/utils/assert.js","webpack:///../images/src/lib/category-api/image-type.ts","webpack:///../images/src/lib/category-api/parsed-image-api.ts","webpack:///../images/src/lib/parsers/svg-utils.ts","webpack:///../images/src/lib/parsers/parse-to-image.ts","webpack:///../images/src/lib/parsers/parse-to-image-bitmap.ts","webpack:///../images/src/lib/category-api/binary-image-api.ts","webpack:///../images/src/lib/parsers/parse-to-node-image.ts","webpack:///../images/src/lib/parsers/parse-image.ts","webpack:///../images/src/image-loader.ts","webpack:///../images/src/lib/utils/version.ts","webpack:///../draco/src/draco-loader.ts","webpack:///../draco/src/lib/utils/version.ts","webpack:///../schema/src/category/mesh/mesh-utils.ts","webpack:///../schema/src/lib/schema/impl/schema.ts","webpack:///../schema/src/lib/utils/assert.ts","webpack:///../schema/src/lib/schema/impl/enum.ts","webpack:///../schema/src/lib/schema/impl/type.ts","webpack:///../schema/src/lib/schema/impl/field.ts","webpack:///../draco/src/lib/utils/schema-attribute-utils.ts","webpack:///../schema/src/lib/schema-utils/type-utils.ts","webpack:///../draco/src/lib/draco-parser.ts","webpack:///../worker-utils/src/lib/library-utils/library-utils.ts","webpack:///../draco/src/lib/draco-module-loader.ts","webpack:///../draco/src/index.ts","webpack:////home/user/apps/loaders.gl/node_modules/ktx-parse/dist/ktx-parse.modern.js","webpack:///../textures/src/lib/utils/extract-mipmap-images.ts","webpack:///../textures/src/lib/gl-constants.ts","webpack:///../textures/src/lib/utils/ktx-format-helper.ts","webpack:///../textures/src/lib/parsers/parse-ktx.js","webpack:///../textures/src/lib/parsers/parse-dds.ts","webpack:///../textures/src/lib/parsers/parse-pvr.ts","webpack:///../textures/src/lib/parsers/parse-compressed-texture.ts","webpack:///../textures/src/compressed-texture-loader.ts","webpack:///../textures/src/lib/utils/version.ts","webpack:///./src/lib/utils/url-utils.ts","webpack:///./node_modules/@luma.gl/constants/dist/esm/index.js","webpack:///./src/lib/parsers/constants.ts","webpack:///./src/lib/parsers/parse-i3s-tile-content.ts","webpack:///./src/i3s-content-loader.ts","webpack:///../loader-utils/src/lib/env-utils/globals.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","instance","Constructor","TypeError","setPrototypeOf","subClass","superClass","constructor","_defineProperties","target","props","length","descriptor","protoProps","staticProps","_typeof","iterator","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","ReferenceError","globals","window","global","document","global_","isBrowser","process","String","browser","isWorker","importScripts","isMobile","orientation","matches","version","exec","parseFloat","window_","process_","console","AwaitValue","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","Array","push","title","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","AsyncGenerator","iterable","method","asyncIterator","g","Function","arrayWithHoles","iterableToArrayLimit","nonIterableRest","_getPrototypeOf","getPrototypeOf","__proto__","arr2","arrayLikeToArray","minLen","toString","slice","from","test","wrapped","isElectron","mockUserAgent","type","Boolean","electron","realUserAgent","navigator","userAgent","indexOf","assertThisInitialized","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","toStringTagSymbol","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","keys","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","isArray","front","back","resume","wrappedAwait","settle","request","_i","_s","_e","_arr","_n","_d","_setPrototypeOf","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","add","buffer","ArrayBuffer","isView","MessagePort","ImageBitmap","OffscreenCanvas","onMessageWrapperMap","Map","WorkerBody","onMessage","onmessage","message","isKnownMessage","data","payload","onMessageWrapper","addEventListener","removeEventListener","source","transferList","postMessage","startsWith","requestId","parseOnMainThread","arrayBuffer","options","id","input","parseData","a","loader","parseSync","parse","parser","parseTextSync","textDecoder","TextDecoder","decode","worker","isBoolean","x","isFunction","isObject","isPureObject","isIterable","isAsyncIterable","isResponse","Response","text","json","isBlob","Blob","isReadableStream","ReadableStream","tee","cancel","getReader","isReadableDOMStream","read","pipe","readable","isReadableNodeStream","assert","condition","isLoaderObject","extensions","normalizeLoader","parseText","binary","pathPrefix","fileAliases","resolvePath","filename","alias","replacement","replace","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMETypeFromURL","url","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","stripQueryString","contentTypeHeader","headers","mimeString","getResourceContentLength","size","byteLength","makeResponse","contentLength","getInitialDataUrl","initialDataUrl","TextEncoder","encode","response","checkResponse","ok","getResponseError","status","contentType","statusText","includes","INITIAL_DATA_LENGTH","blobSlice","reader","FileReader","onload","event","readAsDataURL","base64","arrayBufferToBase64","bytes","Uint8Array","fromCharCode","btoa","fetchFile","fetchOptions","fetch","VERSION","__VERSION__","LocalStorage","defaultSettings","storage","setItem","removeItem","getStorage","config","assign","_loadConfiguration","configuration","updateConfiguration","serialized","JSON","stringify","serializedConfiguration","getItem","formatImage","image","scale","maxWidth","imageUrl","src","width","Math","min","height","style","floor","join","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","color","toUpperCase","getHiResTimestamp","timestamp","performance","now","hrtime","timeParts","Date","originalConsole","debug","log","warn","DEFAULT_SETTINGS","enabled","level","cache","ONCE","getTableHeader","table","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","userData","timeStamp","predefined","proto","propNames","getOwnPropertyNames","find","autobind","seal","newLevel","setLevel","getLevel","Number","toPrecision","newPriority","_getLogFunction","oldUsage","newUsage","logLevel","time","columns","tag","priority","_shouldLog","img","Image","element","nodeName","toLowerCase","toDataURL","logImageInBrowser","asciify","fit","round","logImageInNode","setting","timeEnd","opts","collapsed","normalizeArguments","groupCollapsed","group","groupEnd","func","trace","isEnabled","normalizeLogLevel","total","getTotal","delta","getDelta","string","padLength","max","repeat","leftPad","ms","formatted","toFixed","formatTime","background","decorateMessage","resolvedLevel","isFinite","shift","unshift","messageType","probeLog","Log","NullLog","DEFAULT_LOADER_OPTIONS","mimeType","nothrow","CDN","maxConcurrency","maxMobileConcurrency","reuseWorkers","_workerType","limit","_limitMB","batchSize","batchDebounceMs","metadata","transforms","REMOVED_LOADER_OPTIONS","throws","dataType","uri","body","credentials","redirect","referrer","referrerPolicy","integrity","keepalive","signal","getGlobalLoaderState","loaders","_state","getGlobalLoaderOptions","globalOptions","normalizeOptions","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","validateOptions","normalizeOptionsInternal","getFetchFunction","defaultOptions","loaderName","prefix","isSubOptions","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","mergedOptions","baseUri","addUrlOptions","mergeNestedFields","validateWorkerVersion","coreVersion","workerVersion","workerURLCache","getLoadableWorkerURL","workerURL","getLoadableWorkerURLFromSource","workerUrl","getLoadableWorkerURLFromURL","set","workerSource","blob","URL","createObjectURL","NOOP","WorkerThread","onError","_createBrowserWorker","terminate","terminated","lineno","colno","_loadableURL","Worker","onerror","_getErrorFromErrorEvent","onmessageerror","WorkerJob","jobName","workerThread","isRunning","_resolve","_reject","WorkerPool","setProps","idleQueue","destroy","isDestroyed","onDebug","job","startPromise","onStart","jobQueue","_startQueuedJob","_getAvailableWorker","queuedJob","backlog","returnWorkerToQueue","count","_getMaxConcurrency","DEFAULT_PROPS","WorkerFarm","workerPools","_getWorkerPoolProps","workerPool","isSupported","_workerFarm","getWorkerURL","workerOptions","workerFile","versionTag","canParseWithWorker","parseWithWorker","workerFarm","getWorkerFarm","getWorkerPool","startJob","toArrayBuffer","isBuffer","node","byteOffset","_toArrayBuffer","concatenateArrayBuffers","sources","sourceArrays","map","source2","reduce","typedArray","offset","sourceArray","concatenateArrayBuffersAsync","arrayBuffers","chunk","makeStringIterator","chunkSize","textEncoder","chunkLength","makeArrayBufferIterator","chunkByteLength","end","makeStreamIterator","stream","makeBrowserStreamIterator","makeNodeStreamIterator","currentBatchPromise","nextBatchPromise","_streamReadAhead","releaseLock","makeIterator","makeBlobIterator","ERR_DATA","getArrayBufferOrStringFromDataSync","getArrayBufferOrStringFromData","isArrayBuffer","getLoaderContext","previousContext","resolvedContext","getLoadersFromContext","candidateLoaders","contextLoaders","getGlobalLoaderRegistry","loaderRegistry","getRegisteredLoaders","EXT_PATTERN","selectLoader","validHTTPResponse","selectLoaderSync","getNoValidLoaderMessage","ignoreRegisteredLoaders","normalizeLoaders","selectLoaderInternal","testUrl","findLoaderByMIMEType","match","extension","findLoaderByExtension","findLoaderByUrl","testDataAgainstText","testDataAgainstBinary","findLoaderByInitialBytes","fallbackMimeType","getMagicString","getFirstCharacters","mimeTypes","testText","tests","some","arrayBuffer1","arrayBuffer2","array1","array2","compareArrayBuffers","magic","testBinary","dataView","DataView","getUint8","parseWithLoader","load","RADIANS_TO_DEGREES","PI","DEGREES_TO_RADIANS","precision","EPSILON","clone","toRadians","degrees","toDegrees","radians","equals","b","epsilon","oldEpsilon","abs","printTypes","printDegrees","printRowMajor","cls","ExtendableBuiltin","Reflect","construct","_extendableBuiltin","copy","arrayOrObject","fromObject","ELEMENTS","check","toArray","toObject","to","Float32Array","formatString","ai","vector","minVector","maxVector","vectors","multiply","subtract","addScalar","scalar","validate","valid","checkNumber","checkVector","v","callerName","validateVector","deprecated","sqrt","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","distance","multiplyScalar","ARRAY_TYPE","random","y","z","hypot","dot","transformMat4","out","w","vec","vec3_transformMat4AsVector","ORIGIN","constants","ZERO","freeze","super","ax","ay","az","bx","by","bz","mag","cosine","acos","origin","rad","cos","sin","matrix4","transformAsPoint","matrix3","matrix2","vec3_transformMat2","quaternion","q","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","row","RANK","col","columnIndex","fill","firstIndex","columnVector","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b0","b1","b2","b3","IDENTITY","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","identity","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","left","right","bottom","top","near","far","Infinity","_computeInfinitePerspectiveOffCenter","rl","tb","nf","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","lr","bt","fovy","aspect","focalDistance","halfY","tan","ortho","fov","f","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","rx","ry","rz","rotateX","rotateY","rotateZ","axis","b12","b20","b21","b22","factor","vec2_transformMat4AsVector","translate","transformAsVector","scratchVector","fromCartographic","cartographic","longitude","latitude","toCartographic","scaleToGeodeticSurfaceIntersection","scaleToGeodeticSurfaceGradient","scratchOrigin","VECTOR_PRODUCT_LOCAL_FRAME","south","north","west","east","down","degeneratePositionLocalFrame","scratchAxisVectors","scratchVector1","scratchVector2","scratchVector3","localFrameToFixedFrame","ellipsoid","firstAxis","secondAxis","thirdAxis","cartesianOrigin","thirdAxisInferred","firstAxisVector","secondAxisVector","thirdAxisVector","sign","fromArray","normalize","geodeticSurfaceNormal","cross","scratchNormal","scratchK","scratchPosition","scratchHeight","scratchCartesian","wgs84","radii","radiiSquared","radiiToTheFourth","oneOverRadii","oneOverRadiiSquared","minimumRadius","maximumRadius","centerToleranceSquared","squaredXOverSquaredZ","normal","k","geodeticSurfaceNormalCartographic","gamma","cartesian","point","scaleToGeodeticSurface","h","atan2","asin","_cartographicRadians","cartographicVectorRadians","fromCartographicToRadians","cosLatitude","positionX","positionY","positionZ","oneOverRadiiX","oneOverRadiiY","oneOverRadiiZ","squaredNorm","ratio","intersection","oneOverRadiiSquaredX","oneOverRadiiSquaredY","oneOverRadiiSquaredZ","gradient","xMultiplier","yMultiplier","zMultiplier","lambda","correction","xMultiplier2","yMultiplier2","zMultiplier2","beta","position","_parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","format","getImageTypeOrNull","getImageData","canvas","createElement","getContext","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","unescape","encodeURIComponent","getBlob","parseToImage","blobOrDataUrl","webkitURL","objectUrl","loadToImage","revokeObjectURL","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","imagebitmapOptions","imagebitmap","safeCreateImageBitmap","isEmptyObject","createImageBitmap","getBinaryImageMetadata","binaryData","toDataView","getUint32","getPngMetadata","getUint16","tableMarkers","sofMarkers","getJpegMarkers","has","getJpegMetadata","getGifMetadata","getBmpMetadata","parseToNodeImage","imageOptions","imageType","loadType","getLoadableImageType","getDefaultImageType","isImageTypeSupported","ImageLoader","DracoLoader","draco","decoderType","WebAssembly","libraryPath","extraAttributes","attributeNameEntry","getMeshBoundingBox","attributes","minX","minY","minZ","maxX","maxY","maxZ","positions","POSITION","Schema","fields","usedNames","field","checkNames","other","compareTo","nameMap","columnNames","selectedFields","filter","columnIndices","index","schemaOrFields","otherSchema","mergeMaps","fieldMap","m1","m2","Type","DataType","NONE","typeId","Null","Int","Float","Binary","Utf8","Bool","Decimal","Time","Timestamp","Interval","List","Struct","Union","FixedSizeBinary","FixedSizeList","Dictionary","isSigned","bitWidth","Int8","Int16","Int32","Uint8","Uint16","Uint32","Precision","Float32","Float64","listSize","child","children","valueType","Field","nullable","makeSchemaFromAttributes","loaderData","indices","metadataMap","makeMetadata","namedLoaderDataAttributes","dracoAttribute","transformAttributesLoaderData","attributeName","getArrowFieldFromAttribute","indicesField","attribute","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float64Array","getArrowTypeFromTypedArray","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","NORMAL","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","1","2","3","4","5","6","9","DracoParser","decoder","Decoder","metadataQuerier","MetadataQuerier","DecoderBuffer","Init","_disableAttributeTransforms","geometry_type","GetEncodedGeometryType","dracoGeometry","TRIANGULAR_MESH","Mesh","PointCloud","dracoStatus","DecodeBufferToMesh","POINT_CLOUD","DecodeBufferToPointCloud","ptr","error_msg","_getDracoLoaderData","geometry","_getMeshData","boundingBox","schema","header","vertexCount","num_points","_getTopLevelMetadata","_getDracoAttributes","num_attributes","num_faces","dracoAttributes","attributeId","GetAttribute","_getAttributeMetadata","unique_id","attribute_type","data_type","num_components","byte_offset","byte_stride","normalized","attribute_index","quantization","_getQuantizationTransform","quantization_transform","octahedron","_getOctahedronTransform","octahedron_transform","_getMeshAttributes","topology","_getTriangleStripIndices","_getTriangleListIndices","loaderAttribute","_deduceAttributeName","_getAttributeValues","byteStride","numIndices","_malloc","GetTrianglesUInt32Array","HEAPF32","_free","dracoArray","DracoInt32Array","GetTriangleStripsFromMesh","numValues","intArray","GetValue","getUint32Array","TypedArrayCtor","numComponents","BYTES_PER_ELEMENT","attributeType","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","DT_INVALID","getDracoDataType","GetAttributeDataArrayForAllPoints","uniqueId","entries","thisAttributeType","dracoAttributeConstant","entryName","dracoMetadata","GetMetadata","_getDracoMetadata","GetAttributeMetadata","numEntries","NumEntries","entryIndex","GetEntryName","_getDracoMetadataField","GetIntEntryArray","getInt32Array","int","GetIntEntry","GetStringEntry","double","GetDoubleEntry","quantizedAttributes","octahedronAttributes","dracoAttributeName","SkipAttributeTransform","transform","AttributeQuantizationTransform","InitFromAttribute","quantization_bits","range","min_values","min_value","loadLibraryPromises","loadLibrary","libraryUrl","moduleName","getLibraryUrl","loadLibraryFromFile","library","endsWith","scriptSource","loadLibraryFromString","eval","script","appendChild","createTextNode","loadDecoderPromise","DRACO_JS_DECODER_URL","DRACO_WASM_WRAPPER_URL","DRACO_WASM_DECODER_URL","loadDracoDecoderModule","draco3d","createDecoderModule","loadDracoDecoder","DracoDecoderModule","all","wasmBinary","globalThis","initializeDracoDecoder","onModuleLoaded","DracoWorkerLoader","dracoParser","BASISLZ","ZSTD","ZLIB","BASICFORMAT","UNSPECIFIED","ETC1S","UASTC","SRGB","LINEAR","ITU","NTSC","SLOG","SLOG2","ALPHA_STRAIGHT","ALPHA_PREMULTIPLIED","RGB","RRR","GGG","AAA","RGBA","RRRG","U","vkFormat","typeSize","pixelWidth","pixelHeight","pixelDepth","layerCount","faceCount","supercompressionScheme","levels","dataFormatDescriptor","vendorId","descriptorType","versionNumber","descriptorBlockSize","colorModel","colorPrimaries","transferFunction","flags","texelBlockDimension","bytesPlane","samples","keyValue","globalData","_dataView","_littleEndian","_offset","_","Buffer","extractMipmapImages","images","mipMapLevels","levelWidth","levelHeight","levelSize","getLevelSize","levelData","getLevelData","compressed","internalFormat","sizeFunction","GL","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_R11_EAC","COMPRESSED_SIGNED_R11_EAC","COMPRESSED_RG11_EAC","COMPRESSED_SIGNED_RG11_EAC","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB_ATC_WEBGL","COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL","COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL","COMPRESSED_RGBA_ASTC_4X4_KHR","COMPRESSED_RGBA_ASTC_5X4_KHR","COMPRESSED_RGBA_ASTC_5X5_KHR","COMPRESSED_RGBA_ASTC_6X5_KHR","COMPRESSED_RGBA_ASTC_6X6_KHR","COMPRESSED_RGBA_ASTC_8X5_KHR","COMPRESSED_RGBA_ASTC_8X6_KHR","COMPRESSED_RGBA_ASTC_8X8_KHR","COMPRESSED_RGBA_ASTC_10X5_KHR","COMPRESSED_RGBA_ASTC_10X6_KHR","COMPRESSED_RGBA_ASTC_10X8_KHR","COMPRESSED_RGBA_ASTC_10X10_KHR","COMPRESSED_RGBA_ASTC_12X10_KHR","COMPRESSED_RGBA_ASTC_12X12_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR","COMPRESSED_RED_RGTC1_EXT","COMPRESSED_SIGNED_RED_RGTC1_EXT","COMPRESSED_RED_GREEN_RGTC2_EXT","COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","VULKAN_TO_WEBGL_FORMAT_MAP","131","132","133","134","135","136","137","138","139","140","141","142","147","148","149","150","151","152","153","154","155","156","157","COMPRESSED_RGBA_ASTC_4x4_KHR","158","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","159","COMPRESSED_RGBA_ASTC_5x4_KHR","160","161","COMPRESSED_RGBA_ASTC_5x5_KHR","162","COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR","163","COMPRESSED_RGBA_ASTC_6x5_KHR","164","COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR","165","COMPRESSED_RGBA_ASTC_6x6_KHR","166","COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR","167","COMPRESSED_RGBA_ASTC_8x5_KHR","168","COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR","169","COMPRESSED_RGBA_ASTC_8x6_KHR","170","COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR","171","COMPRESSED_RGBA_ASTC_8x8_KHR","172","COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR","173","COMPRESSED_RGBA_ASTC_10x5_KHR","174","COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR","175","COMPRESSED_RGBA_ASTC_10x6_KHR","176","COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR","177","COMPRESSED_RGBA_ASTC_10x8_KHR","178","COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR","179","COMPRESSED_RGBA_ASTC_10x10_KHR","180","COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR","181","COMPRESSED_RGBA_ASTC_12x10_KHR","182","COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR","183","COMPRESSED_RGBA_ASTC_12x12_KHR","184","COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR","1000054000","1000054001","1000066000","1000066001","1000066002","1000066003","1000066004","1000066005","1000066006","1000066007","1000066008","1000066009","1000066010","1000066011","1000066012","1000066013","KTX2_ID","parseKTX","ktx","_nextUint32","_nextUint64","uncompressedByteLength","u","_skip","_nextUint16","_nextUint8","D","bitOffset","bitLength","channelID","samplePosition","sampleLower","sampleUpper","_scan","B","A","S","L","I","imageFlags","rgbSliceByteOffset","rgbSliceByteLength","alphaSliceByteOffset","alphaSliceByteLength","R","E","T","O","P","C","F","G","endpointCount","selectorCount","imageDescs","endpointsData","selectorsData","tablesData","extendedData","DDS_CONSTANTS","MAGIC_NUMBER","HEADER_LENGTH","MAGIC_NUMBER_INDEX","HEADER_SIZE_INDEX","HEADER_FLAGS_INDEX","HEADER_HEIGHT_INDEX","HEADER_WIDTH_INDEX","MIPMAPCOUNT_INDEX","HEADER_PF_FLAGS_INDEX","HEADER_PF_FOURCC_INDEX","DDSD_MIPMAPCOUNT","DDPF_FOURCC","PIXEL_FORMATS","DXT1","DXT3","DXT5","ATCA","ATCI","SIZE_FUNCTIONS","getDxt1LevelSize","getDxtXLevelSize","parseDDS","pixelFormatNumber","fourCC","dataOffset","PVR_CONSTANTS","PVR_PIXEL_FORMATS","0","7","11","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","PVR_SIZE_FUNCTIONS","pvrtc2bppSize","pvrtc4bppSize","dxtEtcSmallSize","dxtEtcAstcBigSize","parseCompressedTexture","isKTX","isDDS","isPVR","pvrFormat","colourSpace","pixelFormats","parsePVR","CompressedTextureWorkerLoader","CompressedTextureLoader","getUrlWithToken","token","TYPE_ARRAY_MAP","UInt8","UInt16","UInt32","UInt64","GL_TYPE_MAP","I3S_NAMED_VERTEX_ATTRIBUTES","uv0","region","I3S_NAMED_GEOMETRY_ATTRIBUTES","vertexAttributes","featureAttributeOrder","featureAttributes","I3S_NAMED_HEADER_ATTRIBUTES","SIZEOF","Vector3","FORMAT_LOADER_MAP","jpeg","png","dds","parseI3STileContent","tile","tileset","content","featureIds","featureData","constructFeatureDataStruct","textureUrl","i3s","textureFormat","texture","mipmaps","material","makePbrMaterial","materialDefinition","parseI3SNodeGeometry","featureCount","isDracoGeometry","decompressedGeometry","COLOR_0","TEXCOORD_0","featureIndex","uvRegion","updateAttributesMetadata","getFeatureIdsFromFeatureIndexMetadata","flattenFeatureIdsByFeatureIndices","attributesOrder","parseHeaders","normalizeAttributes","normalizedVertexAttributes","flattenFeatureIdsByFaceRanges","normalizedFeatureAttributes","concatAttributes","attributeIndex","parsePositions","enuMatrix","cartographicOrigin","matrix","Matrix4","multiplyRight","normals","colors","normalizeAttribute","texCoords","uvRegions","cartographicCenter","modelMatrix","invert","defaultGeometrySchema","store","geometryAttribute","namedAttribute","valuesPerElement","ordering","TypedArrayTypeHeader","parseUint64Values","TypedArrayType","elementsCount","attributeSize","mbs","Ellipsoid","WGS84","cartographicToCartesian","eastNorthUpToFixedFrame","vertices","scaleX","scaleY","subarray","offsetsToCartesians","fixedFrameToENUMatrix","pbrMaterial","pbrMetallicRoughness","baseColorFactor","baseColorTexture","texCoord","alphaCutoff","alphaMode","emissiveFactor","convertColorFormat","emissiveTexture","metallicRoughnessTexture","normalTexture","occlusionTexture","setMaterialTexture","colorFactor","normalizedColor","faceRange","featureIdsLength","orderedFeatureIndices","startIndex","fillId","endIndex","featureIndices"],"mappings":"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","file":"i3s-content-worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 42);\n","module.exports = require(\"regenerator-runtime\");\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global' and 'is-browser';\n\n/* eslint-disable no-restricted-globals */\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\n\nconst self_: {[key: string]: any} = globals.self || globals.window || globals.global || {};\nconst window_: {[key: string]: any} = globals.window || globals.self || globals.global || {};\nconst global_: {[key: string]: any} = globals.global || globals.self || globals.window || {};\nconst document_: {[key: string]: any} = globals.document || {};\n\nexport {self_ as self, window_ as window, global_ as global, document_ as document};\n\n/** true if running in the browser, false if running in Node.js */\nexport const isBrowser: boolean =\n  // @ts-ignore process.browser\n  typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n\n/** true if running on a worker thread */\nexport const isWorker: boolean = typeof importScripts === 'function';\n\n/** true if running on a mobile device */\nexport const isMobile: boolean =\n  typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\n\n// Extract node major version\nconst matches =\n  typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n\n/** Version of Node.js if running under Node, otherwise 0 */\nexport const nodeVersion: number = (matches && parseFloat(matches[1])) || 0;\n","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","var AwaitValue = require(\"./AwaitValue.js\");\n\nfunction _awaitAsyncGenerator(value) {\n  return new AwaitValue(value);\n}\n\nmodule.exports = _awaitAsyncGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global' and 'is-browser';\n\n/* eslint-disable no-restricted-globals */\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\n\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\n\nexport {self_ as self, window_ as window, global_ as global, document_ as document};\n\nexport const isBrowser =\n  // @ts-ignore\n  typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n\nexport const isWorker = typeof importScripts === 'function';\n\n// Extract node major version\nconst matches =\n  typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = (matches && parseFloat(matches[1])) || 0;\n","var AsyncGenerator = require(\"./AsyncGenerator.js\");\n\nfunction _wrapAsyncGenerator(fn) {\n  return function () {\n    return new AsyncGenerator(fn.apply(this, arguments));\n  };\n}\n\nmodule.exports = _wrapAsyncGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol !== \"undefined\") {\n    if (Symbol.asyncIterator) method = iterable[Symbol.asyncIterator];\n    if (method == null && Symbol.iterator) method = iterable[Symbol.iterator];\n  }\n\n  if (method == null) method = iterable[\"@@asyncIterator\"];\n  if (method == null) method = iterable[\"@@iterator\"];\n  if (method == null) throw new TypeError(\"Object is not async iterable\");\n  return method.call(iterable);\n}\n\nmodule.exports = _asyncIterator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _AwaitValue(value) {\n  this.wrapped = value;\n}\n\nmodule.exports = _AwaitValue;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import isElectron from './is-electron';\nexport default function isBrowser() {\n  const isNode = typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","export default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && typeof process.versions === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  const realUserAgent = typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var AwaitValue = require(\"./AwaitValue.js\");\n\nfunction AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nAsyncGenerator.prototype[typeof Symbol === \"function\" && Symbol.asyncIterator || \"@@asyncIterator\"] = function () {\n  return this;\n};\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};\n\nmodule.exports = AsyncGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// NOTE - there is a copy of this function is both in core and loader-utils\n// core does not need all the utils in loader-utils, just this one.\n\n/**\n * Returns an array of Transferrable objects that can be used with postMessage\n * https://developer.mozilla.org/en-US/docs/Web/API/Worker/postMessage\n * @param object data to be sent via postMessage\n * @param recursive - not for application use\n * @param transfers - not for application use\n * @returns a transfer list that can be passed to postMessage\n */\nexport function getTransferList(\n  object: any,\n  recursive: boolean = true,\n  transfers?: Set<any>\n): Transferable[] {\n  // Make sure that items in the transfer list is unique\n  const transfersSet = transfers || new Set();\n\n  if (!object) {\n    // ignore\n  } else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    // Typed array\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {\n    // object is a TypeArray viewing into a SharedArrayBuffer (not transferable)\n    // Do not iterate through the content in this case\n  } else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      // Avoid perf hit - only go one level deep\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  // If transfers is defined, is internal recursive call\n  // Otherwise it's called by the user\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Transferable\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n  // @ts-ignore\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n  return false;\n}\n","import type {WorkerMessageData, WorkerMessageType, WorkerMessagePayload} from '../../types';\nimport {getTransferList} from '../worker-utils/get-transfer-list';\n\nconst onMessageWrapperMap = new Map();\n\n/**\n * Type safe wrapper for worker code\n */\nexport default class WorkerBody {\n  /*\n   * (type: WorkerMessageType, payload: WorkerMessagePayload) => any\n   */\n  static set onmessage(onMessage: (type: WorkerMessageType, payload: WorkerMessagePayload) => any) {\n    // eslint-disable-next-line no-restricted-globals\n    self.onmessage = (message) => {\n      if (!isKnownMessage(message)) {\n        return;\n      }\n\n      // Confusingly the message itself also has a 'type' field which is always set to 'message'\n      const {type, payload} = message.data;\n      onMessage(type, payload);\n    };\n  }\n\n  static addEventListener(\n    onMessage: (type: WorkerMessageType, payload: WorkerMessagePayload) => any\n  ) {\n    let onMessageWrapper = onMessageWrapperMap.get(onMessage);\n\n    if (!onMessageWrapper) {\n      onMessageWrapper = (message) => {\n        if (!isKnownMessage(message)) {\n          return;\n        }\n\n        // Confusingly the message itself also has a 'type' field which is always set to 'message'\n        const {type, payload} = message.data;\n        onMessage(type, payload);\n      };\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('message', onMessageWrapper);\n  }\n\n  static removeEventListener(\n    onMessage: (type: WorkerMessageType, payload: WorkerMessagePayload) => any\n  ) {\n    const onMessageWrapper = onMessageWrapperMap.get(onMessage);\n    onMessageWrapperMap.delete(onMessage);\n    // eslint-disable-next-line no-restricted-globals\n    self.removeEventListener('message', onMessageWrapper);\n  }\n\n  /**\n   * Send a message from a worker to creating thread (main thread)\n   * @param type\n   * @param payload\n   */\n  static postMessage(type: WorkerMessageType, payload: WorkerMessagePayload): void {\n    if (self) {\n      const data: WorkerMessageData = {source: 'loaders.gl', type, payload};\n      const transferList = getTransferList(payload);\n      // eslint-disable-next-line no-restricted-globals\n      // @ts-ignore\n      self.postMessage(data, transferList);\n    }\n  }\n}\n\n// Filter out noise messages sent to workers\nfunction isKnownMessage(message) {\n  const {type, data} = message;\n  return (\n    type === 'message' &&\n    data &&\n    typeof data.source === 'string' &&\n    data.source.startsWith('loaders.gl')\n  );\n}\n","/* eslint-disable no-restricted-globals */\nimport type {LoaderWithParser} from '../../types';\nimport {WorkerBody} from '@loaders.gl/worker-utils';\n// import {validateLoaderVersion} from './validate-loader-version';\n\nlet requestId = 0;\n\n/**\n * Set up a WebWorkerGlobalScope to talk with the main thread\n * @param loader\n */\nexport function createLoaderWorker(loader: LoaderWithParser) {\n  // Check that we are actually in a worker thread\n  if (typeof self === 'undefined') {\n    return;\n  }\n\n  WorkerBody.onmessage = async (type, payload) => {\n    switch (type) {\n      case 'process':\n        try {\n          // validateLoaderVersion(loader, data.source.split('@')[1]);\n\n          const {input, options = {}} = payload;\n\n          const result = await parseData({\n            loader,\n            arrayBuffer: input,\n            options,\n            context: {\n              parse: parseOnMainThread\n            }\n          });\n          WorkerBody.postMessage('done', {result});\n        } catch (error) {\n          const message = error instanceof Error ? error.message : '';\n          WorkerBody.postMessage('error', {error: message});\n        }\n        break;\n      default:\n    }\n  };\n}\n\nfunction parseOnMainThread(arrayBuffer: ArrayBuffer, options: {[key: string]: any}): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const id = requestId++;\n\n    /**\n     */\n    const onMessage = (type, payload) => {\n      if (payload.id !== id) {\n        // not ours\n        return;\n      }\n\n      switch (type) {\n        case 'done':\n          WorkerBody.removeEventListener(onMessage);\n          resolve(payload.result);\n          break;\n\n        case 'error':\n          WorkerBody.removeEventListener(onMessage);\n          reject(payload.error);\n          break;\n\n        default:\n        // ignore\n      }\n    };\n\n    WorkerBody.addEventListener(onMessage);\n\n    // Ask the main thread to decode data\n    const payload = {id, input: arrayBuffer, options};\n    WorkerBody.postMessage('process', payload);\n  });\n}\n\n// TODO - Support byteOffset and byteLength (enabling parsing of embedded binaries without copies)\n// TODO - Why not support async loader.parse* funcs here?\n// TODO - Why not reuse a common function instead of reimplementing loader.parse* selection logic? Keeping loader small?\n// TODO - Lack of appropriate parser functions can be detected when we create worker, no need to wait until parse\nasync function parseData({loader, arrayBuffer, options, context}) {\n  let data;\n  let parser;\n  if (loader.parseSync || loader.parse) {\n    data = arrayBuffer;\n    parser = loader.parseSync || loader.parse;\n  } else if (loader.parseTextSync) {\n    const textDecoder = new TextDecoder();\n    data = textDecoder.decode(arrayBuffer);\n    parser = loader.parseTextSync;\n  } else {\n    throw new Error(`Could not load data with ${loader.name} loader`);\n  }\n\n  // TODO - proper merge in of loader options...\n  options = {\n    ...options,\n    modules: (loader && loader.options && loader.options.modules) || {},\n    worker: false\n  };\n\n  return await parser(data, {...options}, context, loader);\n}\n","import type {Readable} from 'stream';\n\n/** A DOM or Node readable stream */\nexport type ReadableStreamType = ReadableStream | Readable;\n\nconst isBoolean: (x: any) => boolean = (x) => typeof x === 'boolean';\nconst isFunction: (x: any) => boolean = (x) => typeof x === 'function';\n\nexport const isObject: (x: any) => boolean = (x) => x !== null && typeof x === 'object';\nexport const isPureObject: (x: any) => boolean = (x) =>\n  isObject(x) && x.constructor === {}.constructor;\nexport const isPromise: (x: any) => boolean = (x) => isObject(x) && isFunction(x.then);\n\nexport const isIterable: (x: any) => boolean = (x) => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable: (x: any) => boolean = (x) =>\n  x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator: (x: any) => boolean = (x) => x && isFunction(x.next);\n\nexport const isResponse: (x: any) => boolean = (x) =>\n  (typeof Response !== 'undefined' && x instanceof Response) ||\n  (x && x.arrayBuffer && x.text && x.json);\n\nexport const isFile: (x: any) => boolean = (x) => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob: (x: any) => boolean = (x) => typeof Blob !== 'undefined' && x instanceof Blob;\n\nexport const isWritableDOMStream: (x: any) => boolean = (x) =>\n  isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n\nexport const isReadableDOMStream: (x: any) => boolean = (x) =>\n  (typeof ReadableStream !== 'undefined' && x instanceof ReadableStream) ||\n  (isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader));\n// Not implemented in Firefox: && isFunction(x.pipeTo)\n\n/** Check for Node.js `Buffer` without triggering bundler to include buffer polyfill */\nexport const isBuffer: (x: any) => boolean = (x) => x && typeof x === 'object' && x.isBuffer;\n\nexport const isWritableNodeStream: (x: any) => boolean = (x) =>\n  isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream: (x: any) => boolean = (x) =>\n  isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream: (x: any) => boolean = (x) =>\n  isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream: (x: any) => boolean = (x) =>\n  isWritableDOMStream(x) || isWritableNodeStream(x);\n","/**\n * Throws an `Error` with the optional `message` if `condition` is falsy\n * @note Replacement for the external assert method to reduce bundle size\n */\nexport function assert(condition: any, message?: string): void {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n","import type {Loader} from '@loaders.gl/loader-utils';\nimport {assert} from '@loaders.gl/loader-utils';\n\nexport function isLoaderObject(loader?: any): boolean {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray(loader?.extensions);\n\n  /* Now handled by types and worker loaders do not have these\n  let hasParser =\n    loader.parseTextSync ||\n    loader.parseSync ||\n    loader.parse ||\n    loader.parseStream || // TODO Remove, Replace with parseInBatches\n    loader.parseInBatches;\n  */\n\n  return hasExtensions;\n}\n\nexport function normalizeLoader(loader: Loader): Loader {\n  // This error is fairly easy to trigger by mixing up import statements etc\n  // So we make an exception and add a developer error message for this case\n  // To help new users from getting stuck here\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n\n  // NORMALIZE [LOADER, OPTIONS] => LOADER\n\n  // If [loader, options], create a new loaders object with options merged in\n  let options;\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = {\n      ...loader,\n      options: {...loader.options, ...options}\n    };\n  }\n\n  // NORMALIZE text and binary flags\n  // Ensure at least one of text/binary flags are properly set\n\n  // @ts-expect-error\n  if (loader?.parseTextSync || loader?.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n","// Simple file alias mechanisms for tests.\n\nlet pathPrefix = '';\nconst fileAliases: {[aliasPath: string]: string} = {};\n\n/*\n * Set a relative path prefix\n */\nexport function setPathPrefix(prefix: string): void {\n  pathPrefix = prefix;\n}\n\n/*\n * Get the relative path prefix\n */\nexport function getPathPrefix(): string {\n  return pathPrefix;\n}\n\n/**\n *\n * @param aliases\n *\n * Note: addAliases are an experimental export, they are only for testing of loaders.gl loaders\n * not intended as a generic aliasing mechanism\n */\nexport function addAliases(aliases: {[aliasPath: string]: string}): void {\n  Object.assign(fileAliases, aliases);\n}\n\n/**\n * Resolves aliases and adds path-prefix to paths\n */\nexport function resolvePath(filename: string): string {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = `${pathPrefix}${filename}`;\n  }\n  return filename;\n}\n","// TODO - build/integrate proper MIME type parsing\n// https://mimesniff.spec.whatwg.org/\n\nconst DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\n\n/**\n * Remove extra data like `charset` from MIME types\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMEType(mimeString: string): string {\n  // If resource is a data url, extract any embedded mime type\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n  if (matches) {\n    return matches[1];\n  }\n  return mimeString;\n}\n\n/**\n * Extract MIME type from data URL\n *\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMETypeFromURL(url: string): string {\n  // If resource is a data URL, extract any embedded mime type\n  const matches = DATA_URL_PATTERN.exec(url);\n  if (matches) {\n    return matches[1];\n  }\n  return '';\n}\n","import {isResponse, isBlob} from '../../javascript-utils/is-type';\nimport {parseMIMEType, parseMIMETypeFromURL} from './mime-type-utils';\n\nconst QUERY_STRING_PATTERN = /\\?.*/;\n\n/**\n * Returns an object with `url` and (MIME) `type` fields\n * If it cannot determine url or type, the corresponding value will be an empty string\n *\n * @param resource Any type, but only Responses, string URLs and data URLs are processed\n *\n * @todo string parameters are assumed to be URLs\n */\nexport function getResourceUrlAndType(resource: any): {url: string; type: string} {\n  // If resource is a response, it contains the information directly\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  // If the resource is a Blob or a File (subclass of Blob)\n  if (isBlob(resource)) {\n    return {\n      // File objects have a \"name\" property. Blob objects don't have any\n      // url (name) information\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      // TODO this could mess up data URL but it doesn't matter as it is just used for inference\n      url: stripQueryString(resource),\n      // If a data url\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  // Unknown\n  return {\n    url: '',\n    type: ''\n  };\n}\n\n/**\n  * Returns (approximate) content length for a resource if it can be determined.\n  * Returns -1 if content length cannot be determined.\n  * @param resource\n\n  * @note string parameters are NOT assumed to be URLs\n  */\nexport function getResourceContentLength(resource: any): number {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n  if (typeof resource === 'string') {\n    // TODO - handle data URL?\n    return resource.length;\n  }\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n","import {isResponse} from '../../javascript-utils/is-type';\nimport {getResourceContentLength, getResourceUrlAndType} from './resource-utils';\n\n/**\n * Returns a Response object\n * Adds content-length header when possible\n *\n * @param resource\n */\nexport async function makeResponse(resource: any): Promise<Response> {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  // Add content-length header if possible\n  const headers: {[header: string]: string} = {};\n\n  const contentLength = getResourceContentLength(resource);\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  // `new Response(File)` does not preserve content-type and URL\n  // so we add them here\n  const {url, type} = getResourceUrlAndType(resource);\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  // Add a custom header with initial bytes if available\n  const initialDataUrl = await getInitialDataUrl(resource);\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  // TODO - is this the best way of handling strings?\n  // Maybe package as data URL instead?\n  if (typeof resource === 'string') {\n    // Convert to ArrayBuffer to avoid Response treating it as a URL\n    resource = new TextEncoder().encode(resource);\n  }\n\n  // Attempt to create a Response from the resource, adding headers and setting url\n  const response = new Response(resource, {headers});\n  // We can't control `Response.url` via constructor, use a property override to record URL.\n  Object.defineProperty(response, 'url', {value: url});\n  return response;\n}\n\n/**\n * Checks response status (async) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport async function checkResponse(response: Response): Promise<void> {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\n\n/**\n * Checks response status (sync) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport function checkResponseSync(response: Response): void {\n  if (!response.ok) {\n    let message = `${response.status} ${response.statusText}`;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n    throw new Error(message);\n  }\n}\n\n// HELPERS\n\nasync function getResponseError(response): Promise<string> {\n  let message = `Failed to fetch resource ${response.url} (${response.status}): `;\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n    if (contentType.includes('application/json')) {\n      text += ` ${await response.text()}`;\n    }\n    message += text;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n  } catch (error) {\n    // eslint forbids return in a finally statement, so we just catch here\n  }\n  return message;\n}\n\nasync function getInitialDataUrl(resource): Promise<string | null> {\n  const INITIAL_DATA_LENGTH = 5;\n  if (typeof resource === 'string') {\n    return `data:,${resource.slice(0, INITIAL_DATA_LENGTH)}`;\n  }\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onload = (event) => resolve(event?.target?.result as string);\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return `data:base64,${base64}`;\n  }\n  return null;\n}\n\n// https://stackoverflow.com/questions/9267899/arraybuffer-to-base64-encoded-string\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n}\n","import {resolvePath} from '@loaders.gl/loader-utils';\nimport {makeResponse} from '../utils/response-utils';\n// import {getErrorMessageFromResponse} from './fetch-error-message';\n\n/**\n * fetch compatible function\n * Reads file data from:\n * - http/http urls\n * - data urls\n * - File/Blob objects\n * Leverages `@loaders.gl/polyfills` for Node.js support\n * Respects pathPrefix and file aliases\n */\nexport async function fetchFile(\n  url: string | Blob,\n  options?: RequestInit & {fetch?: RequestInit | Function}\n): Promise<Response> {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n\n    let fetchOptions: RequestInit = options as RequestInit;\n    if (options?.fetch && typeof options?.fetch !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport const isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","function getStorage(type) {\n  try {\n    const storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default class LocalStorage {\n  constructor(id, defaultSettings, type = 'sessionStorage') {\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n\n    return this;\n  }\n\n  _loadConfiguration() {\n    let configuration = {};\n\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n\n    Object.assign(this.config, configuration);\n    return this;\n  }\n\n}\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  let formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale, maxWidth = 600) {\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from './globals';\nexport const COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  let timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nconst DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\nconst ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nexport default class Log {\n  constructor({\n    id\n  } = {\n    id: ''\n  }) {\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel) {\n    this.setLevel(newLevel);\n  }\n\n  get level() {\n    return this.getLevel();\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getLevel() {\n    return this._storage.config.level;\n  }\n\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  get priority() {\n    return this.level;\n  }\n\n  getPriority() {\n    return this.level;\n  }\n\n  enable(enabled = true) {\n    this._storage.updateConfiguration({\n      enabled\n    });\n\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({\n      level\n    });\n\n    return this;\n  }\n\n  assert(condition, message) {\n    assert(condition, message);\n  }\n\n  warn(message) {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  error(message) {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  probe(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  log(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  info(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  once(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n  }\n\n  table(logLevel, table, columns) {\n    if (table) {\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n\n    return noop;\n  }\n\n  image({\n    logLevel,\n    priority,\n    image,\n    message = '',\n    scale = 1\n  }) {\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n\n    return isBrowser ? logImageInBrowser({\n      image,\n      message,\n      scale\n    }) : logImageInNode({\n      image,\n      message,\n      scale\n    });\n  }\n\n  settings() {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  get(setting) {\n    return this._storage.config[setting];\n  }\n\n  set(setting, value) {\n    this._storage.updateConfiguration({\n      [setting]: value\n    });\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n  }\n\n  timeStamp(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message, opts = {\n    collapsed: false\n  }) {\n    opts = normalizeArguments({\n      logLevel,\n      message,\n      opts\n    });\n    const {\n      collapsed\n    } = opts;\n    opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n    return this._getLogFunction(opts);\n  }\n\n  groupCollapsed(logLevel, message, opts = {}) {\n    return this.group(logLevel, message, Object.assign({}, opts, {\n      collapsed: true\n    }));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  withGroup(logLevel, message, func) {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  _shouldLog(logLevel) {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(logLevel, message, method, args = [], opts) {\n    if (this._shouldLog(logLevel)) {\n      opts = normalizeArguments({\n        logLevel,\n        message,\n        args,\n        opts\n      });\n      method = method || opts.method;\n      assert(method);\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      this._deltaTs = getHiResTimestamp();\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      message = decorateMessage(this.id, opts.message, opts);\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n}\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  const {\n    logLevel,\n    message\n  } = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  const args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  const messageType = typeof opts.message;\n  assert(messageType === 'string' || messageType === 'object');\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode({\n  image,\n  message = '',\n  scale = 1\n}) {\n  let asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return () => asciify(image, {\n      fit: 'box',\n      width: \"\".concat(Math.round(80 * scale), \"%\")\n    }).then(data => console.log(data));\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser({\n  image,\n  message = '',\n  scale = 1\n}) {\n  if (typeof image === 'string') {\n    const img = new Image();\n\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  const element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n\n    img.onload = () => console.log(...formatImage(img, message, scale));\n\n    img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n//# sourceMappingURL=log.js.map","export function autobind(obj, predefined = ['constructor']) {\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n//# sourceMappingURL=autobind.js.map","// probe.gl Log compatible loggers\nimport {Log} from 'probe.gl';\n\nexport const probeLog = new Log({id: 'loaders.gl'});\n\n// Logs nothing\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n  info() {\n    return () => {};\n  }\n  warn() {\n    return () => {};\n  }\n  error() {\n    return () => {};\n  }\n}\n\n// Logs to console\nexport class ConsoleLog {\n  console;\n\n  constructor() {\n    this.console = console; // eslint-disable-line\n  }\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n}\n","import type {LoaderOptions} from '@loaders.gl/loader-utils';\nimport {ConsoleLog} from './loggers';\n\nexport const DEFAULT_LOADER_OPTIONS: LoaderOptions = {\n  // baseUri\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(), // A probe.gl compatible (`log.log()()` syntax) that just logs to console\n\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true, // By default, use worker if provided by loader.\n  maxConcurrency: 3, // How many worker instances should be created for each loader.\n  maxMobileConcurrency: 1, // How many worker instances should be created for each loader on mobile devices.\n  reuseWorkers: true, // By default reuse workers,\n  _workerType: '', // 'test' to use locally generated workers\n\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false, // TODO - currently only implemented for parseInBatches, adds initial metadata batch,\n  transforms: []\n};\n\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  // Warn if fetch options are used on top-level\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n","import type {Loader, LoaderContext, LoaderOptions} from '@loaders.gl/loader-utils';\nimport {global} from '@loaders.gl/loader-utils';\nimport {isPureObject, isObject} from '../../javascript-utils/is-type';\nimport {fetchFile} from '../fetch/fetch-file';\nimport {probeLog, NullLog} from './loggers';\nimport {DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS} from './option-defaults';\n/**\n * Global state for loaders.gl. Stored on `global.loaders._state`\n */\ntype GlobalLoaderState = {\n  loaderRegistry: Loader[];\n  globalOptions: {[key: string]: any};\n};\n\n/**\n * Helper for safely accessing global loaders.gl variables\n * Wraps initialization of global variable in function to defeat overly aggressive tree-shakers\n */\nexport function getGlobalLoaderState(): GlobalLoaderState {\n  // @ts-ignore\n  global.loaders = global.loaders || {};\n  // @ts-ignore\n  const {loaders} = global;\n\n  // Add _state object to keep separate from modules added to global.loaders\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\n// Store global loader options on the global object to increase chances of cross loaders-version interoperability\n// NOTE: This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\nconst getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  // Ensure all default loader options from this library are mentioned\n  state.globalOptions = state.globalOptions || {...DEFAULT_LOADER_OPTIONS};\n  return state.globalOptions;\n};\n\n/**\n * Set global loader options\n * @param options\n */\nexport function setGlobalOptions(options: object): void {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\n\n/**\n * Merges options with global opts and loader defaults, also injects baseUri\n * @param options\n * @param loader\n * @param loaders\n * @param url\n */\nexport function normalizeOptions(\n  options: object,\n  loader: Loader,\n  loaders?: Loader[],\n  url?: string\n): object {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\n\n/**\n * Gets the current fetch function from options and context\n * @param options\n * @param context\n */\nexport function getFetchFunction(\n  options?: LoaderOptions,\n  context?: Omit<LoaderContext, 'fetch'> & Partial<Pick<LoaderContext, 'fetch'>>\n) {\n  const globalOptions = getGlobalLoaderOptions();\n\n  const fetchOptions = options || globalOptions;\n\n  // options.fetch can be a function\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  // options.fetch can be an options object\n  if (isObject(fetchOptions.fetch)) {\n    return (url) => fetchFile(url, fetchOptions);\n  }\n\n  // else refer to context (from parent loader) if available\n  if (context?.fetch) {\n    return context?.fetch;\n  }\n\n  // else return the default fetch function\n  return fetchFile;\n}\n\n// VALIDATE OPTIONS\n\n/**\n * Warn for unsupported options\n * @param options\n * @param loaders\n */\nfunction validateOptions(options: LoaderOptions, loaders: Loader[]) {\n  // Check top level options\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n  for (const loader of loaders) {\n    // Get the scoped, loader specific options from the user supplied options\n    const idOptions = (options && options[loader.id]) || {};\n\n    // Get scoped, loader specific default and deprecated options from the selected loader\n    const loaderOptions = (loader.options && loader.options[loader.id]) || {};\n    const deprecatedOptions =\n      (loader.deprecatedOptions && loader.deprecatedOptions[loader.id]) || {};\n\n    // Validate loader specific options\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\n// eslint-disable-next-line max-params, complexity\nfunction validateOptionsObject(\n  options,\n  id: string | null,\n  defaultOptions,\n  deprecatedOptions,\n  loaders: Loader[]\n) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? `${id}.` : '';\n\n  for (const key in options) {\n    // If top level option value is an object it could options for a loader, so ignore\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n    // <loader>.workerUrl requires special handling as it is now auto-generated and no longer specified as a default option.\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      // Issue deprecation warnings\n      if (key in deprecatedOptions) {\n        probeLog.warn(\n          `${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`\n        )();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(\n          `${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`\n        )();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch =\n        lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n    }\n  }\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url?: string) {\n  const loaderDefaultOptions = loader.options || {};\n\n  const mergedOptions = {...loaderDefaultOptions};\n\n  addUrlOptions(mergedOptions, url);\n\n  // LOGGING: options.log can be set to `null` to defeat logging\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n\n  return mergedOptions;\n}\n\n// Merge nested options objects\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    // Check for nested options\n    // object in options => either no key in defaultOptions or object in defaultOptions\n    if (key in options) {\n      const value = options[key];\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = {\n          ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n    // else: No need to merge nested opts, and the initial merge already copied over the nested options\n  }\n}\n\n// Harvest information from the url\n// TODO - baseUri should be a directory, i.e. remove file component from baseUri\n// TODO - extract extension?\n// TODO - extract query parameters?\n// TODO - should these be injected on context instead of options?\nfunction addUrlOptions(options, url?: string) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n","// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\n\n/** Throws an `Error` with the optional `message` if `condition` is falsy */\nexport function assert(condition: any, message?: string): void {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n","import type {WorkerObject} from '../../types';\nimport {assert} from '../env-utils/assert';\nimport {VERSION} from '../env-utils/version';\n\n/**\n * Check if worker is compatible with this library version\n * @param worker\n * @param libVersion\n * @returns `true` if the two versions are compatible\n */\nexport function validateWorkerVersion(\n  worker: WorkerObject,\n  coreVersion: string = VERSION\n): boolean {\n  assert(worker, 'no worker provided');\n\n  const workerVersion = worker.version;\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  // TODO enable when fix the __version__ injection\n  // const coreVersions = parseVersion(coreVersion);\n  // const workerVersions = parseVersion(workerVersion);\n  // assert(\n  //   coreVersion.major === workerVersion.major && coreVersion.minor <= workerVersion.minor,\n  //   `worker: ${worker.name} is not compatible. ${coreVersion.major}.${\n  //     coreVersion.minor\n  //   }+ is required.`\n  // );\n\n  return true;\n}\n\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {major: parts[0], minor: parts[1]};\n}\n","// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n\n// Change to `latest` on production branches\nconst DEFAULT_VERSION = 'beta';\ndeclare let __VERSION__;\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : DEFAULT_VERSION;\nif (typeof __VERSION__ === 'undefined') {\n  // eslint-disable-next-line\n  console.error(\n    'loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.'\n  );\n}\n","import {assert} from '../env-utils/assert';\n\nconst workerURLCache = new Map();\n\n/**\n * Creates a loadable URL from worker source or URL\n * that can be used to create `Worker` instances.\n * Due to CORS issues it may be necessary to wrap a URL in a small importScripts\n * @param props\n * @param props.source Worker source\n * @param props.url Worker URL\n * @returns loadable url\n */\nexport function getLoadableWorkerURL(props: {source?: string; url?: string}) {\n  assert((props.source && !props.url) || (!props.source && props.url)); // Either source or url must be defined\n\n  let workerURL = workerURLCache.get(props.source || props.url);\n  if (!workerURL) {\n    // Differentiate worker urls from worker source code\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\n/**\n * Build a loadable worker URL from worker URL\n * @param url\n * @returns loadable URL\n */\nfunction getLoadableWorkerURLFromURL(url: string): string {\n  // A local script url, we can use it to initialize a Worker directly\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  // A remote script, we need to use `importScripts` to load from different origin\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\n/**\n * Build a loadable worker URL from worker source\n * @param workerSource\n * @returns loadable url\n */\nfunction getLoadableWorkerURLFromSource(workerSource: string): string {\n  // NOTE: webworkify was previously used\n  // const blob = webworkify(workerSource, {bare: true});\n  const blob = new Blob([workerSource], {type: 'application/javascript'});\n  return URL.createObjectURL(blob);\n}\n\n/**\n * Per spec, worker cannot be initialized with a script from a different origin\n * However a local worker script can still import scripts from other origins,\n * so we simply build a wrapper script.\n *\n * @param workerUrl\n * @returns source\n */\nfunction buildScriptSource(workerUrl: string): string {\n  return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`;\n}\n","import {assert} from '../env-utils/assert';\nimport {getLoadableWorkerURL} from '../worker-utils/get-loadable-worker-url';\nimport {getTransferList} from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport type WorkerThreadProps = {\n  name: string;\n  source?: string;\n  url?: string;\n};\n\n/**\n * Represents one worker thread\n */\nexport default class WorkerThread {\n  readonly name: string;\n  readonly source: string | undefined;\n  readonly url: string | undefined;\n  terminated: boolean = false;\n  worker: Worker;\n  onMessage: (message: any) => void;\n  onError: (error: Error) => void;\n\n  private _loadableURL: string = '';\n\n  static isSupported(): boolean {\n    return typeof Worker !== 'undefined';\n  }\n\n  constructor(props: WorkerThreadProps) {\n    const {name, source, url} = props;\n    assert(source || url); // Either source or url must be defined\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n    this.onError = (error) => console.log(error); // eslint-disable-line\n\n    this.worker = this._createBrowserWorker();\n  }\n\n  /**\n   * Terminate this worker thread\n   * @note Can free up significant memory\n   */\n  destroy(): void {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    // @ts-ignore\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  /**\n   * Send a message to this worker thread\n   * @param data any data structure, ideally consisting mostly of transferrable objects\n   * @param transferList If not supplied, calculated automatically by traversing data\n   */\n  postMessage(data: any, transferList?: any[]): void {\n    transferList = transferList || getTransferList(data);\n    // @ts-ignore\n    this.worker.postMessage(data, transferList);\n  }\n\n  // PRIVATE\n\n  /**\n   * Generate a standard Error from an ErrorEvent\n   * @param {ErrorEvent} event\n   */\n  _getErrorFromErrorEvent(event) {\n    // Note Error object does not have the expected fields if loading failed completely\n    // https://developer.mozilla.org/en-US/docs/Web/API/Worker#Event_handlers\n    // https://developer.mozilla.org/en-US/docs/Web/API/ErrorEvent\n    let message = 'Failed to load ';\n    message += `worker ${this.name}. `;\n    if (event.message) {\n      message += `${event.message} in `;\n    }\n    // const hasFilename = event.filename && !event.filename.startsWith('blob:');\n    // message += hasFilename ? event.filename : this.source.slice(0, 100);\n    if (event.lineno) {\n      message += `:${event.lineno}:${event.colno}`;\n    }\n    return new Error(message);\n  }\n\n  /**\n   * Creates a worker thread on the browser\n   */\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({source: this.source, url: this.url});\n    const worker = new Worker(this._loadableURL, {name: this.name});\n\n    worker.onmessage = (event) => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n    // This callback represents an uncaught exception in the worker thread\n    worker.onerror = (error) => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n    // TODO - not clear when this would be called, for now just log in case it happens\n    worker.onmessageerror = (event) => console.error(event); // eslint-disable-line\n\n    return worker;\n  }\n}\n","import type {WorkerMessageType, WorkerMessagePayload} from '../../types';\nimport WorkerThread from './worker-thread';\nimport {assert} from '../env-utils/assert';\n\n/**\n * Represents one Job handled by a WorkerPool or WorkerFarm\n */\nexport default class WorkerJob {\n  readonly name: string;\n  readonly workerThread: WorkerThread;\n  isRunning: boolean;\n  /** Promise that resolves when Job is done */\n  readonly result: Promise<any>;\n\n  private _resolve: (value: any) => void;\n  private _reject: (reason?: any) => void;\n\n  constructor(jobName: string, workerThread: WorkerThread) {\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.isRunning = true;\n    this._resolve = () => {};\n    this._reject = () => {};\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  /**\n   * Send a message to the job's worker thread\n   * @param data any data structure, ideally consisting mostly of transferrable objects\n   */\n  postMessage(type: WorkerMessageType, payload: WorkerMessagePayload): void {\n    this.workerThread.postMessage({\n      source: 'loaders.gl', // Lets worker ignore unrelated messages\n      type,\n      payload\n    });\n  }\n\n  /**\n   * Call to resolve the `result` Promise with the supplied value\n   */\n  done(value): void {\n    assert(this.isRunning);\n    this.isRunning = false;\n    this._resolve(value);\n  }\n\n  /**\n   * Call to reject the `result` Promise with the supplied error\n   */\n  error(error): void {\n    assert(this.isRunning);\n    this.isRunning = false;\n    this._reject(error);\n  }\n}\n","import type {WorkerMessageType, WorkerMessagePayload} from '../../types';\nimport {isMobile} from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\n\n/** WorkerPool onDebug Callback Parameters */\ntype OnDebugParameters = {\n  message: string;\n  worker: string;\n  name: string;\n  job: string;\n  backlog: number;\n  workerThread: WorkerThread;\n};\n\n/** WorkerPool Properties */\nexport type WorkerPoolProps = {\n  name?: string;\n  source?: string; // | Function;\n  url?: string;\n  maxConcurrency?: number;\n  maxMobileConcurrency?: number;\n  onDebug?: (options: OnDebugParameters) => any;\n  reuseWorkers?: boolean;\n};\n\n/** Private helper types */\ntype OnMessage = (job: WorkerJob, type: WorkerMessageType, payload: WorkerMessagePayload) => void;\ntype OnError = (job: WorkerJob, error: Error) => void;\n\ntype QueuedJob = {\n  name: string;\n  onMessage: OnMessage;\n  onError: OnError;\n  onStart: (value: any) => void; // Resolve job start promise\n};\n\n/**\n * Process multiple data messages with small pool of identical workers\n */\nexport default class WorkerPool {\n  name: string = 'unnamed';\n  source?: string; // | Function;\n  url?: string;\n  maxConcurrency: number = 1;\n  maxMobileConcurrency: number = 1;\n  onDebug: (options: OnDebugParameters) => any = () => {};\n  reuseWorkers: boolean = true;\n\n  private props: WorkerPoolProps = {};\n  private jobQueue: QueuedJob[] = [];\n  private idleQueue: WorkerThread[] = [];\n  private count = 0;\n  private isDestroyed = false;\n\n  /**\n   * @param processor - worker function\n   * @param maxConcurrency - max count of workers\n   */\n  constructor(props: WorkerPoolProps) {\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  /**\n   * Terminates all workers in the pool\n   * @note Can free up significant memory\n   */\n  destroy(): void {\n    // Destroy idle workers, active Workers will be destroyed on completion\n    this.idleQueue.forEach((worker) => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props: WorkerPoolProps) {\n    this.props = {...this.props, ...props};\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(\n    name: string,\n    onMessage: OnMessage = (job, type, data) => job.done(data),\n    onError: OnError = (job, error) => job.error(error)\n  ): Promise<WorkerJob> {\n    // Promise resolves when thread starts working on this job\n    const startPromise = new Promise<WorkerJob>((onStart) => {\n      // Promise resolves when thread completes or fails working on this job\n      this.jobQueue.push({name, onMessage, onError, onStart});\n      return this;\n    });\n    this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n    return await startPromise;\n  }\n\n  // PRIVATE\n\n  /**\n   * Starts first queued job if worker is available or can be created\n   * Called when job is started and whenever a worker returns to the idleQueue\n   */\n  async _startQueuedJob(): Promise<void> {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n    if (!workerThread) {\n      return;\n    }\n\n    // We have a worker, dequeue and start the job\n    const queuedJob = this.jobQueue.shift();\n    if (queuedJob) {\n      // Emit a debug event\n      // @ts-ignore\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n\n      // Create a worker job to let the app access thread and manage job completion\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      // Set the worker thread's message handlers\n      workerThread.onMessage = (data) => queuedJob.onMessage(job, data.type, data.payload);\n      workerThread.onError = (error) => queuedJob.onError(job, error);\n\n      // Resolve the start promise so that the app can start sending messages to worker\n      queuedJob.onStart(job);\n\n      // Wait for the app to signal that the job is complete, then return worker to queue\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  /**\n   * Returns a worker to the idle queue\n   * Destroys the worker if\n   *  - pool is destroyed\n   *  - if this pool doesn't reuse workers\n   *  - if maxConcurrency has been lowered\n   * @param worker\n   */\n  returnWorkerToQueue(worker: WorkerThread) {\n    const shouldDestroyWorker =\n      this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n    }\n  }\n\n  /**\n   * Returns idle worker or creates new worker if maxConcurrency has not been reached\n   */\n  _getAvailableWorker(): WorkerThread | null {\n    // If a worker has completed and returned to the queue, it can be used\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    // Create fresh worker if we haven't yet created the max amount of worker threads for this worker source\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = `${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;\n      return new WorkerThread({name, source: this.source, url: this.url});\n    }\n\n    // No worker available, have to wait\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n}\n","import WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\n\n/**\n * @param maxConcurrency {number} - max count of workers\n */\nexport type WorkerFarmProps = {\n  maxConcurrency?: number;\n  maxMobileConcurrency?: number;\n  reuseWorkers?: boolean;\n  onDebug?: () => void;\n};\n\nconst DEFAULT_PROPS: WorkerFarmProps = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  onDebug: () => {},\n  reuseWorkers: true\n};\n\n/**\n * Process multiple jobs with a \"farm\" of different workers in worker pools.\n */\nexport default class WorkerFarm {\n  private props: WorkerFarmProps;\n  private workerPools = new Map<string, WorkerPool>();\n  // singleton\n  private static _workerFarm?: WorkerFarm;\n\n  /** Check if Workers are supported */\n  static isSupported(): boolean {\n    return WorkerThread.isSupported();\n  }\n\n  /** Get the singleton instance of the global worker farm */\n  static getWorkerFarm(props: WorkerFarmProps = {}): WorkerFarm {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n    WorkerFarm._workerFarm.setProps(props);\n    return WorkerFarm._workerFarm;\n  }\n\n  /** get global instance with WorkerFarm.getWorkerFarm() */\n  private constructor(props: WorkerFarmProps) {\n    this.props = {...DEFAULT_PROPS};\n    this.setProps(props);\n    /** @type Map<string, WorkerPool>} */\n    this.workerPools = new Map();\n  }\n\n  /**\n   * Terminate all workers in the farm\n   * @note Can free up significant memory\n   */\n  destroy(): void {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n  }\n\n  /**\n   * Set props used when initializing worker pools\n   * @param props\n   */\n  setProps(props: WorkerFarmProps): void {\n    this.props = {...this.props, ...props};\n    // Update worker pool props\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  /**\n   * Returns a worker pool for the specified worker\n   * @param options - only used first time for a specific worker name\n   * @param options.name - the name of the worker - used to identify worker pool\n   * @param options.url -\n   * @param options.source -\n   * @example\n   *   const job = WorkerFarm.getWorkerFarm().getWorkerPool({name, url}).startJob(...);\n   */\n  getWorkerPool(options: {name: string; source?: string; url?: string}): WorkerPool {\n    const {name, source, url} = options;\n    let workerPool = this.workerPools.get(name);\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n}\n","import type {WorkerObject, WorkerOptions} from '../../types';\nimport {assert} from '../env-utils/assert';\nimport {VERSION as __VERSION__} from '../env-utils/version';\n\nconst NPM_TAG = 'latest';\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : NPM_TAG;\n\n/**\n * Gets worker object's name (for debugging in Chrome thread inspector window)\n */\nexport function getWorkerName(worker: WorkerObject): string {\n  const warning = worker.version !== VERSION ? ` (worker-utils@${VERSION})` : '';\n  return `${worker.name}@${worker.version}${warning}`;\n}\n\n/**\n * Generate a worker URL based on worker object and options\n * @returns A URL to one of the following:\n * - a published worker on unpkg CDN\n * - a local test worker\n * - a URL provided by the user in options\n */\nexport function getWorkerURL(worker: WorkerObject, options: WorkerOptions = {}): string {\n  const workerOptions = options[worker.id] || {};\n\n  const workerFile = `${worker.id}-worker.js`;\n\n  let url = workerOptions.workerUrl;\n\n  // If URL is test, generate local loaders.gl url\n  // @ts-ignore _workerType\n  if (options._workerType === 'test') {\n    url = `modules/${worker.module}/dist/${workerFile}`;\n  }\n\n  // If url override is not provided, generate a URL to published version on npm CDN unpkg.com\n  if (!url) {\n    // GENERATE\n    let version = worker.version;\n    // On master we need to load npm alpha releases published with the `beta` tag\n    if (version === 'latest') {\n      // throw new Error('latest worker version specified');\n      version = NPM_TAG;\n    }\n    const versionTag = version ? `@${version}` : '';\n    url = `https://unpkg.com/@loaders.gl/${worker.module}${versionTag}/dist/${workerFile}`;\n  }\n\n  assert(url);\n\n  // Allow user to override location\n  return url;\n}\n","import type {WorkerJob, WorkerMessageType, WorkerMessagePayload} from '@loaders.gl/worker-utils';\nimport type {Loader, LoaderOptions, LoaderContext} from '../../types';\nimport {WorkerFarm, getWorkerURL} from '@loaders.gl/worker-utils';\n\n/**\n * Determines if a loader can parse with worker\n * @param loader\n * @param options\n */\nexport function canParseWithWorker(loader: Loader, options?: LoaderOptions) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  return loader.worker && options?.worker;\n}\n\n/**\n * this function expects that the worker function sends certain messages,\n * this can be automated if the worker is wrapper by a call to createLoaderWorker in @loaders.gl/loader-utils.\n */\nexport async function parseWithWorker(\n  loader: Loader,\n  data,\n  options?: LoaderOptions,\n  context?: LoaderContext,\n  parseOnMainThread?: (arrayBuffer: ArrayBuffer, options: {[key: string]: any}) => Promise<void>\n) {\n  const name = loader.id; // TODO\n  const url = getWorkerURL(loader, options);\n\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({name, url});\n\n  // options.log object contains functions which cannot be transferred\n  // TODO - decide how to handle logging on workers\n  options = JSON.parse(JSON.stringify(options));\n\n  const job = await workerPool.startJob(\n    'process-on-worker',\n    // eslint-disable-next-line\n    onMessage.bind(null, parseOnMainThread)\n  );\n\n  job.postMessage('process', {\n    // @ts-ignore\n    input: data,\n    options\n  });\n\n  const result = await job.result;\n  return await result.result;\n}\n\n/**\n * Handle worker's responses to the main thread\n * @param job\n * @param type\n * @param payload\n */\nasync function onMessage(\n  parseOnMainThread,\n  job: WorkerJob,\n  type: WorkerMessageType,\n  payload: WorkerMessagePayload\n) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(payload.error);\n      break;\n\n    case 'process':\n      // Worker is asking for main thread to parseO\n      const {id, input, options} = payload;\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {id, result});\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {id, error: message});\n      }\n      break;\n\n    default:\n      // eslint-disable-next-line\n      console.warn(`parse-with-worker unknown message ${type}`);\n  }\n}\n","import {TypedArray} from '../../types';\nimport * as node from './buffer-utils';\n\n/**\n * Convert an object to an array buffer\n */\nexport function toArrayBuffer(data: any): ArrayBuffer {\n  // Note: Should be called first, Buffers can trigger other detections below\n  if (node.isBuffer(data)) {\n    // TODO - per docs we should just be able to call buffer.buffer, but there are issues\n    data = node.bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  // Careful - Node Buffers look like Uint8Arrays (keep after isBuffer)\n  if (ArrayBuffer.isView(data)) {\n    if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n      return data.buffer;\n    }\n    return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  // HACK to support Blob polyfill\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\n\n/**\n * compare two binary arrays for equality\n * @param {ArrayBuffer} a\n * @param {ArrayBuffer} b\n * @param {number} byteLength\n */\nexport function compareArrayBuffers(\n  arrayBuffer1: ArrayBuffer,\n  arrayBuffer2: ArrayBuffer,\n  byteLength?: number\n): boolean {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Concatenate a sequence of ArrayBuffers\n * @return A concatenated ArrayBuffer\n */\nexport function concatenateArrayBuffers(...sources: (ArrayBuffer | Uint8Array)[]): ArrayBuffer {\n  // Make sure all inputs are wrapped in typed arrays\n  const sourceArrays = sources.map((source2) =>\n    source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2\n  );\n\n  // Get length of all inputs\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n\n  // Allocate array with space for all inputs\n  const result = new Uint8Array(byteLength);\n\n  // Copy the subarrays\n  let offset = 0;\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  // We work with ArrayBuffers, discard the typed array wrapper\n  return result.buffer;\n}\n\n/**\n * Concatenate arbitrary count of typed arrays\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays\n * @param {...*} arrays - list of arrays. All arrays should be the same type\n * @return A concatenated TypedArray\n */\nexport function concatenateTypedArrays<T>(...typedArrays: T[]): T {\n  // @ts-ignore\n  const arrays = typedArrays as TypedArray[];\n  // @ts-ignore\n  const TypedArrayConstructor = (arrays && arrays.length > 1 && arrays[0].constructor) || null;\n  if (!TypedArrayConstructor) {\n    throw new Error(\n      '\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types'\n    );\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  // @ts-ignore typescript does not like dynamic constructors\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n  return result;\n}\n\n/**\n * Copy a view of an ArrayBuffer into new ArrayBuffer with byteOffset = 0\n * @param arrayBuffer\n * @param byteOffset\n * @param byteLength\n */\nexport function sliceArrayBuffer(\n  arrayBuffer: ArrayBuffer,\n  byteOffset: number,\n  byteLength?: number\n): ArrayBuffer {\n  const subArray =\n    byteLength !== undefined\n      ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength)\n      : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n","import * as node from '../node/buffer';\n\n/**\n * Check for Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n */\nexport function isBuffer(value: any): boolean {\n  return value && typeof value === 'object' && value.isBuffer;\n}\n\n/**\n * Converts to Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n * @todo better data type\n */\nexport function toBuffer(data: any): Buffer {\n  return node.toBuffer ? node.toBuffer(data) : data;\n}\n\n/**\n * Converts Node.js `Buffer` to `ArrayBuffer` (without triggering bundler to include Buffer polyfill on browser)\n * @todo better data type\n */\nexport function bufferToArrayBuffer(data: any): ArrayBuffer {\n  if (node.toArrayBuffer) {\n    // TODO - per docs we should just be able to call buffer.buffer, but there are issues\n    return node.toArrayBuffer(data);\n  }\n  return data;\n}\n","import {concatenateArrayBuffers} from '../binary-utils/array-buffer-utils';\n\n// GENERAL UTILITIES\n\n/**\n * Iterate over async iterator, without resetting iterator if end is not reached\n * - forEach intentionally does not reset iterator if exiting loop prematurely\n *   so that iteration can continue in a second loop\n * - It is recommended to use a standard for-await as last loop to ensure\n *   iterator gets properly reset\n *\n * TODO - optimize using sync iteration if argument is an Iterable?\n *\n * @param iterator\n * @param visitor\n */\nexport async function forEach(iterator, visitor) {\n  // eslint-disable-next-line\n  while (true) {\n    const {done, value} = await iterator.next();\n    if (done) {\n      iterator.return();\n      return;\n    }\n    const cancel = visitor(value);\n    if (cancel) {\n      return;\n    }\n  }\n}\n\n// Breaking big data into iterable chunks, concatenating iterable chunks into big data objects\n\n/**\n * Concatenates all data chunks yielded by an (async) iterator\n * This function can e.g. be used to enable atomic parsers to work on (async) iterator inputs\n */\n\nexport async function concatenateArrayBuffersAsync(\n  asyncIterator: AsyncIterable<ArrayBuffer> | Iterable<ArrayBuffer>\n): Promise<ArrayBuffer> {\n  const arrayBuffers: ArrayBuffer[] = [];\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n  return concatenateArrayBuffers(...arrayBuffers);\n}\n\nexport async function concatenateStringsAsync(\n  asyncIterator: AsyncIterable<string> | Iterable<string>\n): Promise<string> {\n  const strings: string[] = [];\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n  return strings.join('');\n}\n","import type {IteratorOptions} from './make-iterator';\n\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n\n/**\n * Returns an iterator that breaks a big string into chunks and yields them one-by-one as ArrayBuffers\n * @param blob string to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeStringIterator(\n  string: string,\n  options?: IteratorOptions\n): Iterable<ArrayBuffer> {\n  const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n  while (offset < string.length) {\n    // Create a chunk of the right size\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n\n    // yield an ArrayBuffer chunk\n    yield textEncoder.encode(chunk);\n  }\n}\n","import type {IteratorOptions} from './make-iterator';\n\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n\n/**\n * Returns an iterator that breaks a big ArrayBuffer into chunks and yields them one-by-one\n * @param blob ArrayBuffer to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeArrayBufferIterator(\n  arrayBuffer: ArrayBuffer,\n  options: IteratorOptions = {}\n): Iterable<ArrayBuffer> {\n  const {chunkSize = DEFAULT_CHUNK_SIZE} = options;\n\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    // Create a chunk of the right size\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n\n    // Copy data from the big chunk\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n\n    // yield the chunk\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n","import type {IteratorOptions} from './make-iterator';\n\nconst DEFAULT_CHUNK_SIZE = 1024 * 1024; // 1MB — biggest value that keeps UI responsive\n\n/**\n * Returns an iterator that breaks a big Blob into chunks and yields them one-by-one\n * @param blob Blob or File object\n * @param options\n * @param options.chunkSize\n */\nexport async function* makeBlobIterator(\n  blob: Blob,\n  options?: IteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n\n  let offset = 0;\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n\n    offset = end;\n    yield chunk;\n  }\n}\n","import type {Readable} from 'stream';\nimport {isBrowser, toArrayBuffer} from '@loaders.gl/loader-utils';\n\nexport type StreamIteratorOptions = {\n  _streamReadAhead?: boolean;\n};\n\n/**\n * Returns an async iterable that reads from a stream (works in both Node.js and browsers)\n * @param stream stream to iterator over\n */\nexport function makeStreamIterator(\n  stream: ReadableStream | Readable,\n  options?: StreamIteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  return isBrowser\n    ? makeBrowserStreamIterator(stream as ReadableStream, options)\n    : makeNodeStreamIterator(stream as Readable, options);\n}\n\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @see https://jakearchibald.com/2017/async-iterators-and-generators/#making-streams-iterate\n */\nasync function* makeBrowserStreamIterator(\n  stream: ReadableStream,\n  options?: StreamIteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  // WhatWG: stream is supposed to have a `getIterator` method\n  // if (typeof stream.getIterator === 'function') {\n  //   return stream.getIterator();\n  // }\n  // if (typeof stream[Symbol.asyncIterator] === 'function') {\n  //   return makeToArrayBufferIterator(stream);\n  // }\n\n  // In the browser, we first need to get a lock on the stream\n  const reader = stream.getReader();\n\n  let nextBatchPromise: Promise<{done?: boolean; value?: Uint8Array}> | undefined;\n\n  try {\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n      // Issue a read for an additional batch, while we await the next batch\n      // Idea is to make fetching happen in parallel with processing / parsing\n      if (options?._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n      // Read from the stream\n      // value is a Uint8Array\n      const {done, value} = await currentBatchPromise;\n      // Exit if we're done\n      if (done) {\n        return;\n      }\n      // Else yield the chunk\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    // TODO - examples makes it look like this should always be called,\n    // but that generates exceptions so only call it if we do not reach the end\n    reader.releaseLock();\n  }\n}\n\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @note Requires Node.js >= 10\n */\nasync function* makeNodeStreamIterator(\n  stream: Readable,\n  options?: StreamIteratorOptions\n): AsyncIterable<ArrayBuffer> {\n  // Hacky test for node version to ensure we don't call bad polyfills\n  // NODE 10+: stream is an asyncIterator\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk); // Coerce each chunk to ArrayBuffer\n  }\n}\n/* TODO - remove NODE < 10\n * @see https://github.com/bustle/streaming-iterables, MIT license\n *\n  if (typeof stream[Symbol.asyncIterator] === 'function') {\n    return;\n  }\n\n  // TODO - check if is this ever used in Node 10+?\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const data = stream.read();\n    if (data !== null) {\n      yield toArrayBuffer(data);\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (stream._readableState?.ended) {\n      return;\n    }\n    await onceReadable(stream);\n  }\n\nasync function onceReadable(stream: Readable): Promise<any> {\n  return new Promise((resolve) => {\n    stream.once('readable', resolve);\n  });\n}\n  */\n","import type {ReadStream} from 'fs';\n\nimport {makeStringIterator} from './make-string-iterator';\nimport {makeArrayBufferIterator} from './make-array-buffer-iterator';\nimport {makeBlobIterator} from './make-blob-iterator';\nimport type {StreamIteratorOptions} from './make-stream-iterator';\nimport {makeStreamIterator} from './make-stream-iterator';\nimport {isBlob, isReadableStream, isResponse} from '../../javascript-utils/is-type';\n\n/**\n * @param [options.chunkSize]\n */\nexport type IteratorOptions = StreamIteratorOptions & {\n  chunkSize?: number;\n};\n\n/**\n * Returns an iterator that breaks its input into chunks and yields them one-by-one.\n * @param data\n * @param options\n * @returns\n * This function can e.g. be used to enable data sources that can only be read atomically\n * (such as `Blob` and `File` via `FileReader`) to still be parsed in batches.\n */\nexport function makeIterator(\n  data: ArrayBuffer | string | Blob | Response | ReadableStream | ReadStream,\n  options?: IteratorOptions\n): AsyncIterable<ArrayBuffer> | Iterable<ArrayBuffer> {\n  if (typeof data === 'string') {\n    // Note: Converts string chunks to binary\n    return makeStringIterator(data, options);\n  }\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n  if (isBlob(data)) {\n    return makeBlobIterator(data as Blob, options);\n  }\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data as ReadableStream, options);\n  }\n  if (isResponse(data)) {\n    const response = data as Response;\n    return makeStreamIterator(response.body as ReadableStream, options);\n  }\n  throw new Error('makeIterator');\n}\n","import type {\n  DataType,\n  SyncDataType,\n  BatchableDataType,\n  Loader,\n  LoaderOptions\n} from '@loaders.gl/loader-utils';\nimport {concatenateArrayBuffersAsync} from '@loaders.gl/loader-utils';\nimport {\n  isResponse,\n  isReadableStream,\n  isAsyncIterable,\n  isIterable,\n  isIterator,\n  isBlob,\n  isBuffer\n} from '../../javascript-utils/is-type';\nimport {makeIterator} from '../../iterators/make-iterator/make-iterator';\nimport {checkResponse, makeResponse} from '../utils/response-utils';\n\nconst ERR_DATA = 'Cannot convert supplied data type';\n\n// eslint-disable-next-line complexity\nexport function getArrayBufferOrStringFromDataSync(\n  data: SyncDataType,\n  loader: Loader,\n  options: LoaderOptions\n): ArrayBuffer | string {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    // @ts-ignore\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n    return arrayBuffer;\n  }\n\n  // We may need to handle offsets\n  if (ArrayBuffer.isView(data)) {\n    // TextDecoder is invoked on typed arrays and will handle offsets\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n\n    // Since we are returning the underlying arrayBuffer, we must create a new copy\n    // if this typed array / Buffer is a partial view into the ArryayBuffer\n    // TODO - this is a potentially unnecessary copy\n    const byteLength = data.byteLength || data.length;\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      // console.warn(`loaders.gl copying arraybuffer of length ${byteLength}`);\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\n\n// Convert async iterator to a promise\nexport async function getArrayBufferOrStringFromData(\n  data: DataType,\n  loader: Loader,\n  options: LoaderOptions\n): Promise<ArrayBuffer | string> {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data as string | ArrayBuffer, loader, options);\n  }\n\n  // Blobs and files are FileReader compatible\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data as Response;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    // @ts-expect-error TS2559 options type\n    data = makeIterator(data as ReadableStream, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    // Assume arrayBuffer iterator - attempt to concatenate\n    return concatenateArrayBuffersAsync(data as AsyncIterable<ArrayBuffer>);\n  }\n\n  throw new Error(ERR_DATA);\n}\n\nexport async function getAsyncIterableFromData(\n  data: BatchableDataType,\n  options: LoaderOptions\n): Promise<AsyncIterable<ArrayBuffer> | Iterable<ArrayBuffer>> {\n  if (isIterator(data)) {\n    return data as AsyncIterable<ArrayBuffer>;\n  }\n\n  if (isResponse(data)) {\n    const response = data as Response;\n    // Note Since this function is not async, we currently can't load error message, just status\n    await checkResponse(response);\n    // TODO - bug in polyfill, body can be a Promise under Node.js\n    // eslint-disable-next-line @typescript-eslint/await-thenable\n    const body = await response.body;\n    // TODO - body can be null?\n    return makeIterator(body as ReadableStream<Uint8Array>, options as any);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data as Blob | ReadableStream, options as any);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\n\nexport async function getReadableStream(data: BatchableDataType): Promise<ReadableStream> {\n  if (isReadableStream(data)) {\n    return data as ReadableStream;\n  }\n  if (isResponse(data)) {\n    // @ts-ignore\n    return data.body;\n  }\n  const response = await makeResponse(data);\n  // @ts-ignore\n  return response.body;\n}\n\n// HELPERS\n\nfunction getIterableFromData(data) {\n  // generate an iterator that emits a single chunk\n  if (ArrayBuffer.isView(data)) {\n    return (function* oneChunk() {\n      yield data.buffer;\n    })();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return (function* oneChunk() {\n      yield data;\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n","import type {Loader, LoaderOptions, LoaderContext} from '@loaders.gl/loader-utils';\nimport {getFetchFunction} from './option-utils';\n\n/**\n * \"sub\" loaders invoked by other loaders get a \"context\" injected on `this`\n * The context will inject core methods like `parse` and contain information\n * about loaders and options passed in to the top-level `parse` call.\n *\n * @param context\n * @param options\n * @param previousContext\n */\nexport function getLoaderContext(\n  context: Omit<LoaderContext, 'fetch'> & Partial<Pick<LoaderContext, 'fetch'>>,\n  options?: LoaderOptions,\n  previousContext: LoaderContext | null = null\n): LoaderContext {\n  // For recursive calls, we already have a context\n  // TODO - add any additional loaders to context?\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext: LoaderContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  // Recursive loading does not use single loader\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\n\n// eslint-disable-next-line complexity\nexport function getLoadersFromContext(\n  loaders: Loader[] | Loader | undefined,\n  context?: LoaderContext\n) {\n  // A single non-array loader is force selected, but only on top-level (context === null)\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  // Create a merged list\n  let candidateLoaders;\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n  // If no loaders, return null to look in globally registered loaders\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n","import {Loader} from '@loaders.gl/loader-utils';\nimport {normalizeLoader} from '../loader-utils/normalize-loader';\nimport {getGlobalLoaderState} from '../loader-utils/option-utils';\n\n// Store global registered loaders on the global object to increase chances of cross loaders-version interoperability\n// This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders: Loader[]) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n    if (!loaderRegistry.find((registeredLoader) => normalizedLoader === registeredLoader)) {\n      // add to the beginning of the loaderRegistry, so the last registeredLoader get picked\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\n\nexport function getRegisteredLoaders(): Loader[] {\n  return getGlobalLoaderRegistry();\n}\n\n// For testing\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n","import type {LoaderContext, LoaderOptions, Loader} from '@loaders.gl/loader-utils';\nimport {compareArrayBuffers} from '@loaders.gl/loader-utils';\nimport {normalizeLoader} from '../loader-utils/normalize-loader';\nimport {getResourceUrlAndType} from '../utils/resource-utils';\nimport {getRegisteredLoaders} from './register-loaders';\nimport {isBlob} from '../../javascript-utils/is-type';\n\nconst EXT_PATTERN = /\\.([^.]+)$/;\n\n// TODO - Need a variant that peeks at streams for parseInBatches\n// TODO - Detect multiple matching loaders? Use heuristics to grade matches?\n// TODO - Allow apps to pass context to disambiguate between multiple matches (e.g. multiple .json formats)?\n\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport async function selectLoader(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[] | Loader = [],\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Promise<Loader | null> {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  // First make a sync attempt, disabling exceptions\n  let loader = selectLoaderSync(data, loaders, {...options, nothrow: true}, context);\n  if (loader) {\n    return loader;\n  }\n\n  // For Blobs and Files, try to asynchronously read a small initial slice and test again with that\n  // to see if we can detect by initial content\n  if (isBlob(data)) {\n    data = await (data as Blob).slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  // no loader available\n  if (!loader && !options?.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport function selectLoaderSync(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[] | Loader = [],\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Loader | null {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  // eslint-disable-next-line complexity\n  // if only a single loader was provided (not as array), force its use\n  // TODO - Should this behavior be kept and documented?\n  if (loaders && !Array.isArray(loaders)) {\n    // TODO - remove support for legacy loaders\n    return normalizeLoader(loaders);\n  }\n\n  // Build list of candidate loaders that will be searched in order for a match\n  let candidateLoaders: Loader[] = [];\n  // First search supplied loaders\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n  // Then fall back to registered loaders\n  if (!options?.ignoreRegisteredLoaders) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  // TODO - remove support for legacy loaders\n  normalizeLoaders(candidateLoaders);\n\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  // no loader available\n  if (!loader && !options?.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\n/** Implements loaders selection logic */\nfunction selectLoaderInternal(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[],\n  options?: LoaderOptions,\n  context?: LoaderContext\n) {\n  const {url, type} = getResourceUrlAndType(data);\n\n  const testUrl = url || context?.url;\n\n  let loader: Loader | null = null;\n\n  // if options.mimeType is supplied, it takes precedence\n  if (options?.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options?.mimeType);\n  }\n  // Look up loader by url\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  // Look up loader by mime type\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  // Look for loader via initial bytes (Note: not always accessible (e.g. Response, stream, async iterator)\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  // Look up loader by fallback mime type\n  loader = loader || findLoaderByMIMEType(loaders, options?.fallbackMimeType);\n\n  return loader;\n}\n\n/** Check HTTP Response */\nfunction validHTTPResponse(data: any): boolean {\n  // HANDLE HTTP status\n  if (data instanceof Response) {\n    // 204 - NO CONTENT. This handles cases where e.g. a tile server responds with 204 for a missing tile\n    if (data.status === 204) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getNoValidLoaderMessage(data): string {\n  const {url, type} = getResourceUrlAndType(data);\n\n  let message = 'No valid loader found';\n  if (data) {\n    message += ` data: \"${getFirstCharacters(data)}\", contentType: \"${type}\"`;\n  }\n  if (url) {\n    message += ` url: ${url}`;\n  }\n  return message;\n}\n\nfunction normalizeLoaders(loaders: Loader[]): void {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\n// TODO - Would be nice to support http://example.com/file.glb?parameter=1\n// E.g: x = new URL('http://example.com/file.glb?load=1'; x.pathname\nfunction findLoaderByUrl(loaders: Loader[], url?: string): Loader | null {\n  // Get extension\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders: Loader[], extension: string): Loader | null {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    // Support referring to loaders using the \"unregistered tree\"\n    // https://en.wikipedia.org/wiki/Media_type#Unregistered_tree\n    if (mimeType === `application/x.${loader.id}`) {\n      return loader;\n    }\n  }\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      // Typed Arrays can have offsets into underlying buffer\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n    // TODO Handle streaming case (requires creating a new AsyncIterator)\n  }\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some((test) => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some((test) => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      // Magic bytes check: If `test` is a string, check if binary data starts with that strings\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    // Typed Arrays can have offsets into underlying buffer\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n  return magic;\n}\n","import type {DataType, Loader, LoaderContext, LoaderOptions} from '@loaders.gl/loader-utils';\nimport {assert, validateWorkerVersion} from '@loaders.gl/worker-utils';\nimport {parseWithWorker, canParseWithWorker} from '@loaders.gl/loader-utils';\nimport {isLoaderObject} from '../loader-utils/normalize-loader';\nimport {normalizeOptions} from '../loader-utils/option-utils';\nimport {getArrayBufferOrStringFromData} from '../loader-utils/get-data';\nimport {getLoaderContext, getLoadersFromContext} from '../loader-utils/loader-context';\nimport {getResourceUrlAndType} from '../utils/resource-utils';\nimport {selectLoader} from './select-loader';\n\n/**\n * Parses `data` using a specified loader\n * @param data\n * @param loaders\n * @param options\n * @param context\n */\nexport async function parse(\n  data: DataType | Promise<DataType>,\n  loaders?: Loader | Loader[] | LoaderOptions,\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Promise<any> {\n  assert(!context || typeof context === 'object'); // parse no longer accepts final url\n\n  // Signature: parse(data, options, context | url)\n  // Uses registered loaders\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined; // context not supported in short signature\n    options = loaders as LoaderOptions;\n    loaders = undefined;\n  }\n\n  data = await data; // Resolve any promise\n  options = options || {};\n\n  // Extract a url for auto detection\n  const {url} = getResourceUrlAndType(data);\n\n  // Chooses a loader (and normalizes it)\n  // Also use any loaders in the context, new loaders take priority\n  const typedLoaders = loaders as Loader | Loader[] | undefined;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  // todo hacky type cast\n  const loader = await selectLoader(data as ArrayBuffer, candidateLoaders, options);\n  // Note: if no loader was found, if so just return null\n  if (!loader) {\n    return null;\n  }\n\n  // Normalize options\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n\n  // Get a context (if already present, will be unchanged)\n  context = getLoaderContext({url, parse, loaders: candidateLoaders}, options, context);\n\n  return await parseWithLoader(loader, data, options, context);\n}\n\n// TODO: support progress and abort\n// TODO - should accept loader.parseAsyncIterator and concatenate.\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  // First check for synchronous text parser, wrap results in promises\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  // If we have a workerUrl and the loader can parse the given options efficiently in a worker\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  // Check for asynchronous parser\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  // This should not happen, all sync loaders should also offer `parse` function\n  assert(!loader.parseSync);\n\n  // TBD - If asynchronous parser not available, return null\n  throw new Error(`${loader.id} loader - no parser found and worker is disabled`);\n}\n","import type {DataType, Loader, LoaderContext, LoaderOptions} from '@loaders.gl/loader-utils';\nimport {isBlob} from '../../javascript-utils/is-type';\nimport {isLoaderObject} from '../loader-utils/normalize-loader';\nimport {getFetchFunction} from '../loader-utils/option-utils';\n\nimport {parse} from './parse';\n\n/**\n * Parses `data` using a specified loader\n * Note: Load does duplicate a lot of parse.\n * it can also call fetchFile on string urls, which `parse` won't do.\n * @param data\n * @param loaders\n * @param options\n * @param context\n */\n// implementation signature\nexport async function load(\n  url: string | DataType,\n  loaders?: Loader | Loader[] | LoaderOptions,\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Promise<any> {\n  // Signature: load(url, options)\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined; // context not supported in short signature\n    options = loaders as LoaderOptions;\n    loaders = undefined;\n  }\n\n  // Select fetch function\n  const fetch = getFetchFunction(options);\n\n  // at this point, `url` could be already loaded binary data\n  let data = url;\n  // url is a string, fetch the url\n  if (typeof url === 'string') {\n    data = await fetch(url);\n    // URL is Blob or File, fetchFile handles it (alt: we could generate ObjectURL here)\n  }\n\n  if (isBlob(url)) {\n    // The fetch response object will contain blob.name\n    data = await fetch(url);\n  }\n\n  // Data is loaded (at least we have a `Response` object) so time to hand over to `parse`\n  return await parse(data, loaders, options);\n}\n","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import assert from './assert';\nconst RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nconst DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nconst config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure(options = {}) {\n  for (const key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value, {\n  precision = config.precision || 4\n} = {}) {\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : new Array(...array);\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (let i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, degrees => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, radians => radians * RADIANS_TO_DEGREES, result);\n}\nexport function sin(radians) {\n  return map(radians, angle => Math.sin(angle));\n}\nexport function cos(radians) {\n  return map(radians, angle => Math.cos(angle));\n}\nexport function tan(radians) {\n  return map(radians, angle => Math.tan(angle));\n}\nexport function asin(radians) {\n  return map(radians, angle => Math.asin(angle));\n}\nexport function acos(radians) {\n  return map(radians, angle => Math.acos(angle));\n}\nexport function atan(radians) {\n  return map(radians, angle => Math.atan(angle));\n}\nexport function clamp(value, min, max) {\n  return map(value, value => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map((ai, i) => lerp(ai, b[i], t));\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  const oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (let i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && typeof a === 'object' && b && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  const oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  let value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","function _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nimport { config, formatValue, equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class MathArray extends _extendableBuiltin(Array) {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n\n    return this.check();\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n\n    return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  scale(scale) {\n    if (Array.isArray(scale)) {\n      return this.multiply(scale);\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scale;\n    }\n\n    return this.check();\n  }\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n\n    return this.check();\n  }\n\n  multiplyByScalar(scalar) {\n    return this.scale(scalar);\n  }\n\n  get elements() {\n    return this;\n  }\n\n  check() {\n    if (config.debug && !this.validate()) {\n      throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n    }\n\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n\n    return valid;\n  }\n\n}\n//# sourceMappingURL=math-array.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (let i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName = '') {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  copy(vector) {\n    assert(false);\n    return this;\n  }\n\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}\n//# sourceMappingURL=vector.js.map","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","export function vec2_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nconst ORIGIN = [0, 0, 0];\nconst constants = {};\nexport default class Vector3 extends Vector {\n  static get ZERO() {\n    return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n  }\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(-0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n    }\n  }\n\n  set(x, y, z) {\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n    return this.check();\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    return this.check();\n  }\n\n  fromObject(object) {\n    if (config.debug) {\n      checkNumber(object.x);\n      checkNumber(object.y);\n      checkNumber(object.z);\n    }\n\n    this[0] = object.x;\n    this[1] = object.y;\n    this[2] = object.z;\n    return this.check();\n  }\n\n  toObject(object) {\n    object.x = this[0];\n    object.y = this[1];\n    object.z = this[2];\n    return object;\n  }\n\n  get ELEMENTS() {\n    return 3;\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    this[2] = checkNumber(value);\n  }\n\n  angle(vector) {\n    return vec3.angle(this, vector);\n  }\n\n  cross(vector) {\n    vec3.cross(this, this, vector);\n    return this.check();\n  }\n\n  rotateX({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateX(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateY({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateY(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateZ({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateZ(this, this, origin, radians);\n    return this.check();\n  }\n\n  transform(matrix4) {\n    return this.transformAsPoint(matrix4);\n  }\n\n  transformAsPoint(matrix4) {\n    vec3.transformMat4(this, this, matrix4);\n    return this.check();\n  }\n\n  transformAsVector(matrix4) {\n    vec3_transformMat4AsVector(this, this, matrix4);\n    return this.check();\n  }\n\n  transformByMatrix3(matrix3) {\n    vec3.transformMat3(this, this, matrix3);\n    return this.check();\n  }\n\n  transformByMatrix2(matrix2) {\n    vec3_transformMat2(this, this, matrix2);\n    return this.check();\n  }\n\n  transformByQuaternion(quaternion) {\n    vec3.transformQuat(this, this, quaternion);\n    return this.check();\n  }\n\n}\n//# sourceMappingURL=vector3.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class Matrix extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  get RANK() {\n    assert(false);\n    return 0;\n  }\n\n  toString() {\n    let string = '[';\n\n    if (config.printRowMajor) {\n      string += 'row-major:';\n\n      for (let row = 0; row < this.RANK; ++row) {\n        for (let col = 0; col < this.RANK; ++col) {\n          string += \" \".concat(this[col * this.RANK + row]);\n        }\n      }\n    } else {\n      string += 'column-major:';\n\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        string += \" \".concat(this[i]);\n      }\n    }\n\n    string += ']';\n    return string;\n  }\n\n  getElementIndex(row, col) {\n    return col * this.RANK + row;\n  }\n\n  getElement(row, col) {\n    return this[col * this.RANK + row];\n  }\n\n  setElement(row, col, value) {\n    this[col * this.RANK + row] = checkNumber(value);\n    return this;\n  }\n\n  getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      result[i] = this[firstIndex + i];\n    }\n\n    return result;\n  }\n\n  setColumn(columnIndex, columnVector) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      this[firstIndex + i] = columnVector[i];\n    }\n\n    return this;\n  }\n\n}\n//# sourceMappingURL=matrix.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nconst IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nconst ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nconst INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nconst constants = {};\nexport default class Matrix4 extends Matrix {\n  static get IDENTITY() {\n    constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n    return constants.IDENTITY;\n  }\n\n  static get ZERO() {\n    constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n    return constants.ZERO;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  get RANK() {\n    return 4;\n  }\n\n  constructor(array) {\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    this[9] = array[9];\n    this[10] = array[10];\n    this[11] = array[11];\n    this[12] = array[12];\n    this[13] = array[13];\n    this[14] = array[14];\n    this[15] = array[15];\n    return this.check();\n  }\n\n  set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  toRowMajor(result) {\n    result[0] = this[0];\n    result[1] = this[4];\n    result[2] = this[8];\n    result[3] = this[12];\n    result[4] = this[1];\n    result[5] = this[5];\n    result[6] = this[9];\n    result[7] = this[13];\n    result[8] = this[2];\n    result[9] = this[6];\n    result[10] = this[10];\n    result[11] = this[14];\n    result[12] = this[3];\n    result[13] = this[7];\n    result[14] = this[11];\n    result[15] = this[15];\n    return result;\n  }\n\n  identity() {\n    return this.copy(IDENTITY);\n  }\n\n  fromQuaternion(q) {\n    mat4.fromQuat(this, q);\n    return this.check();\n  }\n\n  frustum({\n    left,\n    right,\n    bottom,\n    top,\n    near,\n    far\n  }) {\n    if (far === Infinity) {\n      Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n    } else {\n      mat4.frustum(this, left, right, bottom, top, near, far);\n    }\n\n    return this.check();\n  }\n\n  static _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n    const column0Row0 = 2.0 * near / (right - left);\n    const column1Row1 = 2.0 * near / (top - bottom);\n    const column2Row0 = (right + left) / (right - left);\n    const column2Row1 = (top + bottom) / (top - bottom);\n    const column2Row2 = -1.0;\n    const column2Row3 = -1.0;\n    const column3Row2 = -2.0 * near;\n    result[0] = column0Row0;\n    result[1] = 0.0;\n    result[2] = 0.0;\n    result[3] = 0.0;\n    result[4] = 0.0;\n    result[5] = column1Row1;\n    result[6] = 0.0;\n    result[7] = 0.0;\n    result[8] = column2Row0;\n    result[9] = column2Row1;\n    result[10] = column2Row2;\n    result[11] = column2Row3;\n    result[12] = 0.0;\n    result[13] = 0.0;\n    result[14] = column3Row2;\n    result[15] = 0.0;\n    return result;\n  }\n\n  lookAt(eye, center, up) {\n    if (arguments.length === 1) {\n      ({\n        eye,\n        center,\n        up\n      } = eye);\n    }\n\n    center = center || [0, 0, 0];\n    up = up || [0, 1, 0];\n    mat4.lookAt(this, eye, center, up);\n    return this.check();\n  }\n\n  ortho({\n    left,\n    right,\n    bottom,\n    top,\n    near = 0.1,\n    far = 500\n  }) {\n    mat4.ortho(this, left, right, bottom, top, near, far);\n    return this.check();\n  }\n\n  orthographic({\n    fovy = 45 * Math.PI / 180,\n    aspect = 1,\n    focalDistance = 1,\n    near = 0.1,\n    far = 500\n  }) {\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    const halfY = fovy / 2;\n    const top = focalDistance * Math.tan(halfY);\n    const right = top * aspect;\n    return new Matrix4().ortho({\n      left: -right,\n      right,\n      bottom: -top,\n      top,\n      near,\n      far\n    });\n  }\n\n  perspective({\n    fovy = undefined,\n    fov = 45 * Math.PI / 180,\n    aspect = 1,\n    near = 0.1,\n    far = 500\n  } = {}) {\n    fovy = fovy || fov;\n\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    mat4.perspective(this, fovy, aspect, near, far);\n    return this.check();\n  }\n\n  determinant() {\n    return mat4.determinant(this);\n  }\n\n  getScale(result = [-0, -0, -0]) {\n    result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n    result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n    return result;\n  }\n\n  getTranslation(result = [-0, -0, -0]) {\n    result[0] = this[12];\n    result[1] = this[13];\n    result[2] = this[14];\n    return result;\n  }\n\n  getRotation(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = 0;\n    result[4] = this[4] * inverseScale0;\n    result[5] = this[5] * inverseScale1;\n    result[6] = this[6] * inverseScale2;\n    result[7] = 0;\n    result[8] = this[8] * inverseScale0;\n    result[9] = this[9] * inverseScale1;\n    result[10] = this[10] * inverseScale2;\n    result[11] = 0;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = 0;\n    result[15] = 1;\n    return result;\n  }\n\n  getRotationMatrix3(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = this[4] * inverseScale0;\n    result[4] = this[5] * inverseScale1;\n    result[5] = this[6] * inverseScale2;\n    result[6] = this[8] * inverseScale0;\n    result[7] = this[9] * inverseScale1;\n    result[8] = this[10] * inverseScale2;\n    return result;\n  }\n\n  transpose() {\n    mat4.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat4.invert(this, this);\n    return this.check();\n  }\n\n  multiplyLeft(a) {\n    mat4.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat4.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotateX(radians) {\n    mat4.rotateX(this, this, radians);\n    return this.check();\n  }\n\n  rotateY(radians) {\n    mat4.rotateY(this, this, radians);\n    return this.check();\n  }\n\n  rotateZ(radians) {\n    mat4.rotateZ(this, this, radians);\n    return this.check();\n  }\n\n  rotateXYZ([rx, ry, rz]) {\n    return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4.rotate(this, this, radians, axis);\n    return this.check();\n  }\n\n  scale(factor) {\n    if (Array.isArray(factor)) {\n      mat4.scale(this, this, factor);\n    } else {\n      mat4.scale(this, this, [factor, factor, factor]);\n    }\n\n    return this.check();\n  }\n\n  translate(vec) {\n    mat4.translate(this, this, vec);\n    return this.check();\n  }\n\n  transform(vector, result) {\n    if (vector.length === 4) {\n      result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n      checkVector(result, 4);\n      return result;\n    }\n\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformAsPoint(vector, result) {\n    const {\n      length\n    } = vector;\n\n    switch (length) {\n      case 2:\n        result = vec2.transformMat4(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  transformAsVector(vector, result) {\n    switch (vector.length) {\n      case 2:\n        result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  makeRotationX(radians) {\n    return this.identity().rotateX(radians);\n  }\n\n  makeTranslation(x, y, z) {\n    return this.identity().translate([x, y, z]);\n  }\n\n  transformPoint(vector, result) {\n    deprecated('Matrix4.transformPoint', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformVector(vector, result) {\n    deprecated('Matrix4.transformVector', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformDirection(vector, result) {\n    deprecated('Matrix4.transformDirection', '3.0');\n    return this.transformAsVector(vector, result);\n  }\n\n}\n//# sourceMappingURL=matrix4.js.map","export default {\n  EPSILON1: 1e-1,\n  EPSILON2: 1e-2,\n  EPSILON3: 1e-3,\n  EPSILON4: 1e-4,\n  EPSILON5: 1e-5,\n  EPSILON6: 1e-6,\n  EPSILON7: 1e-7,\n  EPSILON8: 1e-8,\n  EPSILON9: 1e-9,\n  EPSILON10: 1e-10,\n  EPSILON11: 1e-11,\n  EPSILON12: 1e-12,\n  EPSILON13: 1e-13,\n  EPSILON14: 1e-14,\n  EPSILON15: 1e-15,\n  EPSILON16: 1e-16,\n  EPSILON17: 1e-17,\n  EPSILON18: 1e-18,\n  EPSILON19: 1e-19,\n  EPSILON20: 1e-20,\n  PI_OVER_TWO: Math.PI / 2,\n  PI_OVER_FOUR: Math.PI / 4,\n  PI_OVER_SIX: Math.PI / 6,\n  TWO_PI: Math.PI * 2\n};\n//# sourceMappingURL=math-utils.js.map","export const WGS84_RADIUS_X = 6378137.0;\nexport const WGS84_RADIUS_Y = 6378137.0;\nexport const WGS84_RADIUS_Z = 6356752.3142451793;\nexport const WGS84_CONSTANTS = {\n  radii: [WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z],\n  radiiSquared: [WGS84_RADIUS_X * WGS84_RADIUS_X, WGS84_RADIUS_Y * WGS84_RADIUS_Y, WGS84_RADIUS_Z * WGS84_RADIUS_Z],\n  oneOverRadii: [1.0 / WGS84_RADIUS_X, 1.0 / WGS84_RADIUS_Y, 1.0 / WGS84_RADIUS_Z],\n  oneOverRadiiSquared: [1.0 / (WGS84_RADIUS_X * WGS84_RADIUS_X), 1.0 / (WGS84_RADIUS_Y * WGS84_RADIUS_Y), 1.0 / (WGS84_RADIUS_Z * WGS84_RADIUS_Z)],\n  maximumRadius: Math.max(WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z),\n  centerToleranceSquared: 1e-1\n};\n//# sourceMappingURL=constants.js.map","import { Vector3, isArray, toRadians, toDegrees, config } from '@math.gl/core';\nimport { WGS84_CONSTANTS } from './constants';\n\nconst noop = x => x;\n\nconst scratchVector = new Vector3();\nexport function fromCartographic(cartographic, result, map = noop) {\n  if (isArray(cartographic)) {\n    result[0] = map(cartographic[0]);\n    result[1] = map(cartographic[1]);\n    result[2] = cartographic[2];\n  } else if ('longitude' in cartographic) {\n    result[0] = map(cartographic.longitude);\n    result[1] = map(cartographic.latitude);\n    result[2] = cartographic.height;\n  } else {\n    result[0] = map(cartographic.x);\n    result[1] = map(cartographic.y);\n    result[2] = cartographic.z;\n  }\n\n  return result;\n}\nexport function fromCartographicToRadians(cartographic, vector = scratchVector) {\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? noop : toRadians);\n}\nexport function fromCartographicToDegrees(cartographic, vector = scratchVector) {\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? toDegrees : noop);\n}\nexport function toCartographic(vector, cartographic, map = noop) {\n  if (isArray(cartographic)) {\n    cartographic[0] = map(vector[0]);\n    cartographic[1] = map(vector[1]);\n    cartographic[2] = vector[2];\n  } else if ('longitude' in cartographic) {\n    cartographic.longitude = map(vector[0]);\n    cartographic.latitude = map(vector[1]);\n    cartographic.height = vector[2];\n  } else {\n    cartographic.x = map(vector[0]);\n    cartographic.y = map(vector[1]);\n    cartographic.z = vector[2];\n  }\n\n  return cartographic;\n}\nexport function toCartographicFromRadians(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? noop : toDegrees);\n}\nexport function toCartographicFromDegrees(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? toRadians : noop);\n}\nexport function isWGS84(vector) {\n  if (!vector) {\n    return false;\n  }\n\n  scratchVector.from(vector);\n  const {\n    oneOverRadiiSquared,\n    centerToleranceSquared\n  } = WGS84_CONSTANTS;\n  const x2 = vector[0] * vector[0] * oneOverRadiiSquared[0];\n  const y2 = vector[1] * vector[1] * oneOverRadiiSquared[1];\n  const z2 = vector[2] * vector[2] * oneOverRadiiSquared[2];\n  return Math.abs(x2 + y2 + z2 - 1) < centerToleranceSquared;\n}\n//# sourceMappingURL=type-utils.js.map","import { Vector3, assert, _MathUtils } from '@math.gl/core';\nimport * as vec3 from 'gl-matrix/vec3';\nconst scratchVector = new Vector3();\nconst scaleToGeodeticSurfaceIntersection = new Vector3();\nconst scaleToGeodeticSurfaceGradient = new Vector3();\nexport default function scaleToGeodeticSurface(cartesian, ellipsoid, result = new Vector3()) {\n  const {\n    oneOverRadii,\n    oneOverRadiiSquared,\n    centerToleranceSquared\n  } = ellipsoid;\n  scratchVector.from(cartesian);\n  const positionX = cartesian.x;\n  const positionY = cartesian.y;\n  const positionZ = cartesian.z;\n  const oneOverRadiiX = oneOverRadii.x;\n  const oneOverRadiiY = oneOverRadii.y;\n  const oneOverRadiiZ = oneOverRadii.z;\n  const x2 = positionX * positionX * oneOverRadiiX * oneOverRadiiX;\n  const y2 = positionY * positionY * oneOverRadiiY * oneOverRadiiY;\n  const z2 = positionZ * positionZ * oneOverRadiiZ * oneOverRadiiZ;\n  const squaredNorm = x2 + y2 + z2;\n  const ratio = Math.sqrt(1.0 / squaredNorm);\n\n  if (!Number.isFinite(ratio)) {\n    return undefined;\n  }\n\n  const intersection = scaleToGeodeticSurfaceIntersection;\n  intersection.copy(cartesian).scale(ratio);\n\n  if (squaredNorm < centerToleranceSquared) {\n    return intersection.to(result);\n  }\n\n  const oneOverRadiiSquaredX = oneOverRadiiSquared.x;\n  const oneOverRadiiSquaredY = oneOverRadiiSquared.y;\n  const oneOverRadiiSquaredZ = oneOverRadiiSquared.z;\n  const gradient = scaleToGeodeticSurfaceGradient;\n  gradient.set(intersection.x * oneOverRadiiSquaredX * 2.0, intersection.y * oneOverRadiiSquaredY * 2.0, intersection.z * oneOverRadiiSquaredZ * 2.0);\n  let lambda = (1.0 - ratio) * cartesian.len() / (0.5 * gradient.len());\n  let correction = 0.0;\n  let xMultiplier;\n  let yMultiplier;\n  let zMultiplier;\n  let func;\n\n  do {\n    lambda -= correction;\n    xMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredX);\n    yMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredY);\n    zMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredZ);\n    const xMultiplier2 = xMultiplier * xMultiplier;\n    const yMultiplier2 = yMultiplier * yMultiplier;\n    const zMultiplier2 = zMultiplier * zMultiplier;\n    const xMultiplier3 = xMultiplier2 * xMultiplier;\n    const yMultiplier3 = yMultiplier2 * yMultiplier;\n    const zMultiplier3 = zMultiplier2 * zMultiplier;\n    func = x2 * xMultiplier2 + y2 * yMultiplier2 + z2 * zMultiplier2 - 1.0;\n    const denominator = x2 * xMultiplier3 * oneOverRadiiSquaredX + y2 * yMultiplier3 * oneOverRadiiSquaredY + z2 * zMultiplier3 * oneOverRadiiSquaredZ;\n    const derivative = -2.0 * denominator;\n    correction = func / derivative;\n  } while (Math.abs(func) > _MathUtils.EPSILON12);\n\n  return scratchVector.scale([xMultiplier, yMultiplier, zMultiplier]).to(result);\n}\n//# sourceMappingURL=scale-to-geodetic-surface.js.map","import { Vector3, assert, equals as equalsEpsilon } from '@math.gl/core';\nconst EPSILON14 = 1e-14;\nconst scratchOrigin = new Vector3();\nconst VECTOR_PRODUCT_LOCAL_FRAME = {\n  up: {\n    south: 'east',\n    north: 'west',\n    west: 'south',\n    east: 'north'\n  },\n  down: {\n    south: 'west',\n    north: 'east',\n    west: 'north',\n    east: 'south'\n  },\n  south: {\n    up: 'west',\n    down: 'east',\n    west: 'down',\n    east: 'up'\n  },\n  north: {\n    up: 'east',\n    down: 'west',\n    west: 'up',\n    east: 'down'\n  },\n  west: {\n    up: 'north',\n    down: 'south',\n    north: 'down',\n    south: 'up'\n  },\n  east: {\n    up: 'south',\n    down: 'north',\n    north: 'up',\n    south: 'down'\n  }\n};\nconst degeneratePositionLocalFrame = {\n  north: [-1, 0, 0],\n  east: [0, 1, 0],\n  up: [0, 0, 1],\n  south: [1, 0, 0],\n  west: [0, -1, 0],\n  down: [0, 0, -1]\n};\nconst scratchAxisVectors = {\n  east: new Vector3(),\n  north: new Vector3(),\n  up: new Vector3(),\n  west: new Vector3(),\n  south: new Vector3(),\n  down: new Vector3()\n};\nconst scratchVector1 = new Vector3();\nconst scratchVector2 = new Vector3();\nconst scratchVector3 = new Vector3();\nexport default function localFrameToFixedFrame(ellipsoid, firstAxis, secondAxis, thirdAxis, cartesianOrigin, result) {\n  const thirdAxisInferred = VECTOR_PRODUCT_LOCAL_FRAME[firstAxis] && VECTOR_PRODUCT_LOCAL_FRAME[firstAxis][secondAxis];\n  assert(thirdAxisInferred && (!thirdAxis || thirdAxis === thirdAxisInferred));\n  let firstAxisVector;\n  let secondAxisVector;\n  let thirdAxisVector;\n  const origin = scratchOrigin.copy(cartesianOrigin);\n  const atPole = equalsEpsilon(origin.x, 0.0, EPSILON14) && equalsEpsilon(origin.y, 0.0, EPSILON14);\n\n  if (atPole) {\n    const sign = Math.sign(origin.z);\n    firstAxisVector = scratchVector1.fromArray(degeneratePositionLocalFrame[firstAxis]);\n\n    if (firstAxis !== 'east' && firstAxis !== 'west') {\n      firstAxisVector.scale(sign);\n    }\n\n    secondAxisVector = scratchVector2.fromArray(degeneratePositionLocalFrame[secondAxis]);\n\n    if (secondAxis !== 'east' && secondAxis !== 'west') {\n      secondAxisVector.scale(sign);\n    }\n\n    thirdAxisVector = scratchVector3.fromArray(degeneratePositionLocalFrame[thirdAxis]);\n\n    if (thirdAxis !== 'east' && thirdAxis !== 'west') {\n      thirdAxisVector.scale(sign);\n    }\n  } else {\n    const {\n      up,\n      east,\n      north\n    } = scratchAxisVectors;\n    east.set(-origin.y, origin.x, 0.0).normalize();\n    ellipsoid.geodeticSurfaceNormal(origin, up);\n    north.copy(up).cross(east);\n    const {\n      down,\n      west,\n      south\n    } = scratchAxisVectors;\n    down.copy(up).scale(-1);\n    west.copy(east).scale(-1);\n    south.copy(north).scale(-1);\n    firstAxisVector = scratchAxisVectors[firstAxis];\n    secondAxisVector = scratchAxisVectors[secondAxis];\n    thirdAxisVector = scratchAxisVectors[thirdAxis];\n  }\n\n  result[0] = firstAxisVector.x;\n  result[1] = firstAxisVector.y;\n  result[2] = firstAxisVector.z;\n  result[3] = 0.0;\n  result[4] = secondAxisVector.x;\n  result[5] = secondAxisVector.y;\n  result[6] = secondAxisVector.z;\n  result[7] = 0.0;\n  result[8] = thirdAxisVector.x;\n  result[9] = thirdAxisVector.y;\n  result[10] = thirdAxisVector.z;\n  result[11] = 0.0;\n  result[12] = origin.x;\n  result[13] = origin.y;\n  result[14] = origin.z;\n  result[15] = 1.0;\n  return result;\n}\n//# sourceMappingURL=ellipsoid-transform.js.map","import { Vector3, Matrix4, toRadians, toDegrees, assert, equals, _MathUtils } from '@math.gl/core';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z } from '../constants';\nimport { fromCartographicToRadians, toCartographicFromRadians } from '../type-utils';\nimport scaleToGeodeticSurface from './helpers/scale-to-geodetic-surface';\nimport localFrameToFixedFrame from './helpers/ellipsoid-transform';\nconst scratchVector = new Vector3();\nconst scratchNormal = new Vector3();\nconst scratchK = new Vector3();\nconst scratchPosition = new Vector3();\nconst scratchHeight = new Vector3();\nconst scratchCartesian = new Vector3();\nlet wgs84;\nexport default class Ellipsoid {\n  static get WGS84() {\n    wgs84 = wgs84 || new Ellipsoid(WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z);\n    return wgs84;\n  }\n\n  constructor(x = 0.0, y = 0.0, z = 0.0) {\n    assert(x >= 0.0);\n    assert(y >= 0.0);\n    assert(z >= 0.0);\n    this.radii = new Vector3(x, y, z);\n    this.radiiSquared = new Vector3(x * x, y * y, z * z);\n    this.radiiToTheFourth = new Vector3(x * x * x * x, y * y * y * y, z * z * z * z);\n    this.oneOverRadii = new Vector3(x === 0.0 ? 0.0 : 1.0 / x, y === 0.0 ? 0.0 : 1.0 / y, z === 0.0 ? 0.0 : 1.0 / z);\n    this.oneOverRadiiSquared = new Vector3(x === 0.0 ? 0.0 : 1.0 / (x * x), y === 0.0 ? 0.0 : 1.0 / (y * y), z === 0.0 ? 0.0 : 1.0 / (z * z));\n    this.minimumRadius = Math.min(x, y, z);\n    this.maximumRadius = Math.max(x, y, z);\n    this.centerToleranceSquared = _MathUtils.EPSILON1;\n\n    if (this.radiiSquared.z !== 0) {\n      this.squaredXOverSquaredZ = this.radiiSquared.x / this.radiiSquared.z;\n    }\n\n    Object.freeze(this);\n  }\n\n  equals(right) {\n    return this === right || Boolean(right && this.radii.equals(right.radii));\n  }\n\n  toString() {\n    return this.radii.toString();\n  }\n\n  cartographicToCartesian(cartographic, result = [0, 0, 0]) {\n    const normal = scratchNormal;\n    const k = scratchK;\n    const [,, height] = cartographic;\n    this.geodeticSurfaceNormalCartographic(cartographic, normal);\n    k.copy(this.radiiSquared).scale(normal);\n    const gamma = Math.sqrt(normal.dot(k));\n    k.scale(1 / gamma);\n    normal.scale(height);\n    k.add(normal);\n    return k.to(result);\n  }\n\n  cartesianToCartographic(cartesian, result = [0, 0, 0]) {\n    scratchCartesian.from(cartesian);\n    const point = this.scaleToGeodeticSurface(scratchCartesian, scratchPosition);\n\n    if (!point) {\n      return undefined;\n    }\n\n    const normal = this.geodeticSurfaceNormal(point, scratchNormal);\n    const h = scratchHeight;\n    h.copy(scratchCartesian).subtract(point);\n    const longitude = Math.atan2(normal.y, normal.x);\n    const latitude = Math.asin(normal.z);\n    const height = Math.sign(vec3.dot(h, scratchCartesian)) * vec3.length(h);\n    return toCartographicFromRadians([longitude, latitude, height], result);\n  }\n\n  eastNorthUpToFixedFrame(origin, result = new Matrix4()) {\n    return localFrameToFixedFrame(this, 'east', 'north', 'up', origin, result);\n  }\n\n  localFrameToFixedFrame(firstAxis, secondAxis, thirdAxis, origin, result = new Matrix4()) {\n    return localFrameToFixedFrame(this, firstAxis, secondAxis, thirdAxis, origin, result);\n  }\n\n  geocentricSurfaceNormal(cartesian, result = [0, 0, 0]) {\n    return scratchVector.from(cartesian).normalize().to(result);\n  }\n\n  geodeticSurfaceNormalCartographic(cartographic, result = [0, 0, 0]) {\n    const cartographicVectorRadians = fromCartographicToRadians(cartographic);\n    const longitude = cartographicVectorRadians[0];\n    const latitude = cartographicVectorRadians[1];\n    const cosLatitude = Math.cos(latitude);\n    scratchVector.set(cosLatitude * Math.cos(longitude), cosLatitude * Math.sin(longitude), Math.sin(latitude)).normalize();\n    return scratchVector.to(result);\n  }\n\n  geodeticSurfaceNormal(cartesian, result = [0, 0, 0]) {\n    return scratchVector.from(cartesian).scale(this.oneOverRadiiSquared).normalize().to(result);\n  }\n\n  scaleToGeodeticSurface(cartesian, result) {\n    return scaleToGeodeticSurface(cartesian, this, result);\n  }\n\n  scaleToGeocentricSurface(cartesian, result = [0, 0, 0]) {\n    scratchPosition.from(cartesian);\n    const positionX = scratchPosition.x;\n    const positionY = scratchPosition.y;\n    const positionZ = scratchPosition.z;\n    const oneOverRadiiSquared = this.oneOverRadiiSquared;\n    const beta = 1.0 / Math.sqrt(positionX * positionX * oneOverRadiiSquared.x + positionY * positionY * oneOverRadiiSquared.y + positionZ * positionZ * oneOverRadiiSquared.z);\n    return scratchPosition.multiplyScalar(beta).to(result);\n  }\n\n  transformPositionToScaledSpace(position, result = [0, 0, 0]) {\n    return scratchPosition.from(position).scale(this.oneOverRadii).to(result);\n  }\n\n  transformPositionFromScaledSpace(position, result = [0, 0, 0]) {\n    return scratchPosition.from(position).scale(this.radii).to(result);\n  }\n\n  getSurfaceNormalIntersectionWithZAxis(position, buffer = 0.0, result = [0, 0, 0]) {\n    assert(equals(this.radii.x, this.radii.y, _MathUtils.EPSILON15));\n    assert(this.radii.z > 0);\n    scratchPosition.from(position);\n    const z = scratchPosition.z * (1 - this.squaredXOverSquaredZ);\n\n    if (Math.abs(z) >= this.radii.z - buffer) {\n      return undefined;\n    }\n\n    return scratchPosition.set(0.0, 0.0, z).to(result);\n  }\n\n}\n//# sourceMappingURL=ellipsoid.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n","import type {ImageTypeEnum} from '../../types';\nimport {global, isBrowser} from '../utils/globals';\n\n// @ts-ignore TS2339: Property does not exist on type\nconst {_parseImageNode} = global;\n\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined'; // NOTE: \"false\" positives if jsdom is installed\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\n\n/**\n * Checks if a loaders.gl image type is supported\n * @param type image type string\n */\nexport function isImageTypeSupported(type: string): boolean {\n  switch (type) {\n    case 'auto':\n      // Should only ever be false in Node.js, if polyfills have not been installed...\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n    case 'image':\n      return IMAGE_SUPPORTED;\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(`@loaders.gl/images: image ${type} not supported in this environment`);\n  }\n}\n\n/**\n * Returns the \"most performant\" supported image type on this platform\n * @returns image type string\n */\nexport function getDefaultImageType(): ImageTypeEnum {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  // This should only happen in Node.js\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n","import type {ImageType, ImageTypeEnum, ImageDataType} from '../../types';\n\nexport function isImage(image: ImageType): boolean {\n  return Boolean(getImageTypeOrNull(image));\n}\n\nexport function deleteImage(image: ImageType): void {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      (image as ImageBitmap).close();\n      break;\n    default:\n    // Nothing to do for images and image data objects\n  }\n}\n\nexport function getImageType(image: ImageType): ImageTypeEnum {\n  const format = getImageTypeOrNull(image);\n  if (!format) {\n    throw new Error('Not an image');\n  }\n  return format;\n}\n\nexport function getImageSize(image: ImageType): {width: number; height: number} {\n  return getImageData(image);\n}\n\nexport function getImageData(image: ImageType): ImageDataType | ImageData {\n  switch (getImageType(image)) {\n    case 'data':\n      return image as unknown as ImageData;\n\n    case 'image':\n    case 'imagebitmap':\n      // Extract the image data from the image via a canvas\n      const canvas = document.createElement('canvas');\n      // TODO - reuse the canvas?\n      const context = canvas.getContext('2d');\n      if (!context) {\n        throw new Error('getImageData');\n      }\n      // @ts-ignore\n      canvas.width = image.width;\n      // @ts-ignore\n      canvas.height = image.height;\n      // @ts-ignore\n      context.drawImage(image, 0, 0);\n      // @ts-ignore\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\n// PRIVATE\n\n// eslint-disable-next-line complexity\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n  return null;\n}\n","// SVG parsing has limitations, e.g:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=606319\n\nconst SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\n\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\n\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    // Prepare a properly tagged data URL, and load using normal mechanism\n    const textDecoder = new TextDecoder();\n    let xmlText = textDecoder.decode(arrayBuffer);\n    // TODO Escape in browser to support e.g. Chinese characters\n    try {\n      if (typeof unescape === 'function' && typeof encodeURIComponent === 'function') {\n        xmlText = unescape(encodeURIComponent(xmlText));\n      }\n    } catch (error) {\n      throw new Error((error as Error).message);\n    }\n    // base64 encoding is safer. utf-8 fails in some browsers\n    const src = `data:image/svg+xml;base64,${btoa(xmlText)}`;\n    return src;\n  }\n  return getBlob(arrayBuffer, url);\n}\n\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=606319\n    // return new Blob([new Uint8Array(arrayBuffer)], {type: 'image/svg+xml'});\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n  // TODO - how to determine mime type? Param? Sniff here?\n  return new Blob([new Uint8Array(arrayBuffer)]); // MIME type not needed?\n}\n","import {getBlobOrSVGDataUrl} from './svg-utils';\n\n// Parses html image from array buffer\nexport default async function parseToImage(arrayBuffer, options, url) {\n  // Note: image parsing requires conversion to Blob (for createObjectURL).\n  // Potentially inefficient for not using `response.blob()` (and for File / Blob inputs)...\n  // But presumably not worth adding 'blob' flag to loader objects?\n\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\n\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  // The `image.onload()` callback does not guarantee that the image has been decoded\n  // so a main thread \"freeze\" can be incurred when using the image for the first time.\n  // `Image.decode()` returns a promise that completes when image is decoded.\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decode\n  // Note: When calling `img.decode()`, we do not need to wait for `img.onload()`\n  // Note: `HTMLImageElement.decode()` is not available in Edge and IE11\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  // Create a promise that tracks onload/onerror callbacks\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n      image.onerror = (err) => reject(new Error(`Could not load image ${url}: ${err}`));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n","import {isSVG, getBlob} from './svg-utils';\nimport parseToImage from './parse-to-image';\n\nconst EMPTY_OBJECT = {};\n\nlet imagebitmapOptionsSupported = true;\n\n/**\n * Asynchronously parses an array buffer into an ImageBitmap - this contains the decoded data\n * ImageBitmaps are supported on worker threads, but not supported on Edge, IE11 and Safari\n * https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap#Browser_compatibility\n *\n * TODO - createImageBitmap supports source rect (5 param overload), pass through?\n */\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  // Cannot parse SVG directly to ImageBitmap, parse to Image first\n  if (isSVG(url)) {\n    // Note: this only works on main thread\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    // Create blob from the array buffer\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\n/**\n * Safely creates an imageBitmap with options\n * *\n * Firefox crashes if imagebitmapOptions is supplied\n * Avoid supplying if not provided or supported, remember if not supported\n */\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      // @ts-ignore Options\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error); // eslint-disable-line\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  // @ts-ignore\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n  return true;\n}\n","// Attributions\n// * Based on binary-gltf-utils under MIT license: Copyright (c) 2016-17 Karl Cheng\n\n// TODO: make these functions work for Node.js buffers?\n// Quarantine references to Buffer to prevent bundler from adding big polyfills\n// import {bufferToArrayBuffer} from '../node/buffer-to-array-buffer';\n// TODO - this should be handled in @loaders.gl/polyfills\n\n/** MIME type, width and height extracted from binary compressed image data */\nexport type BinaryImageMetadata = {\n  mimeType: string;\n  width: number;\n  height: number;\n};\n\nconst BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\n\n/**\n * Extracts `{mimeType, width and height}` from a memory buffer containing a known image format\n * Currently supports `image/png`, `image/jpeg`, `image/bmp` and `image/gif`.\n * @param binaryData image file memory to parse\n * @returns metadata or null if memory is not a valid image file format layout.\n */\nexport function getBinaryImageMetadata(\n  binaryData: DataView | ArrayBuffer\n): BinaryImageMetadata | null {\n  const dataView = toDataView(binaryData);\n  return (\n    getPngMetadata(dataView) ||\n    getJpegMetadata(dataView) ||\n    getGifMetadata(dataView) ||\n    getBmpMetadata(dataView)\n  );\n}\n\n// PNG\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  // Check file contains the first 4 bytes of the PNG signature.\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n  if (!isPng) {\n    return null;\n  }\n\n  // Extract size from a binary PNG file\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\n// GIF\n\n// Extract size from a binary GIF file\n// TODO: GIF is not this simple\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  // Check first 4 bytes of the GIF signature (\"GIF8\").\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n  if (!isGif) {\n    return null;\n  }\n\n  // GIF is little endian.\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\n// BMP\n\n// TODO: BMP is not this simple\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  // Check magic number is valid (first 2 characters should be \"BM\").\n  // The mandatory bitmap file header is 14 bytes long.\n  const isBmp =\n    dataView.byteLength >= 14 &&\n    dataView.getUint16(0, BIG_ENDIAN) === 0x424d &&\n    dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  // BMP is little endian.\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\n// JPEG\n\n// Extract width and height from a binary JPEG file\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  // Check file contains the JPEG \"start of image\" (SOI) marker\n  // followed by another marker.\n  const isJpeg =\n    dataView.byteLength >= 3 &&\n    dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 &&\n    dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {tableMarkers, sofMarkers} = getJpegMarkers();\n\n  // Exclude the two byte SOI marker.\n  let i = 2;\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    // The frame that contains the width and height of the JPEG image.\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN), // Number of lines\n        width: dataView.getUint16(i + 7, BIG_ENDIAN) // Number of pixels per line\n      };\n    }\n\n    // Miscellaneous tables/data preceding the frame header.\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    // Length includes size of length parameter but not the two byte header.\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  // Tables/misc header markers.\n  // DQT, DHT, DAC, DRI, COM, APP_n\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  // SOF markers and DHP marker.\n  // These markers are after tables/misc data.\n  const sofMarkers = new Set([\n    0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce,\n    0xffcf, 0xffde\n  ]);\n\n  return {tableMarkers, sofMarkers};\n}\n\n// TODO - move into image module?\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  // TODO: make these functions work for Node.js buffers?\n  // if (bufferToArrayBuffer) {\n  //   data = bufferToArrayBuffer(data);\n  // }\n\n  // Careful - Node Buffers will look like ArrayBuffers (keep after isBuffer)\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n  throw new Error('toDataView');\n}\n","import {global} from '../utils/globals';\nimport {assert} from '../utils/assert';\nimport {getBinaryImageMetadata} from '../category-api/binary-image-api';\n\n// Use polyfills if installed to p[arsed image using get-pixels\nexport default function parseToNodeImage(arrayBuffer, options) {\n  const {mimeType} = getBinaryImageMetadata(arrayBuffer) || {};\n\n  // @ts-ignore\n  const {_parseImageNode} = global;\n  assert(_parseImageNode); // '@loaders.gl/polyfills not installed'\n\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n","import {assert} from '../utils/assert';\nimport {isImageTypeSupported, getDefaultImageType} from '../category-api/image-type';\nimport {getImageData} from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\n\n// Parse to platform defined image type (data on node, ImageBitmap or HTMLImage on browser)\n// eslint-disable-next-line complexity\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n\n  // The user can request a specific output format via `options.image.type`\n  const imageType = imageOptions.type || 'auto';\n\n  const {url} = context || {};\n\n  // Note: For options.image.type === `data`, we may still need to load as `image` or `imagebitmap`\n  const loadType = getLoadableImageType(imageType);\n\n  let image;\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n    case 'data':\n      // Node.js loads imagedata directly\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n    default:\n      assert(false);\n  }\n\n  // Browser: if options.image.type === 'data', we can now extract data from the loaded image\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\n// Get a loadable image type from image type\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      // Browser: For image data we need still need to load using an image format\n      // Node: the default image type is `data`.\n      return getDefaultImageType();\n    default:\n      // Throw an error if not supported\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n","import type {LoaderWithParser} from '@loaders.gl/loader-utils';\nimport {VERSION} from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport {getBinaryImageMetadata} from './lib/category-api/binary-image-api';\n\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = [\n  'image/png',\n  'image/jpeg',\n  'image/gif',\n  'image/webp',\n  'image/bmp',\n  'image/vnd.microsoft.icon',\n  'image/svg+xml'\n];\n\n/**\n * Loads a platform-specific image type\n * Note: This type can be used as input data to WebGL texture creation\n */\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  // TODO: byteOffset, byteLength;\n  tests: [(arrayBuffer) => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true // if format is HTML\n    }\n    // imagebitmap: {} - passes (platform dependent) parameters to ImageBitmap constructor\n  }\n};\n\nexport const _typecheckImageLoader: LoaderWithParser = ImageLoader;\n","// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n","import type {Loader, LoaderOptions} from '@loaders.gl/loader-utils';\nimport type {DracoParseOptions} from './lib/draco-parser';\n// import type {DracoMeshData} from './types';\nimport {VERSION} from './lib/utils/version';\n\nexport type DracoLoaderOptions = LoaderOptions & {\n  draco?: DracoParseOptions & {\n    decoderType?: 'wasm' | 'js';\n    libraryPath?: string;\n    extraAttributes?;\n    attributeNameEntry?: string;\n  };\n};\n\nconst DEFAULT_DRACO_OPTIONS: DracoLoaderOptions = {\n  draco: {\n    decoderType: typeof WebAssembly === 'object' ? 'wasm' : 'js', // 'js' for IE11\n    libraryPath: 'libs/',\n    extraAttributes: {},\n    attributeNameEntry: undefined\n  }\n};\n\n/**\n * Worker loader for Draco3D compressed geometries\n */\nexport const DracoLoader = {\n  name: 'Draco',\n  id: 'draco',\n  module: 'draco',\n  version: VERSION,\n  worker: true,\n  extensions: ['drc'],\n  mimeTypes: ['application/octet-stream'],\n  binary: true,\n  tests: ['DRACO'],\n  options: DEFAULT_DRACO_OPTIONS\n};\n\nexport const _TypecheckDracoLoader: Loader = DracoLoader;\n","// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n","// Mesh category utilities\n// TODO - move to mesh category module, or to math.gl/geometry module\nimport {TypedArray} from '../../types';\n\ntype Attribute = {\n  size?: number;\n  type?: number;\n  normalized?: boolean;\n  value: TypedArray;\n};\n\ntype TypedArrays = {[key: string]: TypedArray};\nexport type Attributes = {[key: string]: Attribute};\n\n/**\n * Holds an axis aligned bounding box\n * TODO - make sure AxisAlignedBoundingBox in math.gl/culling understands this format (or change this format)\n */\ntype BoundingBox = [[number, number, number], [number, number, number]];\n\n/**\n * Get number of vertices in mesh\n * @param attributes\n */\nexport function getMeshSize(attributes: TypedArrays): number {\n  let size = 0;\n  for (const attributeName in attributes) {\n    const attribute = attributes[attributeName];\n    if (ArrayBuffer.isView(attribute)) {\n      // @ts-ignore DataView doesn't have BYTES_PER_ELEMENT\n      size += attribute.byteLength * attribute.BYTES_PER_ELEMENT;\n    }\n  }\n  return size;\n}\n\n/**\n * Get the (axis aligned) bounding box of a mesh\n * @param attributes\n * @returns array of two vectors representing the axis aligned bounding box\n */\n// eslint-disable-next-line complexity\nexport function getMeshBoundingBox(attributes: Attributes): BoundingBox {\n  let minX = Infinity;\n  let minY = Infinity;\n  let minZ = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  let maxZ = -Infinity;\n\n  const positions = attributes.POSITION ? attributes.POSITION.value : [];\n  const len = positions && positions.length;\n\n  for (let i = 0; i < len; i += 3) {\n    const x = positions[i];\n    const y = positions[i + 1];\n    const z = positions[i + 2];\n\n    minX = x < minX ? x : minX;\n    minY = y < minY ? y : minY;\n    minZ = z < minZ ? z : minZ;\n\n    maxX = x > maxX ? x : maxX;\n    maxY = y > maxY ? y : maxY;\n    maxZ = z > maxZ ? z : maxZ;\n  }\n  return [\n    [minX, minY, minZ],\n    [maxX, maxY, maxZ]\n  ];\n}\n","import {assert} from '../../utils/assert';\nimport Field from './field';\n\nexport type SchemaMetadata = Map<string, any>;\n\n/**\n * ArrowJS `Schema` API-compatible class for row-based tables (returned from `DataTable`)\n * https://loaders.gl/arrowjs/docs/api-reference/schema\n */\nexport default class Schema {\n  fields: Field[];\n  // TODO - Arrow just allows Map<string, string>\n  metadata: SchemaMetadata;\n\n  constructor(fields: Field[], metadata?: SchemaMetadata) {\n    assert(Array.isArray(fields));\n    checkNames(fields);\n    // For kepler fields, create arrow compatible `Fields` that have kepler fields as `metadata`\n    this.fields = fields;\n    this.metadata = metadata || new Map();\n  }\n\n  // TODO - arrow only seems to compare fields, not metadata\n  compareTo(other: Schema): boolean {\n    if (this.metadata !== other.metadata) {\n      return false;\n    }\n    if (this.fields.length !== other.fields.length) {\n      return false;\n    }\n    for (let i = 0; i < this.fields.length; ++i) {\n      if (!this.fields[i].compareTo(other.fields[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  select(...columnNames: string[]): Schema {\n    // Ensure column names reference valid fields\n    const nameMap = Object.create(null);\n    for (const name of columnNames) {\n      nameMap[name] = true;\n    }\n    const selectedFields = this.fields.filter((field) => nameMap[field.name]);\n    return new Schema(selectedFields, this.metadata);\n  }\n\n  selectAt(...columnIndices: number[]): Schema {\n    // Ensure column indices reference valid fields\n    const selectedFields = columnIndices.map((index) => this.fields[index]).filter(Boolean);\n    return new Schema(selectedFields, this.metadata);\n  }\n\n  assign(schemaOrFields: Schema | Field[]): Schema {\n    let fields: Field[];\n    let metadata: SchemaMetadata = this.metadata;\n\n    if (schemaOrFields instanceof Schema) {\n      const otherSchema = schemaOrFields;\n      fields = otherSchema.fields;\n      metadata = mergeMaps(mergeMaps(new Map(), this.metadata), otherSchema.metadata);\n    } else {\n      fields = schemaOrFields;\n    }\n\n    // Create a merged list of fields, overwrite fields in place, new fields at end\n    const fieldMap: {[key: string]: Field} = Object.create(null);\n\n    for (const field of this.fields) {\n      fieldMap[field.name] = field;\n    }\n\n    for (const field of fields) {\n      fieldMap[field.name] = field;\n    }\n\n    const mergedFields = Object.values(fieldMap);\n\n    return new Schema(mergedFields, metadata);\n  }\n}\n\n// Warn if any duplicated field names\nfunction checkNames(fields) {\n  const usedNames = {};\n  for (const field of fields) {\n    if (usedNames[field.name]) {\n      // eslint-disable-next-line\n      console.warn('Schema: duplicated field name', field.name, field);\n    }\n    usedNames[field.name] = true;\n  }\n}\n\nfunction mergeMaps<T>(m1: T, m2: T): T {\n  // @ts-ignore\n  return new Map([...(m1 || new Map()), ...(m2 || new Map())]);\n}\n","// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\nexport function assert(condition: boolean, message?: string) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n","// This code is adapted from ArrowJS https://github.com/apache/arrow\n// under Apache license http://www.apache.org/licenses/LICENSE-2.0\n\n/**\n * Main data type enumeration.\n *\n * Data types in this library are all *logical*. They can be expressed as\n * either a primitive physical type (bytes or bits of some fixed size), a\n * nested type consisting of other data types, or another data type (e.g. a\n * timestamp encoded as an int64).\n *\n * **Note**: Only enum values 0-17 (NONE through Map) are written to an Arrow\n * IPC payload.\n *\n * The rest of the values are specified here so TypeScript can narrow the type\n * signatures further beyond the base Arrow Types. The Arrow DataTypes include\n * metadata like `bitWidth` that impact the type signatures of the values we\n * accept and return.\n *\n * For example, the `Int8Vector` reads 1-byte numbers from an `Int8Array`, an\n * `Int32Vector` reads a 4-byte number from an `Int32Array`, and an `Int64Vector`\n * reads a pair of 4-byte lo, hi 32-bit integers as a zero-copy slice from the\n * underlying `Int32Array`.\n *\n * Library consumers benefit by knowing the narrowest type, since we can ensure\n * the types across all public methods are propagated, and never bail to `any`.\n * These values are _never_ used at runtime, and they will _never_ be written\n * to the flatbuffers metadata of serialized Arrow IPC payloads.\n */\nexport enum Type {\n  /** The default placeholder type */\n  NONE = 0,\n  /** A NULL type having no physical storage */\n  Null = 1,\n  /** Signed or unsigned 8, 16, 32, or 64-bit little-endian integer */\n  Int = 2,\n  /** 2, 4, or 8-byte floating point value */\n  Float = 3,\n  /** Variable-length bytes (no guarantee of UTF8-ness) */\n  Binary = 4,\n  /** UTF8 variable-length string as List<Char> */\n  Utf8 = 5,\n  /** Boolean as 1 bit, LSB bit-packed ordering */\n  Bool = 6,\n  /** Precision-and-scale-based decimal type. Storage type depends on the parameters. */\n  Decimal = 7,\n  /** int32_t days or int64_t milliseconds since the UNIX epoch */\n  Date = 8,\n  /** Time as signed 32 or 64-bit integer, representing either seconds, milliseconds, microseconds, or nanoseconds since midnight since midnight */\n  Time = 9,\n  /** Exact timestamp encoded with int64 since UNIX epoch (Default unit millisecond) */\n  Timestamp = 10,\n  /** YEAR_MONTH or DAY_TIME interval in SQL style */\n  Interval = 11,\n  /** A list of some logical data type */\n  List = 12,\n  /** Struct of logical types */\n  Struct = 13,\n  /** Union of logical types */\n  Union = 14,\n  /** Fixed-size binary. Each value occupies the same number of bytes */\n  FixedSizeBinary = 15,\n  /** Fixed-size list. Each value occupies the same number of bytes */\n  FixedSizeList = 16,\n  /** Map of named logical types */\n  Map = 17,\n\n  /** Dictionary aka Category type */\n  Dictionary = -1,\n  Int8 = -2,\n  Int16 = -3,\n  Int32 = -4,\n  Int64 = -5,\n  Uint8 = -6,\n  Uint16 = -7,\n  Uint32 = -8,\n  Uint64 = -9,\n  Float16 = -10,\n  Float32 = -11,\n  Float64 = -12,\n  DateDay = -13,\n  DateMillisecond = -14,\n  TimestampSecond = -15,\n  TimestampMillisecond = -16,\n  TimestampMicrosecond = -17,\n  TimestampNanosecond = -18,\n  TimeSecond = -19,\n  TimeMillisecond = -20,\n  TimeMicrosecond = -21,\n  TimeNanosecond = -22,\n  DenseUnion = -23,\n  SparseUnion = -24,\n  IntervalDayTime = -25,\n  IntervalYearMonth = -26\n}\n","// This code is adapted from ArrowJS https://github.com/apache/arrow\n// under Apache license http://www.apache.org/licenses/LICENSE-2.0\n\nimport {Type} from './enum';\n\nimport Field from './field';\n\nexport {Type} from './enum';\n\nexport type TypedIntArray =\n  | Int8Array\n  | Uint8Array\n  | Int16Array\n  | Uint16Array\n  | Int32Array\n  | Uint32Array\n  | Int32Array\n  | Uint32Array\n  | Uint8ClampedArray;\n\nexport type TypedFloatArray = Float32Array | Float64Array;\n\nexport type TypedArray = TypedIntArray | TypedFloatArray;\n\nexport type AnyArrayType = Array<any> | TypedIntArray | TypedFloatArray;\n\nexport class DataType {\n  static isNull(x: any): boolean {\n    return x && x.typeId === Type.Null;\n  }\n  static isInt(x: any): boolean {\n    return x && x.typeId === Type.Int;\n  }\n  static isFloat(x: any): boolean {\n    return x && x.typeId === Type.Float;\n  }\n  static isBinary(x: any): boolean {\n    return x && x.typeId === Type.Binary;\n  }\n  static isUtf8(x: any): boolean {\n    return x && x.typeId === Type.Utf8;\n  }\n  static isBool(x: any): boolean {\n    return x && x.typeId === Type.Bool;\n  }\n  static isDecimal(x: any): boolean {\n    return x && x.typeId === Type.Decimal;\n  }\n  static isDate(x: any): boolean {\n    return x && x.typeId === Type.Date;\n  }\n  static isTime(x: any): boolean {\n    return x && x.typeId === Type.Time;\n  }\n  static isTimestamp(x: any): boolean {\n    return x && x.typeId === Type.Timestamp;\n  }\n  static isInterval(x: any): boolean {\n    return x && x.typeId === Type.Interval;\n  }\n  static isList(x: any): boolean {\n    return x && x.typeId === Type.List;\n  }\n  static isStruct(x: any): boolean {\n    return x && x.typeId === Type.Struct;\n  }\n  static isUnion(x: any): boolean {\n    return x && x.typeId === Type.Union;\n  }\n  static isFixedSizeBinary(x: any): boolean {\n    return x && x.typeId === Type.FixedSizeBinary;\n  }\n  static isFixedSizeList(x: any): boolean {\n    return x && x.typeId === Type.FixedSizeList;\n  }\n  static isMap(x: any): boolean {\n    return x && x.typeId === Type.Map;\n  }\n  static isDictionary(x: any): boolean {\n    return x && x.typeId === Type.Dictionary;\n  }\n\n  get typeId(): Type {\n    return Type.NONE;\n  }\n\n  // get ArrayType(): AnyArrayType {\n  //   return Int8Array;\n  // }\n\n  // get ArrayType() { return Array; }\n  compareTo(other: DataType): boolean {\n    // TODO\n    return this === other; // comparer.visit(this, other);\n  }\n}\n\n// NULL\n\nexport class Null extends DataType {\n  get typeId(): Type {\n    return Type.Null;\n  }\n  get [Symbol.toStringTag](): string {\n    return 'Null';\n  }\n  toString(): string {\n    return 'Null';\n  }\n}\n\n// BOOLEANS\n\nexport class Bool extends DataType {\n  get typeId(): Type {\n    return Type.Bool;\n  }\n  // get ArrayType() {\n  //   return Uint8Array;\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'Bool';\n  }\n  toString(): string {\n    return 'Bool';\n  }\n}\n\n// INTS\n\nexport class Int extends DataType {\n  readonly isSigned: boolean;\n  readonly bitWidth: number;\n  constructor(isSigned, bitWidth) {\n    super();\n    this.isSigned = isSigned;\n    this.bitWidth = bitWidth;\n  }\n  get typeId(): Type {\n    return Type.Int;\n  }\n  // get ArrayType() {\n  //   switch (this.bitWidth) {\n  //     case 8:\n  //       return this.isSigned ? Int8Array : Uint8Array;\n  //     case 16:\n  //       return this.isSigned ? Int16Array : Uint16Array;\n  //     case 32:\n  //       return this.isSigned ? Int32Array : Uint32Array;\n  //     case 64:\n  //       return this.isSigned ? Int32Array : Uint32Array;\n  //     default:\n  //       throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`);\n  //   }\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'Int';\n  }\n  toString(): string {\n    return `${this.isSigned ? 'I' : 'Ui'}nt${this.bitWidth}`;\n  }\n}\n\nexport class Int8 extends Int {\n  constructor() {\n    super(true, 8);\n  }\n}\nexport class Int16 extends Int {\n  constructor() {\n    super(true, 16);\n  }\n}\nexport class Int32 extends Int {\n  constructor() {\n    super(true, 32);\n  }\n}\nexport class Int64 extends Int {\n  constructor() {\n    super(true, 64);\n  }\n}\nexport class Uint8 extends Int {\n  constructor() {\n    super(false, 8);\n  }\n}\nexport class Uint16 extends Int {\n  constructor() {\n    super(false, 16);\n  }\n}\nexport class Uint32 extends Int {\n  constructor() {\n    super(false, 32);\n  }\n}\nexport class Uint64 extends Int {\n  constructor() {\n    super(false, 64);\n  }\n}\n\n// FLOATS\n\nconst Precision = {\n  HALF: 16,\n  SINGLE: 32,\n  DOUBLE: 64\n};\n\nexport class Float extends DataType {\n  readonly precision: number;\n  constructor(precision) {\n    super();\n    this.precision = precision;\n  }\n  get typeId(): Type {\n    return Type.Float;\n  }\n  // get ArrayType() {\n  //   switch (this.precision) {\n  //     case Precision.HALF:\n  //       return Uint16Array;\n  //     case Precision.SINGLE:\n  //       return Float32Array;\n  //     case Precision.DOUBLE:\n  //       return Float64Array;\n  //     default:\n  //       throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`);\n  //   }\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'Float';\n  }\n  toString(): string {\n    return `Float${this.precision}`;\n  }\n}\n\nexport class Float16 extends Float {\n  constructor() {\n    super(Precision.HALF);\n  }\n}\nexport class Float32 extends Float {\n  constructor() {\n    super(Precision.SINGLE);\n  }\n}\nexport class Float64 extends Float {\n  constructor() {\n    super(Precision.DOUBLE);\n  }\n}\n\nexport class Binary extends DataType {\n  constructor() {\n    super();\n  }\n  get typeId() {\n    return Type.Binary;\n  }\n  toString() {\n    return 'Binary';\n  }\n  get [Symbol.toStringTag]() {\n    return 'Binary';\n  }\n}\n\n// STRINGS\n\nexport class Utf8 extends DataType {\n  get typeId(): Type {\n    return Type.Utf8;\n  }\n  // get ArrayType() {\n  //   return Uint8Array;\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'Utf8';\n  }\n  toString(): string {\n    return 'Utf8';\n  }\n}\n\n// DATES, TIMES AND INTERVALS\n\nconst DateUnit = {\n  DAY: 0,\n  MILLISECOND: 1\n};\n\nexport class Date extends DataType {\n  readonly unit: number;\n  constructor(unit) {\n    super();\n    this.unit = unit;\n  }\n  get typeId(): Type {\n    return Type.Date;\n  }\n  // get ArrayType() {\n  //   return Int32Array;\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'Date';\n  }\n  toString(): string {\n    return `Date${(this.unit + 1) * 32}<${DateUnit[this.unit]}>`;\n  }\n}\n\nexport class DateDay extends Date {\n  constructor() {\n    super(DateUnit.DAY);\n  }\n}\nexport class DateMillisecond extends Date {\n  constructor() {\n    super(DateUnit.MILLISECOND);\n  }\n}\n\nconst TimeUnit = {\n  SECOND: 1,\n  MILLISECOND: 1e3,\n  MICROSECOND: 1e6,\n  NANOSECOND: 1e9\n};\n\nexport class Time extends DataType {\n  readonly unit: number;\n  readonly bitWidth: number;\n\n  constructor(unit, bitWidth) {\n    super();\n    this.unit = unit;\n    this.bitWidth = bitWidth;\n  }\n  get typeId(): Type {\n    return Type.Time;\n  }\n  toString(): string {\n    return `Time${this.bitWidth}<${TimeUnit[this.unit]}>`;\n  }\n  get [Symbol.toStringTag](): string {\n    return 'Time';\n  }\n  // get ArrayType() {\n  //   return Int32Array;\n  // }\n}\n\nexport class TimeSecond extends Time {\n  constructor() {\n    super(TimeUnit.SECOND, 32);\n  }\n}\nexport class TimeMillisecond extends Time {\n  constructor() {\n    super(TimeUnit.MILLISECOND, 32);\n  }\n}\n// export class TimeMicrosecond extends Time { constructor() { super(TimeUnit.MICROSECOND, 64); } }\n// export class TimeNanosecond extends Time { constructor() { super(TimeUnit.NANOSECOND, 64); } }\n\nexport class Timestamp extends DataType {\n  readonly unit: any;\n  readonly timezone: any;\n\n  constructor(unit: any, timezone = null) {\n    super();\n    this.unit = unit;\n    this.timezone = timezone;\n  }\n  get typeId(): Type {\n    return Type.Timestamp;\n  }\n  // get ArrayType() {\n  //   return Int32Array;\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'Timestamp';\n  }\n  toString(): string {\n    return `Timestamp<${TimeUnit[this.unit]}${this.timezone ? `, ${this.timezone}` : ''}>`;\n  }\n}\n\nexport class TimestampSecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.SECOND, timezone);\n  }\n}\nexport class TimestampMillisecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.MILLISECOND, timezone);\n  }\n}\nexport class TimestampMicrosecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.MICROSECOND, timezone);\n  }\n}\nexport class TimestampNanosecond extends Timestamp {\n  constructor(timezone = null) {\n    super(TimeUnit.NANOSECOND, timezone);\n  }\n}\n\nconst IntervalUnit = {\n  DAY_TIME: 0,\n  YEAR_MONTH: 1\n};\n\nexport class Interval extends DataType {\n  readonly unit: number;\n  constructor(unit: number) {\n    super();\n    this.unit = unit;\n  }\n  get typeId(): Type {\n    return Type.Interval;\n  }\n  // get ArrayType() {\n  //   return Int32Array;\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'Interval';\n  }\n  toString(): string {\n    return `Interval<${IntervalUnit[this.unit]}>`;\n  }\n}\n\nexport class IntervalDayTime extends Interval {\n  constructor() {\n    super(IntervalUnit.DAY_TIME);\n  }\n}\nexport class IntervalYearMonth extends Interval {\n  constructor() {\n    super(IntervalUnit.YEAR_MONTH);\n  }\n}\n\nexport class FixedSizeList extends DataType {\n  readonly listSize: number;\n  readonly children: Field[];\n\n  constructor(listSize: number, child: Field) {\n    super();\n    this.listSize = listSize;\n    this.children = [child];\n  }\n  get typeId(): Type {\n    return Type.FixedSizeList;\n  }\n  get valueType() {\n    return this.children[0].type;\n  }\n  get valueField() {\n    return this.children[0];\n  }\n  // get ArrayType() {\n  //   return this.valueType.ArrayType;\n  // }\n  get [Symbol.toStringTag](): string {\n    return 'FixedSizeList';\n  }\n  toString(): string {\n    return `FixedSizeList[${this.listSize}]<${this.valueType}>`;\n  }\n}\n","import {DataType} from './type';\n\n/**\n * ArrowJS `Field` API-compatible class for row-based tables\n * https://loaders.gl/arrowjs/docs/api-reference/field\n * A field holds name, nullable, and metadata information about a table \"column\"\n * A Schema is essentially a list of fields\n */\nexport default class Field {\n  name: string;\n  type: DataType;\n  nullable: boolean;\n  metadata: Map<string, string>;\n\n  constructor(\n    name: string,\n    type: DataType,\n    nullable = false,\n    metadata: Map<string, string> = new Map()\n  ) {\n    this.name = name;\n    this.type = type;\n    this.nullable = nullable;\n    this.metadata = metadata;\n  }\n\n  get typeId(): number {\n    return this.type && this.type.typeId;\n  }\n\n  clone(): Field {\n    return new Field(this.name, this.type, this.nullable, this.metadata);\n  }\n\n  compareTo(other: this): boolean {\n    return (\n      this.name === other.name &&\n      this.type === other.type &&\n      this.nullable === other.nullable &&\n      this.metadata === other.metadata\n    );\n  }\n\n  toString(): string {\n    return `${this.type}${this.nullable ? ', nullable' : ''}${\n      this.metadata ? `, metadata: ${this.metadata}` : ''\n    }`;\n  }\n}\n","import {Schema, Field, FixedSizeList, getArrowTypeFromTypedArray} from '@loaders.gl/schema';\n\nimport {MeshAttribute, DracoAttribute, DracoLoaderData, DracoMetadataEntry} from '../draco-types';\n\nexport function makeSchemaFromAttributes(\n  attributes: {[attributeName: string]: MeshAttribute},\n  loaderData: DracoLoaderData,\n  indices?: MeshAttribute\n): Schema {\n  const metadataMap = makeMetadata(loaderData.metadata);\n  const fields: Field[] = [];\n  const namedLoaderDataAttributes = transformAttributesLoaderData(loaderData.attributes);\n  for (const attributeName in attributes) {\n    const attribute = attributes[attributeName];\n    const field = getArrowFieldFromAttribute(\n      attributeName,\n      attribute,\n      namedLoaderDataAttributes[attributeName]\n    );\n    fields.push(field);\n  }\n  if (indices) {\n    const indicesField = getArrowFieldFromAttribute('indices', indices);\n    fields.push(indicesField);\n  }\n  return new Schema(fields, metadataMap);\n}\n\nfunction transformAttributesLoaderData(loaderData: {[key: number]: DracoAttribute}): {\n  [attributeName: string]: DracoAttribute;\n} {\n  const result: {[attributeName: string]: DracoAttribute} = {};\n  for (const key in loaderData) {\n    const dracoAttribute = loaderData[key];\n    result[dracoAttribute.name || 'undefined'] = dracoAttribute;\n  }\n  return result;\n}\n\nfunction getArrowFieldFromAttribute(\n  attributeName: string,\n  attribute: MeshAttribute,\n  loaderData?: DracoAttribute\n): Field {\n  const metadataMap = loaderData ? makeMetadata(loaderData.metadata) : undefined;\n  const type = getArrowTypeFromTypedArray(attribute.value);\n  return new Field(\n    attributeName,\n    new FixedSizeList(attribute.size, new Field('value', type)),\n    false,\n    metadataMap\n  );\n}\n\nfunction makeMetadata(metadata: {[key: string]: DracoMetadataEntry}): Map<string, string> {\n  const metadataMap = new Map();\n  for (const key in metadata) {\n    metadataMap.set(`${key}.string`, JSON.stringify(metadata[key]));\n  }\n\n  return metadataMap;\n}\n","import type {TypedArray} from '../../types';\nimport {DataType, Float32, Float64, Int16, Int32, Int8, Uint16, Uint32, Uint8} from '../schema';\n\nexport function getArrowTypeFromTypedArray(array: TypedArray): DataType {\n  switch (array.constructor) {\n    case Int8Array:\n      return new Int8();\n    case Uint8Array:\n      return new Uint8();\n    case Int16Array:\n      return new Int16();\n    case Uint16Array:\n      return new Uint16();\n    case Int32Array:\n      return new Int32();\n    case Uint32Array:\n      return new Uint32();\n    case Float32Array:\n      return new Float32();\n    case Float64Array:\n      return new Float64();\n    default:\n      throw new Error('array type not supported');\n  }\n}\n","/* eslint-disable camelcase */\n\n// Draco types (input)\nimport type {\n  Draco3D,\n  Decoder,\n  Mesh,\n  PointCloud,\n  PointAttribute,\n  Metadata,\n  MetadataQuerier,\n  DracoInt32Array,\n  draco_DataType\n} from '../draco3d/draco3d-types';\n\n// Parsed data types (output)\nimport type {\n  TypedArray,\n  // standard mesh output data\n  MeshData,\n  MeshAttribute,\n  // standard mesh with draco metadata\n  DracoMeshData,\n  DracoLoaderData,\n  DracoAttribute,\n  DracoMetadataEntry,\n  DracoQuantizationTransform,\n  DracoOctahedronTransform\n} from './draco-types';\n\nimport {getMeshBoundingBox} from '@loaders.gl/schema';\nimport {makeSchemaFromAttributes} from './utils/schema-attribute-utils';\n\n/**\n * @param topology - How triangle indices should be generated (mesh only)\n * @param attributeNameEntry\n * @param extraAttributes\n * @param quantizedAttributes\n * @param octahedronAttributes\n */\nexport type DracoParseOptions = {\n  topology?: 'triangle-list' | 'triangle-strip';\n  attributeNameEntry?: string;\n  extraAttributes?: {[uniqueId: string]: number};\n  quantizedAttributes?: ('POSITION' | 'NORMAL' | 'COLOR' | 'TEX_COORD' | 'GENERIC')[];\n  octahedronAttributes?: ('POSITION' | 'NORMAL' | 'COLOR' | 'TEX_COORD' | 'GENERIC')[];\n};\n\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\n\n// Native Draco attribute names to GLTF attribute names.\nconst DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\n\nconst DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\n\nconst INDEX_ITEM_SIZE = 4;\n\nexport default class DracoParser {\n  draco: Draco3D;\n  decoder: Decoder;\n  metadataQuerier: MetadataQuerier;\n\n  // draco - the draco decoder, either import `draco3d` or load dynamically\n  constructor(draco: Draco3D) {\n    this.draco = draco;\n    this.decoder = new this.draco.Decoder();\n    this.metadataQuerier = new this.draco.MetadataQuerier();\n  }\n\n  /**\n   * Destroy draco resources\n   */\n  destroy(): void {\n    this.draco.destroy(this.decoder);\n    this.draco.destroy(this.metadataQuerier);\n  }\n\n  /**\n   * NOTE: caller must call `destroyGeometry` on the return value after using it\n   * @param arrayBuffer\n   * @param options\n   */\n  parseSync(arrayBuffer: ArrayBuffer, options: DracoParseOptions = {}): DracoMeshData {\n    const buffer = new this.draco.DecoderBuffer();\n    buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n\n    this._disableAttributeTransforms(options);\n\n    const geometry_type = this.decoder.GetEncodedGeometryType(buffer);\n    const dracoGeometry =\n      geometry_type === this.draco.TRIANGULAR_MESH\n        ? new this.draco.Mesh()\n        : new this.draco.PointCloud();\n\n    try {\n      let dracoStatus;\n      switch (geometry_type) {\n        case this.draco.TRIANGULAR_MESH:\n          dracoStatus = this.decoder.DecodeBufferToMesh(buffer, dracoGeometry as Mesh);\n          break;\n\n        case this.draco.POINT_CLOUD:\n          dracoStatus = this.decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n          break;\n\n        default:\n          throw new Error('DRACO: Unknown geometry type.');\n      }\n\n      if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n        const message = `DRACO decompression failed: ${dracoStatus.error_msg()}`;\n        // console.error(message);\n        throw new Error(message);\n      }\n\n      const loaderData = this._getDracoLoaderData(dracoGeometry, geometry_type, options);\n\n      const geometry = this._getMeshData(dracoGeometry, loaderData, options);\n\n      const boundingBox = getMeshBoundingBox(geometry.attributes);\n\n      const schema = makeSchemaFromAttributes(geometry.attributes, loaderData, geometry.indices);\n\n      const data: DracoMeshData = {\n        loader: 'draco',\n        loaderData,\n        header: {\n          vertexCount: dracoGeometry.num_points(),\n          boundingBox\n        },\n        ...geometry,\n        schema\n      };\n      return data;\n    } finally {\n      this.draco.destroy(buffer);\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry);\n      }\n    }\n  }\n\n  // Draco specific \"loader data\"\n\n  /**\n   * Extract\n   * @param dracoGeometry\n   * @param geometry_type\n   * @param options\n   * @returns\n   */\n  _getDracoLoaderData(\n    dracoGeometry: Mesh | PointCloud,\n    geometry_type,\n    options: DracoParseOptions\n  ): DracoLoaderData {\n    const metadata = this._getTopLevelMetadata(dracoGeometry);\n    const attributes = this._getDracoAttributes(dracoGeometry, options);\n\n    return {\n      geometry_type,\n      num_attributes: dracoGeometry.num_attributes(),\n      num_points: dracoGeometry.num_points(),\n      num_faces: dracoGeometry instanceof this.draco.Mesh ? dracoGeometry.num_faces() : 0,\n      metadata,\n      attributes\n    };\n  }\n\n  /**\n   * Extract all draco provided information and metadata for each attribute\n   * @param dracoGeometry\n   * @param options\n   * @returns\n   */\n  _getDracoAttributes(\n    dracoGeometry: Mesh | PointCloud,\n    options: DracoParseOptions\n  ): {[unique_id: number]: DracoAttribute} {\n    const dracoAttributes: {[unique_id: number]: DracoAttribute} = {};\n\n    for (let attributeId = 0; attributeId < dracoGeometry.num_attributes(); attributeId++) {\n      // Note: Draco docs do not seem clear on `GetAttribute` ids just being a zero-based index,\n      // but it does seems to work this way\n      const dracoAttribute = this.decoder.GetAttribute(dracoGeometry, attributeId);\n\n      const metadata = this._getAttributeMetadata(dracoGeometry, attributeId);\n\n      dracoAttributes[dracoAttribute.unique_id()] = {\n        unique_id: dracoAttribute.unique_id(),\n        attribute_type: dracoAttribute.attribute_type(),\n        data_type: dracoAttribute.data_type(),\n        num_components: dracoAttribute.num_components(),\n\n        byte_offset: dracoAttribute.byte_offset(),\n        byte_stride: dracoAttribute.byte_stride(),\n        normalized: dracoAttribute.normalized(),\n        attribute_index: attributeId,\n\n        metadata\n      };\n\n      // Add transformation parameters for any attributes app wants untransformed\n      const quantization = this._getQuantizationTransform(dracoAttribute, options);\n      if (quantization) {\n        dracoAttributes[dracoAttribute.unique_id()].quantization_transform = quantization;\n      }\n\n      const octahedron = this._getOctahedronTransform(dracoAttribute, options);\n      if (octahedron) {\n        dracoAttributes[dracoAttribute.unique_id()].octahedron_transform = octahedron;\n      }\n    }\n\n    return dracoAttributes;\n  }\n\n  /**\n   * Get standard loaders.gl mesh category data\n   * Extracts the geometry from draco\n   * @param dracoGeometry\n   * @param options\n   */\n  _getMeshData(\n    dracoGeometry: Mesh | PointCloud,\n    loaderData: DracoLoaderData,\n    options: DracoParseOptions\n  ): MeshData {\n    const attributes = this._getMeshAttributes(loaderData, dracoGeometry, options);\n\n    const positionAttribute = attributes.POSITION;\n    if (!positionAttribute) {\n      throw new Error('DRACO: No position attribute found.');\n    }\n\n    // For meshes, we need indices to define the faces.\n    if (dracoGeometry instanceof this.draco.Mesh) {\n      switch (options.topology) {\n        case 'triangle-strip':\n          return {\n            topology: 'triangle-strip',\n            mode: 4, // GL.TRIANGLES\n            attributes,\n            indices: {\n              value: this._getTriangleStripIndices(dracoGeometry),\n              size: 1\n            }\n          };\n        case 'triangle-list':\n        default:\n          return {\n            topology: 'triangle-list',\n            mode: 5, // GL.TRIANGLE_STRIP\n            attributes,\n            indices: {\n              value: this._getTriangleListIndices(dracoGeometry),\n              size: 1\n            }\n          };\n      }\n    }\n\n    // PointCloud - must come last as Mesh inherits from PointCloud\n    return {\n      topology: 'point-list',\n      mode: 0, // GL.POINTS\n      attributes\n    };\n  }\n\n  _getMeshAttributes(\n    loaderData: DracoLoaderData,\n    dracoGeometry: Mesh | PointCloud,\n    options: DracoParseOptions\n  ): {[attributeName: string]: MeshAttribute} {\n    const attributes: {[key: string]: MeshAttribute} = {};\n\n    for (const loaderAttribute of Object.values(loaderData.attributes)) {\n      const attributeName = this._deduceAttributeName(loaderAttribute, options);\n      loaderAttribute.name = attributeName;\n      const {value, size} = this._getAttributeValues(dracoGeometry, loaderAttribute);\n      attributes[attributeName] = {\n        value,\n        size,\n        byteOffset: loaderAttribute.byte_offset,\n        byteStride: loaderAttribute.byte_stride,\n        normalized: loaderAttribute.normalized\n      };\n    }\n\n    return attributes;\n  }\n\n  // MESH INDICES EXTRACTION\n\n  /**\n   * For meshes, we need indices to define the faces.\n   * @param dracoGeometry\n   */\n  _getTriangleListIndices(dracoGeometry: Mesh) {\n    // Example on how to retrieve mesh and attributes.\n    const numFaces = dracoGeometry.num_faces();\n    const numIndices = numFaces * 3;\n    const byteLength = numIndices * INDEX_ITEM_SIZE;\n\n    const ptr = this.draco._malloc(byteLength);\n    try {\n      this.decoder.GetTrianglesUInt32Array(dracoGeometry, byteLength, ptr);\n      return new Uint32Array(this.draco.HEAPF32.buffer, ptr, numIndices).slice();\n    } finally {\n      this.draco._free(ptr);\n    }\n  }\n\n  /**\n   * For meshes, we need indices to define the faces.\n   * @param dracoGeometry\n   */\n  _getTriangleStripIndices(dracoGeometry: Mesh) {\n    const dracoArray = new this.draco.DracoInt32Array();\n    try {\n      /* const numStrips = */ this.decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      return getUint32Array(dracoArray);\n    } finally {\n      this.draco.destroy(dracoArray);\n    }\n  }\n\n  /**\n   *\n   * @param dracoGeometry\n   * @param dracoAttribute\n   * @param attributeName\n   */\n  _getAttributeValues(\n    dracoGeometry: Mesh | PointCloud,\n    attribute: DracoAttribute\n  ): {value: TypedArray; size: number} {\n    const TypedArrayCtor = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[attribute.data_type];\n    const numComponents = attribute.num_components;\n    const numPoints = dracoGeometry.num_points();\n    const numValues = numPoints * numComponents;\n\n    const byteLength = numValues * TypedArrayCtor.BYTES_PER_ELEMENT;\n    const dataType = getDracoDataType(this.draco, TypedArrayCtor);\n\n    let value: TypedArray;\n\n    const ptr = this.draco._malloc(byteLength);\n    try {\n      const dracoAttribute = this.decoder.GetAttribute(dracoGeometry, attribute.attribute_index);\n      this.decoder.GetAttributeDataArrayForAllPoints(\n        dracoGeometry,\n        dracoAttribute,\n        dataType,\n        byteLength,\n        ptr\n      );\n      value = new TypedArrayCtor(this.draco.HEAPF32.buffer, ptr, numValues).slice();\n    } finally {\n      this.draco._free(ptr);\n    }\n\n    return {value, size: numComponents};\n  }\n\n  // Attribute names\n\n  /** \n   * DRACO does not store attribute names - We need to deduce an attribute name\n   * for each attribute\n  _getAttributeNames(\n    dracoGeometry: Mesh | PointCloud,\n    options: DracoParseOptions\n  ): {[unique_id: number]: string} {\n    const attributeNames: {[unique_id: number]: string} = {};\n    for (let attributeId = 0; attributeId < dracoGeometry.num_attributes(); attributeId++) {\n      const dracoAttribute = this.decoder.GetAttribute(dracoGeometry, attributeId);\n      const attributeName = this._deduceAttributeName(dracoAttribute, options);\n      attributeNames[attributeName] = attributeName;\n    }\n    return attributeNames;\n  }\n   */\n\n  /**\n   * Deduce an attribute name.\n   * @note DRACO does not save attribute names, just general type (POSITION, COLOR)\n   * to help optimize compression. We generate GLTF compatible names for the Draco-recognized\n   * types\n   * @param attributeData\n   */\n  _deduceAttributeName(attribute: DracoAttribute, options: DracoParseOptions): string {\n    // Deduce name based on application provided map\n    const uniqueId = attribute.unique_id;\n    for (const [attributeName, attributeUniqueId] of Object.entries(\n      options.extraAttributes || {}\n    )) {\n      if (attributeUniqueId === uniqueId) {\n        return attributeName;\n      }\n    }\n\n    // Deduce name based on attribute type\n    const thisAttributeType = attribute.attribute_type;\n    for (const dracoAttributeConstant in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n      const attributeType = this.draco[dracoAttributeConstant];\n      if (attributeType === thisAttributeType) {\n        // TODO - Return unique names if there multiple attributes per type\n        // (e.g. multiple TEX_COORDS or COLORS)\n        return DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[dracoAttributeConstant];\n      }\n    }\n\n    // Look up in metadata\n    // TODO - shouldn't this have priority?\n    const entryName = options.attributeNameEntry || 'name';\n    if (attribute.metadata[entryName]) {\n      return attribute.metadata[entryName].string;\n    }\n\n    // Attribute of \"GENERIC\" type, we need to assign some name\n    return `CUSTOM_ATTRIBUTE_${uniqueId}`;\n  }\n\n  // METADATA EXTRACTION\n\n  /** Get top level metadata */\n  _getTopLevelMetadata(dracoGeometry: Mesh | PointCloud) {\n    const dracoMetadata = this.decoder.GetMetadata(dracoGeometry);\n    return this._getDracoMetadata(dracoMetadata);\n  }\n\n  /** Get per attribute metadata */\n  _getAttributeMetadata(dracoGeometry: Mesh | PointCloud, attributeId: number) {\n    const dracoMetadata = this.decoder.GetAttributeMetadata(dracoGeometry, attributeId);\n    return this._getDracoMetadata(dracoMetadata);\n  }\n\n  /**\n   * Extract metadata field values\n   * @param dracoMetadata\n   * @returns\n   */\n  _getDracoMetadata(dracoMetadata: Metadata): {[entry: string]: DracoMetadataEntry} {\n    // The not so wonderful world of undocumented Draco APIs :(\n    if (!dracoMetadata || !dracoMetadata.ptr) {\n      return {};\n    }\n    const result = {};\n    const numEntries = this.metadataQuerier.NumEntries(dracoMetadata);\n    for (let entryIndex = 0; entryIndex < numEntries; entryIndex++) {\n      const entryName = this.metadataQuerier.GetEntryName(dracoMetadata, entryIndex);\n      result[entryName] = this._getDracoMetadataField(dracoMetadata, entryName);\n    }\n    return result;\n  }\n\n  /**\n   * Extracts possible values for one metadata entry by name\n   * @param dracoMetadata\n   * @param entryName\n   */\n  _getDracoMetadataField(dracoMetadata: Metadata, entryName: string): DracoMetadataEntry {\n    const dracoArray = new this.draco.DracoInt32Array();\n    try {\n      // Draco metadata fields can hold int32 arrays\n      this.metadataQuerier.GetIntEntryArray(dracoMetadata, entryName, dracoArray);\n      const intArray = getInt32Array(dracoArray);\n      return {\n        int: this.metadataQuerier.GetIntEntry(dracoMetadata, entryName),\n        string: this.metadataQuerier.GetStringEntry(dracoMetadata, entryName),\n        double: this.metadataQuerier.GetDoubleEntry(dracoMetadata, entryName),\n        intArray\n      };\n    } finally {\n      this.draco.destroy(dracoArray);\n    }\n  }\n\n  // QUANTIZED ATTRIBUTE SUPPORT (NO DECOMPRESSION)\n\n  /** Skip transforms for specific attribute types */\n  _disableAttributeTransforms(options: DracoParseOptions) {\n    const {quantizedAttributes = [], octahedronAttributes = []} = options;\n    const skipAttributes = [...quantizedAttributes, ...octahedronAttributes];\n    for (const dracoAttributeName of skipAttributes) {\n      this.decoder.SkipAttributeTransform(this.draco[dracoAttributeName]);\n    }\n  }\n\n  /**\n   * Extract (and apply?) Position Transform\n   * @todo not used\n   */\n  _getQuantizationTransform(\n    dracoAttribute: PointAttribute,\n    options: DracoParseOptions\n  ): DracoQuantizationTransform | null {\n    const {quantizedAttributes = []} = options;\n    const attribute_type = dracoAttribute.attribute_type();\n    const skip = quantizedAttributes.map((type) => this.decoder[type]).includes(attribute_type);\n    if (skip) {\n      const transform = new this.draco.AttributeQuantizationTransform();\n      try {\n        if (transform.InitFromAttribute(dracoAttribute)) {\n          return {\n            quantization_bits: transform.quantization_bits(),\n            range: transform.range(),\n            min_values: new Float32Array([1, 2, 3]).map((i) => transform.min_value(i))\n          };\n        }\n      } finally {\n        this.draco.destroy(transform);\n      }\n    }\n    return null;\n  }\n\n  _getOctahedronTransform(\n    dracoAttribute: PointAttribute,\n    options: DracoParseOptions\n  ): DracoOctahedronTransform | null {\n    const {octahedronAttributes = []} = options;\n    const attribute_type = dracoAttribute.attribute_type();\n    const octahedron = octahedronAttributes\n      .map((type) => this.decoder[type])\n      .includes(attribute_type);\n    if (octahedron) {\n      const transform = new this.draco.AttributeQuantizationTransform();\n      try {\n        if (transform.InitFromAttribute(dracoAttribute)) {\n          return {\n            quantization_bits: transform.quantization_bits()\n          };\n        }\n      } finally {\n        this.draco.destroy(transform);\n      }\n    }\n    return null;\n  }\n\n  // HELPERS\n}\n\n/**\n * Get draco specific data type by TypedArray constructor type\n * @param attributeType\n * @returns draco specific data type\n */\nfunction getDracoDataType(draco: Draco3D, attributeType: any): draco_DataType {\n  switch (attributeType) {\n    case Float32Array:\n      return draco.DT_FLOAT32;\n    case Int8Array:\n      return draco.DT_INT8;\n    case Int16Array:\n      return draco.DT_INT16;\n    case Int32Array:\n      return draco.DT_INT32;\n    case Uint8Array:\n      return draco.DT_UINT8;\n    case Uint16Array:\n      return draco.DT_UINT16;\n    case Uint32Array:\n      return draco.DT_UINT32;\n    default:\n      return draco.DT_INVALID;\n  }\n}\n\n/**\n * Copy a Draco int32 array into a JS typed array\n */\nfunction getInt32Array(dracoArray: DracoInt32Array): Int32Array {\n  const numValues = dracoArray.size();\n  const intArray = new Int32Array(numValues);\n  for (let i = 0; i < numValues; i++) {\n    intArray[i] = dracoArray.GetValue(i);\n  }\n  return intArray;\n}\n\n/**\n * Copy a Draco int32 array into a JS typed array\n */\nfunction getUint32Array(dracoArray: DracoInt32Array): Int32Array {\n  const numValues = dracoArray.size();\n  const intArray = new Int32Array(numValues);\n  for (let i = 0; i < numValues; i++) {\n    intArray[i] = dracoArray.GetValue(i);\n  }\n  return intArray;\n}\n","/* global importScripts */\nimport {global, isBrowser, isWorker} from '../env-utils/globals';\nimport * as node from '../node/require-utils.node';\nimport {assert} from '../env-utils/assert';\nimport {VERSION as __VERSION__} from '../env-utils/version';\n\n// TODO - unpkg.com doesn't seem to have a `latest` specifier for alpha releases...\nconst LATEST = 'beta';\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : LATEST;\n\nconst loadLibraryPromises = {}; // promises\n\n/**\n * Dynamically loads a library (\"module\")\n *\n * - wasm library: Array buffer is returned\n * - js library: Parse JS is returned\n *\n * Method depends on environment\n * - browser - script element is created and installed on document\n * - worker - eval is called on global context\n * - node - file is required\n *\n * @param libraryUrl\n * @param moduleName\n * @param options\n */\nexport async function loadLibrary(\n  libraryUrl: string,\n  moduleName: string | null = null,\n  options: object = {}\n): Promise<any> {\n  if (moduleName) {\n    libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n  }\n\n  // Ensure libraries are only loaded once\n  loadLibraryPromises[libraryUrl] =\n    loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n  return await loadLibraryPromises[libraryUrl];\n}\n\n// TODO - sort out how to resolve paths for main/worker and dev/prod\nexport function getLibraryUrl(library, moduleName?: string, options?): string {\n  // Check if already a URL\n  if (library.startsWith('http')) {\n    return library;\n  }\n\n  // Allow application to import and supply libraries through `options.modules`\n  const modules = options.modules || {};\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  // Load from local files, not from CDN scripts in Node.js\n  // TODO - needs to locate the modules directory when installed!\n  if (!isBrowser) {\n    return `modules/${moduleName}/dist/libs/${library}`;\n  }\n\n  // In browser, load from external scripts\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return `${options.CDN}/${moduleName}@${VERSION}/dist/libs/${library}`;\n  }\n\n  // TODO - loading inside workers requires paths relative to worker script location...\n  if (isWorker) {\n    return `../src/libs/${library}`;\n  }\n\n  return `modules/${moduleName}/src/libs/${library}`;\n}\n\nasync function loadLibraryFromFile(libraryUrl) {\n  if (libraryUrl.endsWith('wasm')) {\n    const response = await fetch(libraryUrl);\n    return await response.arrayBuffer();\n  }\n\n  if (!isBrowser) {\n    return node.requireFromFile && (await node.requireFromFile(libraryUrl));\n  }\n  if (isWorker) {\n    return importScripts(libraryUrl);\n  }\n  // TODO - fix - should be more secure than string parsing since observes CORS\n  // if (isBrowser) {\n  //   return await loadScriptFromFile(libraryUrl);\n  // }\n\n  const response = await fetch(libraryUrl);\n  const scriptSource = await response.text();\n  return loadLibraryFromString(scriptSource, libraryUrl);\n}\n\n/*\nasync function loadScriptFromFile(libraryUrl) {\n  const script = document.createElement('script');\n  script.src = libraryUrl;\n  return await new Promise((resolve, reject) => {\n    script.onload = data => {\n      resolve(data);\n    };\n    script.onerror = reject;\n  });\n}\n*/\n\n// TODO - Needs security audit...\n//  - Raw eval call\n//  - Potentially bypasses CORS\n// Upside is that this separates fetching and parsing\n// we could create a`LibraryLoader` or`ModuleLoader`\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return node.requireFromString && node.requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    // Use lvalue trick to make eval run in global scope\n    eval.call(global, scriptSource); // eslint-disable-line no-eval\n    // https://stackoverflow.com/questions/9107240/1-evalthis-vs-evalthis-in-javascript\n    // http://perfectionkills.com/global-eval-what-are-the-options/\n    return null;\n  }\n\n  const script = document.createElement('script');\n  script.id = id;\n  // most browsers like a separate text node but some throw an error. The second method covers those.\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n  document.body.appendChild(script);\n  return null;\n}\n\n// TODO - technique for module injection into worker, from THREE.DracoLoader...\n/*\nfunction combineWorkerWithLibrary(worker, jsContent) {\n  var fn = wWorker.toString();\n  var body = [\n    '// injected',\n    jsContent,\n    '',\n    '// worker',\n    fn.substring(fn.indexOf('{') + 1, fn.lastIndexOf('}'))\n  ].join('\\n');\n  this.workerSourceURL = URL.createObjectURL(new Blob([body]));\n}\n*/\n","// Dynamic DRACO module loading inspired by THREE.DRACOLoader\n// https://github.com/mrdoob/three.js/blob/398c4f39ebdb8b23eefd4a7a5ec49ec0c96c7462/examples/jsm/loaders/DRACOLoader.js\n// by Don McCurdy / https://www.donmccurdy.com / MIT license\n\nimport {loadLibrary} from '@loaders.gl/worker-utils';\n\nconst DRACO_VERSION = '1.4.1';\nconst DRACO_JS_DECODER_URL = `https://www.gstatic.com/draco/versioned/decoders/${DRACO_VERSION}/draco_decoder.js`;\nconst DRACO_WASM_WRAPPER_URL = `https://www.gstatic.com/draco/versioned/decoders/${DRACO_VERSION}/draco_wasm_wrapper.js`;\nconst DRACO_WASM_DECODER_URL = `https://www.gstatic.com/draco/versioned/decoders/${DRACO_VERSION}/draco_decoder.wasm`;\n\nconst DRACO_ENCODER_URL = `https://raw.githubusercontent.com/google/draco/${DRACO_VERSION}/javascript/draco_encoder.js`;\n\nlet loadDecoderPromise;\nlet loadEncoderPromise;\n\nexport async function loadDracoDecoderModule(options) {\n  const modules = options.modules || {};\n\n  // Check if a bundled draco3d library has been supplied by application\n  if (modules.draco3d) {\n    loadDecoderPromise =\n      loadDecoderPromise ||\n      modules.draco3d.createDecoderModule({}).then((draco) => {\n        return {draco};\n      });\n  } else {\n    // If not, dynamically load the WASM script from our CDN\n    loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n  }\n  return await loadDecoderPromise;\n}\n\nexport async function loadDracoEncoderModule(options) {\n  const modules = options.modules || {};\n\n  // Check if a bundled draco3d library has been supplied by application\n  if (modules.draco3d) {\n    loadEncoderPromise =\n      loadEncoderPromise ||\n      modules.draco3d.createEncoderModule({}).then((draco) => {\n        return {draco};\n      });\n  } else {\n    // If not, dynamically load the WASM script from our CDN\n    loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n  }\n  return await loadEncoderPromise;\n}\n\n// DRACO DECODER LOADING\n\nasync function loadDracoDecoder(options) {\n  let DracoDecoderModule;\n  let wasmBinary;\n  switch (options.draco && options.draco.decoderType) {\n    case 'js':\n      DracoDecoderModule = await loadLibrary(DRACO_JS_DECODER_URL, 'draco', options);\n      break;\n\n    case 'wasm':\n    default:\n      [DracoDecoderModule, wasmBinary] = await Promise.all([\n        await loadLibrary(DRACO_WASM_WRAPPER_URL, 'draco', options),\n        await loadLibrary(DRACO_WASM_DECODER_URL, 'draco', options)\n      ]);\n  }\n  // Depends on how import happened...\n  // @ts-ignore\n  DracoDecoderModule = DracoDecoderModule || globalThis.DracoDecoderModule;\n  return await initializeDracoDecoder(DracoDecoderModule, wasmBinary);\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  const options: {wasmBinary?: any} = {};\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise((resolve) => {\n    DracoDecoderModule({\n      ...options,\n      onModuleLoaded: (draco) => resolve({draco}) // Module is Promise-like. Wrap in object to avoid loop.\n    });\n  });\n}\n\n// ENCODER\n\nasync function loadDracoEncoder(options) {\n  let DracoEncoderModule = await loadLibrary(DRACO_ENCODER_URL, 'draco', options);\n  // @ts-ignore\n  DracoEncoderModule = DracoEncoderModule || globalThis.DracoEncoderModule;\n\n  return new Promise((resolve) => {\n    DracoEncoderModule({\n      onModuleLoaded: (draco) => resolve({draco}) // Module is Promise-like. Wrap in object to avoid loop.\n    });\n  });\n}\n","import type {LoaderWithParser} from '@loaders.gl/loader-utils';\nimport type {DracoMeshData, DracoLoaderData} from './lib/draco-types';\nimport type {DracoLoaderOptions} from './draco-loader';\nimport {DracoLoader as DracoWorkerLoader} from './draco-loader';\nimport DracoParser from './lib/draco-parser';\nimport {loadDracoDecoderModule} from './lib/draco-module-loader';\n\n// Draco data types\n\nexport type {DracoMeshData, DracoLoaderData};\n\n// Draco Writer\n\nexport type {DracoWriterOptions} from './draco-writer';\nexport {DracoWriter} from './draco-writer';\n\n// Draco Loader\n\nexport type {DracoLoaderOptions};\nexport {DracoWorkerLoader};\n\n/**\n * Loader for Draco3D compressed geometries\n */\nexport const DracoLoader = {\n  ...DracoWorkerLoader,\n  parse\n};\n\nasync function parse(\n  arrayBuffer: ArrayBuffer,\n  options?: DracoLoaderOptions\n): Promise<DracoMeshData> {\n  const {draco} = await loadDracoDecoderModule(options);\n  const dracoParser = new DracoParser(draco);\n  try {\n    return dracoParser.parseSync(arrayBuffer, options?.draco);\n  } finally {\n    dracoParser.destroy();\n  }\n}\n\n// TYPE TESTS - TODO find a better way than exporting junk\nexport const _TypecheckDracoLoader: LoaderWithParser = DracoLoader;\n","const t=new Uint8Array([0]),e=[171,75,84,88,32,50,48,187,13,10,26,10];var n,i,s,a,r,o,l,f;!function(t){t[t.NONE=0]=\"NONE\",t[t.BASISLZ=1]=\"BASISLZ\",t[t.ZSTD=2]=\"ZSTD\",t[t.ZLIB=3]=\"ZLIB\"}(n||(n={})),function(t){t[t.BASICFORMAT=0]=\"BASICFORMAT\"}(i||(i={})),function(t){t[t.UNSPECIFIED=0]=\"UNSPECIFIED\",t[t.ETC1S=163]=\"ETC1S\",t[t.UASTC=166]=\"UASTC\"}(s||(s={})),function(t){t[t.UNSPECIFIED=0]=\"UNSPECIFIED\",t[t.SRGB=1]=\"SRGB\"}(a||(a={})),function(t){t[t.UNSPECIFIED=0]=\"UNSPECIFIED\",t[t.LINEAR=1]=\"LINEAR\",t[t.SRGB=2]=\"SRGB\",t[t.ITU=3]=\"ITU\",t[t.NTSC=4]=\"NTSC\",t[t.SLOG=5]=\"SLOG\",t[t.SLOG2=6]=\"SLOG2\"}(r||(r={})),function(t){t[t.ALPHA_STRAIGHT=0]=\"ALPHA_STRAIGHT\",t[t.ALPHA_PREMULTIPLIED=1]=\"ALPHA_PREMULTIPLIED\"}(o||(o={})),function(t){t[t.RGB=0]=\"RGB\",t[t.RRR=3]=\"RRR\",t[t.GGG=4]=\"GGG\",t[t.AAA=15]=\"AAA\"}(l||(l={})),function(t){t[t.RGB=0]=\"RGB\",t[t.RGBA=3]=\"RGBA\",t[t.RRR=4]=\"RRR\",t[t.RRRG=5]=\"RRRG\"}(f||(f={}));class U{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=n.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:i.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:s.UNSPECIFIED,colorPrimaries:a.SRGB,transferFunction:a.SRGB,flags:o.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null}}class c{constructor(t,e,n,i){this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}function h(t){return\"undefined\"!=typeof TextEncoder?(new TextEncoder).encode(t):Buffer.from(t)}function _(t){return\"undefined\"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString(\"utf8\")}function g(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let i=0;for(const e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n}function p(t){const n=new Uint8Array(t.buffer,t.byteOffset,e.length);if(n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]||n[6]!==e[6]||n[7]!==e[7]||n[8]!==e[8]||n[9]!==e[9]||n[10]!==e[10]||n[11]!==e[11])throw new Error(\"Missing KTX 2.0 identifier.\");const i=new U,s=17*Uint32Array.BYTES_PER_ELEMENT,a=new c(t,e.length,s,!0);i.vkFormat=a._nextUint32(),i.typeSize=a._nextUint32(),i.pixelWidth=a._nextUint32(),i.pixelHeight=a._nextUint32(),i.pixelDepth=a._nextUint32(),i.layerCount=a._nextUint32(),i.faceCount=a._nextUint32();const r=a._nextUint32();i.supercompressionScheme=a._nextUint32();const o=a._nextUint32(),l=a._nextUint32(),f=a._nextUint32(),h=a._nextUint32(),g=a._nextUint64(),p=a._nextUint64(),x=new c(t,e.length+s,3*r*8,!0);for(let e=0;e<r;e++)i.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+x._nextUint64(),x._nextUint64()),uncompressedByteLength:x._nextUint64()});const u=new c(t,o,l,!0),y={vendorId:u._skip(4)._nextUint16(),descriptorType:u._nextUint16(),versionNumber:u._nextUint16(),descriptorBlockSize:u._nextUint16(),colorModel:u._nextUint8(),colorPrimaries:u._nextUint8(),transferFunction:u._nextUint8(),flags:u._nextUint8(),texelBlockDimension:{x:u._nextUint8()+1,y:u._nextUint8()+1,z:u._nextUint8()+1,w:u._nextUint8()+1},bytesPlane:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],samples:[]},D=(y.descriptorBlockSize/4-6)/4;for(let t=0;t<D;t++)y.samples[t]={bitOffset:u._nextUint16(),bitLength:u._nextUint8(),channelID:u._nextUint8(),samplePosition:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],sampleLower:u._nextUint32(),sampleUpper:u._nextUint32()};i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(y);const b=new c(t,f,h,!0);for(;b._offset<h;){const t=b._nextUint32(),e=b._scan(t),n=_(e),s=b._scan(t-e.byteLength);i.keyValue[n]=n.match(/^ktx/i)?_(s):s,t%4&&b._skip(4-t%4)}if(p<=0)return i;const d=new c(t,g,p,!0),B=d._nextUint16(),w=d._nextUint16(),A=d._nextUint32(),S=d._nextUint32(),m=d._nextUint32(),L=d._nextUint32(),I=[];for(let t=0;t<r;t++)I.push({imageFlags:d._nextUint32(),rgbSliceByteOffset:d._nextUint32(),rgbSliceByteLength:d._nextUint32(),alphaSliceByteOffset:d._nextUint32(),alphaSliceByteLength:d._nextUint32()});const R=g+d._offset,E=R+A,T=E+S,O=T+m,P=new Uint8Array(t.buffer,t.byteOffset+R,A),C=new Uint8Array(t.buffer,t.byteOffset+E,S),F=new Uint8Array(t.buffer,t.byteOffset+T,m),G=new Uint8Array(t.buffer,t.byteOffset+O,L);return i.globalData={endpointCount:B,selectorCount:w,imageDescs:I,endpointsData:P,selectorsData:C,tablesData:F,extendedData:G},i}function x(){return(x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}const u={keepWriter:!1};function y(n,s={}){s=x({},u,s);let a=new ArrayBuffer(0);if(n.globalData){const t=new ArrayBuffer(20+5*n.globalData.imageDescs.length*4),e=new DataView(t);e.setUint16(0,n.globalData.endpointCount,!0),e.setUint16(2,n.globalData.selectorCount,!0),e.setUint32(4,n.globalData.endpointsData.byteLength,!0),e.setUint32(8,n.globalData.selectorsData.byteLength,!0),e.setUint32(12,n.globalData.tablesData.byteLength,!0),e.setUint32(16,n.globalData.extendedData.byteLength,!0);for(let t=0;t<n.globalData.imageDescs.length;t++){const i=n.globalData.imageDescs[t];e.setUint32(20+5*t*4+0,i.imageFlags,!0),e.setUint32(20+5*t*4+4,i.rgbSliceByteOffset,!0),e.setUint32(20+5*t*4+8,i.rgbSliceByteLength,!0),e.setUint32(20+5*t*4+12,i.alphaSliceByteOffset,!0),e.setUint32(20+5*t*4+16,i.alphaSliceByteLength,!0)}a=g([t,n.globalData.endpointsData,n.globalData.selectorsData,n.globalData.tablesData,n.globalData.extendedData])}const r=[];let o=n.keyValue;s.keepWriter||(o=x({},n.keyValue,{KTXwriter:\"KTX-Parse v0.0.4\"}));for(const e in o){const n=o[e],i=h(e),s=\"string\"==typeof n?h(n):n,a=i.byteLength+1+s.byteLength+1,l=a%4?4-a%4:0;r.push(g([new Uint32Array([a]),i,t,s,t,new Uint8Array(l).fill(0)]))}const l=g(r),f=new ArrayBuffer(44),U=new DataView(f);if(1!==n.dataFormatDescriptor.length||n.dataFormatDescriptor[0].descriptorType!==i.BASICFORMAT)throw new Error(\"Only BASICFORMAT Data Format Descriptor output supported.\");const c=n.dataFormatDescriptor[0];U.setUint32(0,44,!0),U.setUint16(4,c.vendorId,!0),U.setUint16(6,c.descriptorType,!0),U.setUint16(8,c.versionNumber,!0),U.setUint16(10,c.descriptorBlockSize,!0),U.setUint8(12,c.colorModel),U.setUint8(13,c.colorPrimaries),U.setUint8(14,c.transferFunction),U.setUint8(15,c.flags),U.setUint8(16,c.texelBlockDimension.x-1),U.setUint8(17,c.texelBlockDimension.y-1),U.setUint8(18,c.texelBlockDimension.z-1),U.setUint8(19,c.texelBlockDimension.w-1);for(let t=0;t<8;t++)U.setUint8(20+t,c.bytesPlane[t]);for(let t=0;t<c.samples.length;t++){const e=c.samples[t],n=28+16*t;U.setUint16(n+0,e.bitOffset,!0),U.setUint8(n+2,e.bitLength),U.setUint8(n+3,e.channelID),U.setUint8(n+4,e.samplePosition[0]),U.setUint8(n+5,e.samplePosition[1]),U.setUint8(n+6,e.samplePosition[2]),U.setUint8(n+7,e.samplePosition[3]),U.setUint32(n+8,e.sampleLower,!0),U.setUint32(n+12,e.sampleUpper,!0)}const _=e.length+68+3*n.levels.length*8,p=_+f.byteLength;let y=p+l.byteLength;y%8&&(y+=8-y%8);const D=[],b=new DataView(new ArrayBuffer(3*n.levels.length*8));let d=y+a.byteLength;for(let t=0;t<n.levels.length;t++){const e=n.levels[t];D.push(e.levelData),b.setBigUint64(24*t+0,BigInt(d),!0),b.setBigUint64(24*t+8,BigInt(e.levelData.byteLength),!0),b.setBigUint64(24*t+16,BigInt(e.uncompressedByteLength),!0),d+=e.levelData.byteLength}const B=new ArrayBuffer(68),w=new DataView(B);return w.setUint32(0,n.vkFormat,!0),w.setUint32(4,n.typeSize,!0),w.setUint32(8,n.pixelWidth,!0),w.setUint32(12,n.pixelHeight,!0),w.setUint32(16,n.pixelDepth,!0),w.setUint32(20,n.layerCount,!0),w.setUint32(24,n.faceCount,!0),w.setUint32(28,n.levels.length,!0),w.setUint32(32,n.supercompressionScheme,!0),w.setUint32(36,_,!0),w.setUint32(40,f.byteLength,!0),w.setUint32(44,p,!0),w.setUint32(48,l.byteLength,!0),w.setBigUint64(52,BigInt(y),!0),w.setBigUint64(60,BigInt(a.byteLength),!0),new Uint8Array(g([new Uint8Array(e).buffer,B,b.buffer,f,l,new ArrayBuffer(y-(p+l.byteLength)),a,...D]))}export{U as KTX2Container,p as read,y as write};\n//# sourceMappingURL=ktx-parse.modern.js.map\n","import {CompressedTextureExtractOptions, TextureLevel} from '../../types';\n\n/**\n * Extract mipmap images from compressed texture buffer\n * @param data - binary data of compressed texture or Array of level objects\n * @param options.mipMapLevels - number of mipmap level inside image\n * @param options.width - width of 0 - level\n * @param options.height - height of 0 - level\n * @param options.sizeFunction - format-related function to calculate level size in bytes\n * @param options.internalFormat - WebGL compatible format code\n * @returns Array of the texture levels\n */\nexport function extractMipmapImages(\n  data: Uint8Array | Array<Object>,\n  options: CompressedTextureExtractOptions\n): TextureLevel[] {\n  const images = new Array(options.mipMapLevels);\n\n  let levelWidth = options.width;\n  let levelHeight = options.height;\n  let offset = 0;\n\n  for (let i = 0; i < options.mipMapLevels; ++i) {\n    const levelSize = getLevelSize(options, levelWidth, levelHeight, data, i);\n    const levelData = getLevelData(data, i, offset, levelSize);\n\n    images[i] = {\n      compressed: true,\n      format: options.internalFormat,\n      data: levelData,\n      width: levelWidth,\n      height: levelHeight,\n      levelSize\n    };\n\n    levelWidth = Math.max(1, levelWidth >> 1);\n    levelHeight = Math.max(1, levelHeight >> 1);\n\n    offset += levelSize;\n  }\n  return images;\n}\n\nfunction getLevelData(data, index, offset, levelSize) {\n  if (!Array.isArray(data)) {\n    return new Uint8Array(data.buffer, data.byteOffset + offset, levelSize);\n  }\n\n  return data[index].levelData;\n}\n\nfunction getLevelSize(options, levelWidth, levelHeight, data, index) {\n  if (!Array.isArray(data)) {\n    return options.sizeFunction(levelWidth, levelHeight);\n  }\n  return options.sizeFunction(data[index]);\n}\n","/* eslint-disable camelcase */\nexport const GL = {\n  // WEBGL_compressed_texture_s3tc\n\n  COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83f0,\n  COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83f1,\n  COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83f2,\n  COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83f3,\n\n  // WEBGL_compressed_texture_es3\n\n  COMPRESSED_R11_EAC: 0x9270,\n  COMPRESSED_SIGNED_R11_EAC: 0x9271,\n  COMPRESSED_RG11_EAC: 0x9272,\n  COMPRESSED_SIGNED_RG11_EAC: 0x9273,\n  COMPRESSED_RGB8_ETC2: 0x9274,\n  COMPRESSED_RGBA8_ETC2_EAC: 0x9275,\n  COMPRESSED_SRGB8_ETC2: 0x9276,\n  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 0x9277,\n  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9278,\n  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9279,\n\n  // WEBGL_compressed_texture_pvrtc\n\n  COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 0x8c00,\n  COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 0x8c02,\n  COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 0x8c01,\n  COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 0x8c03,\n\n  // WEBGL_compressed_texture_etc1\n\n  COMPRESSED_RGB_ETC1_WEBGL: 0x8d64,\n\n  // WEBGL_compressed_texture_atc\n\n  COMPRESSED_RGB_ATC_WEBGL: 0x8c92,\n  COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL: 0x8c93,\n  COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL: 0x87ee,\n\n  // WEBGL_compressed_texture_astc\n\n  COMPRESSED_RGBA_ASTC_4X4_KHR: 0x93b0,\n  COMPRESSED_RGBA_ASTC_5X4_KHR: 0x93b1,\n  COMPRESSED_RGBA_ASTC_5X5_KHR: 0x93b2,\n  COMPRESSED_RGBA_ASTC_6X5_KHR: 0x93b3,\n  COMPRESSED_RGBA_ASTC_6X6_KHR: 0x93b4,\n  COMPRESSED_RGBA_ASTC_8X5_KHR: 0x93b5,\n  COMPRESSED_RGBA_ASTC_8X6_KHR: 0x93b6,\n  COMPRESSED_RGBA_ASTC_8X8_KHR: 0x93b7,\n  COMPRESSED_RGBA_ASTC_10X5_KHR: 0x93b8,\n  COMPRESSED_RGBA_ASTC_10X6_KHR: 0x93b9,\n  COMPRESSED_RGBA_ASTC_10X8_KHR: 0x93ba,\n  COMPRESSED_RGBA_ASTC_10X10_KHR: 0x93bb,\n  COMPRESSED_RGBA_ASTC_12X10_KHR: 0x93bc,\n  COMPRESSED_RGBA_ASTC_12X12_KHR: 0x93bd,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR: 0x93d0,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR: 0x93d1,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR: 0x93d2,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR: 0x93d3,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR: 0x93d4,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR: 0x93d5,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR: 0x93d6,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR: 0x93d7,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR: 0x93d8,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR: 0x93d9,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR: 0x93da,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR: 0x93db,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR: 0x93dc,\n  COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR: 0x93dd,\n\n  // EXT_texture_compression_rgtc\n\n  COMPRESSED_RED_RGTC1_EXT: 0x8dbb,\n  COMPRESSED_SIGNED_RED_RGTC1_EXT: 0x8dbc,\n  COMPRESSED_RED_GREEN_RGTC2_EXT: 0x8dbd,\n  COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT: 0x8dbe,\n\n  // WEBGL_compressed_texture_s3tc_srgb\n\n  COMPRESSED_SRGB_S3TC_DXT1_EXT: 0x8c4c,\n  COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT: 0x8c4d,\n  COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT: 0x8c4e,\n  COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT: 0x8c4f\n};\n","import {GL} from '../gl-constants';\n\nconst VULKAN_TO_WEBGL_FORMAT_MAP = {\n  131: GL.COMPRESSED_RGB_S3TC_DXT1_EXT,\n  132: GL.COMPRESSED_SRGB_S3TC_DXT1_EXT,\n  133: GL.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n  134: GL.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,\n  135: GL.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n  136: GL.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,\n  137: GL.COMPRESSED_RGBA_S3TC_DXT5_EXT,\n  138: GL.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,\n  139: GL.COMPRESSED_RED_RGTC1_EXT,\n  140: GL.COMPRESSED_SIGNED_RED_RGTC1_EXT,\n  141: GL.COMPRESSED_RED_GREEN_RGTC2_EXT,\n  142: GL.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,\n  147: GL.COMPRESSED_RGB8_ETC2,\n  148: GL.COMPRESSED_SRGB8_ETC2,\n  149: GL.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n  150: GL.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n  151: GL.COMPRESSED_RGBA8_ETC2_EAC,\n  152: GL.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,\n  153: GL.COMPRESSED_R11_EAC,\n  154: GL.COMPRESSED_SIGNED_R11_EAC,\n  155: GL.COMPRESSED_RG11_EAC,\n  156: GL.COMPRESSED_SIGNED_RG11_EAC,\n  // @ts-ignore\n  157: GL.COMPRESSED_RGBA_ASTC_4x4_KHR,\n  // @ts-ignore\n  158: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,\n  // @ts-ignore\n  159: GL.COMPRESSED_RGBA_ASTC_5x4_KHR,\n  // @ts-ignore\n  160: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,\n  // @ts-ignore\n  161: GL.COMPRESSED_RGBA_ASTC_5x5_KHR,\n  // @ts-ignore\n  162: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,\n  // @ts-ignore\n  163: GL.COMPRESSED_RGBA_ASTC_6x5_KHR,\n  // @ts-ignore\n  164: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,\n  // @ts-ignore\n  165: GL.COMPRESSED_RGBA_ASTC_6x6_KHR,\n  // @ts-ignore\n  166: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,\n  // @ts-ignore\n  167: GL.COMPRESSED_RGBA_ASTC_8x5_KHR,\n  // @ts-ignore\n  168: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,\n  // @ts-ignore\n  169: GL.COMPRESSED_RGBA_ASTC_8x6_KHR,\n  // @ts-ignore\n  170: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,\n  // @ts-ignore\n  171: GL.COMPRESSED_RGBA_ASTC_8x8_KHR,\n  // @ts-ignore\n  172: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,\n  // @ts-ignore\n  173: GL.COMPRESSED_RGBA_ASTC_10x5_KHR,\n  // @ts-ignore\n  174: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,\n  // @ts-ignore\n  175: GL.COMPRESSED_RGBA_ASTC_10x6_KHR,\n  // @ts-ignore\n  176: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,\n  // @ts-ignore\n  177: GL.COMPRESSED_RGBA_ASTC_10x8_KHR,\n  // @ts-ignore\n  178: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,\n  // @ts-ignore\n  179: GL.COMPRESSED_RGBA_ASTC_10x10_KHR,\n  // @ts-ignore\n  180: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,\n  // @ts-ignore\n  181: GL.COMPRESSED_RGBA_ASTC_12x10_KHR,\n  // @ts-ignore\n  182: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,\n  // @ts-ignore\n  183: GL.COMPRESSED_RGBA_ASTC_12x12_KHR,\n  // @ts-ignore\n  184: GL.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,\n  1000054000: GL.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,\n  1000054001: GL.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,\n  // @ts-ignore\n  1000066000: GL.COMPRESSED_RGBA_ASTC_4x4_KHR,\n  // @ts-ignore\n  1000066001: GL.COMPRESSED_RGBA_ASTC_5x4_KHR,\n  // @ts-ignore\n  1000066002: GL.COMPRESSED_RGBA_ASTC_5x5_KHR,\n  // @ts-ignore\n  1000066003: GL.COMPRESSED_RGBA_ASTC_6x5_KHR,\n  // @ts-ignore\n  1000066004: GL.COMPRESSED_RGBA_ASTC_6x6_KHR,\n  // @ts-ignore\n  1000066005: GL.COMPRESSED_RGBA_ASTC_8x5_KHR,\n  // @ts-ignore\n  1000066006: GL.COMPRESSED_RGBA_ASTC_8x6_KHR,\n  // @ts-ignore\n  1000066007: GL.COMPRESSED_RGBA_ASTC_8x8_KHR,\n  // @ts-ignore\n  1000066008: GL.COMPRESSED_RGBA_ASTC_10x5_KHR,\n  // @ts-ignore\n  1000066009: GL.COMPRESSED_RGBA_ASTC_10x6_KHR,\n  // @ts-ignore\n  1000066010: GL.COMPRESSED_RGBA_ASTC_10x8_KHR,\n  // @ts-ignore\n  1000066011: GL.COMPRESSED_RGBA_ASTC_10x10_KHR,\n  // @ts-ignore\n  1000066012: GL.COMPRESSED_RGBA_ASTC_12x10_KHR,\n  // @ts-ignore\n  1000066013: GL.COMPRESSED_RGBA_ASTC_12x12_KHR\n};\n\n/**\n * Returns WebGl format based on Vulkan format\n * Vulkan to WebGl format mapping provided here http://github.khronos.org/KTX-Specification/#formatMapping\n * Vulkan name to format number mapping provided here: https://www.khronos.org/registry/vulkan/specs/1.2-extensions/man/html/VkFormat.html\n * @param {Number} vkFormat\n * @returns {Number}\n */\nexport function mapVkFormatToWebGL(vkFormat) {\n  return VULKAN_TO_WEBGL_FORMAT_MAP[vkFormat];\n}\n","import {read} from 'ktx-parse';\nimport {extractMipmapImages} from '../utils/extract-mipmap-images';\nimport {mapVkFormatToWebGL} from '../utils/ktx-format-helper';\n\nconst KTX2_ID = [\n  // '´', 'K', 'T', 'X', '2', '0', 'ª', '\\r', '\\n', '\\x1A', '\\n'\n  0xab, 0x4b, 0x54, 0x58, 0x20, 0x32, 0x30, 0xbb, 0x0d, 0x0a, 0x1a, 0x0a\n];\n\n// eslint-disable-next-line complexity\nexport function isKTX(data) {\n  const id = new Uint8Array(data.buffer || data, data.byteOffset || 0, KTX2_ID.length);\n  const notKTX =\n    id[0] !== KTX2_ID[0] || // '´'\n    id[1] !== KTX2_ID[1] || // 'K'\n    id[2] !== KTX2_ID[2] || // 'T'\n    id[3] !== KTX2_ID[3] || // 'X'\n    id[4] !== KTX2_ID[4] || // ' '\n    id[5] !== KTX2_ID[5] || // '2'\n    id[6] !== KTX2_ID[6] || // '0'\n    id[7] !== KTX2_ID[7] || // 'ª'\n    id[8] !== KTX2_ID[8] || // '\\r'\n    id[9] !== KTX2_ID[9] || // '\\n'\n    id[10] !== KTX2_ID[10] || // '\\x1A'\n    id[11] !== KTX2_ID[11]; // '\\n'\n\n  return !notKTX;\n}\n\nexport function parseKTX(arrayBuffer) {\n  const uint8Array = new Uint8Array(arrayBuffer);\n  const ktx = read(uint8Array);\n  const mipMapLevels = Math.max(1, ktx.levels.length);\n  const width = ktx.pixelWidth;\n  const height = ktx.pixelHeight;\n  const internalFormat = mapVkFormatToWebGL(ktx.vkFormat);\n\n  return extractMipmapImages(ktx.levels, {\n    mipMapLevels,\n    width,\n    height,\n    sizeFunction: (level) => level.uncompressedByteLength,\n    internalFormat\n  });\n}\n","import type {TextureLevel} from '../../types';\nimport {assert} from '@loaders.gl/loader-utils';\nimport {GL} from '../gl-constants';\nimport {extractMipmapImages} from '../utils/extract-mipmap-images';\n\nconst getATCLevelSize = getDxt1LevelSize;\nconst getATCALevelSize = getDxtXLevelSize;\nconst getATCILevelSize = getDxtXLevelSize;\nconst DDS_CONSTANTS = {\n  MAGIC_NUMBER: 0x20534444,\n  HEADER_LENGTH: 31,\n  MAGIC_NUMBER_INDEX: 0,\n  HEADER_SIZE_INDEX: 1,\n  HEADER_FLAGS_INDEX: 2,\n  HEADER_HEIGHT_INDEX: 3,\n  HEADER_WIDTH_INDEX: 4,\n  MIPMAPCOUNT_INDEX: 7,\n  HEADER_PF_FLAGS_INDEX: 20,\n  HEADER_PF_FOURCC_INDEX: 21,\n  DDSD_MIPMAPCOUNT: 0x20000,\n  DDPF_FOURCC: 0x4,\n  PIXEL_FORMATS: {\n    DXT1: GL.COMPRESSED_RGB_S3TC_DXT1_EXT,\n    DXT3: GL.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n    DXT5: GL.COMPRESSED_RGBA_S3TC_DXT5_EXT,\n    'ATC ': GL.COMPRESSED_RGB_ATC_WEBGL,\n    ATCA: GL.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,\n    ATCI: GL.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL\n  },\n  SIZE_FUNCTIONS: {\n    DXT1: getDxt1LevelSize,\n    DXT3: getDxtXLevelSize,\n    DXT5: getDxtXLevelSize,\n    'ATC ': getATCLevelSize,\n    ATCA: getATCALevelSize,\n    ATCI: getATCILevelSize\n  }\n};\n\n/**\n * Check if data is in \"DDS\" format by its magic number\n * @param data - binary data of compressed texture\n * @returns true - data in \"DDS\" format, else - false\n */\nexport function isDDS(data: ArrayBuffer): boolean {\n  const header = new Uint32Array(data, 0, DDS_CONSTANTS.HEADER_LENGTH);\n  const magic = header[DDS_CONSTANTS.MAGIC_NUMBER_INDEX];\n  return magic === DDS_CONSTANTS.MAGIC_NUMBER;\n}\n\n/**\n * Parse texture data as \"DDS\" format\n * @param data - binary data of compressed texture\n * @returns Array of the texture levels\n */\nexport function parseDDS(data: ArrayBuffer): TextureLevel[] {\n  const header = new Int32Array(data, 0, DDS_CONSTANTS.HEADER_LENGTH);\n  const pixelFormatNumber = header[DDS_CONSTANTS.HEADER_PF_FOURCC_INDEX];\n  assert(\n    Boolean(header[DDS_CONSTANTS.HEADER_PF_FLAGS_INDEX] & DDS_CONSTANTS.DDPF_FOURCC),\n    'DDS: Unsupported format, must contain a FourCC code'\n  );\n  const fourCC = int32ToFourCC(pixelFormatNumber);\n  const internalFormat = DDS_CONSTANTS.PIXEL_FORMATS[fourCC];\n  const sizeFunction = DDS_CONSTANTS.SIZE_FUNCTIONS[fourCC];\n  assert(internalFormat && sizeFunction, `DDS: Unknown pixel format ${pixelFormatNumber}`);\n\n  let mipMapLevels = 1;\n  if (header[DDS_CONSTANTS.HEADER_FLAGS_INDEX] & DDS_CONSTANTS.DDSD_MIPMAPCOUNT) {\n    mipMapLevels = Math.max(1, header[DDS_CONSTANTS.MIPMAPCOUNT_INDEX]);\n  }\n  const width = header[DDS_CONSTANTS.HEADER_WIDTH_INDEX];\n  const height = header[DDS_CONSTANTS.HEADER_HEIGHT_INDEX];\n  const dataOffset = header[DDS_CONSTANTS.HEADER_SIZE_INDEX] + 4;\n  const image = new Uint8Array(data, dataOffset);\n\n  return extractMipmapImages(image, {\n    mipMapLevels,\n    width,\n    height,\n    sizeFunction,\n    internalFormat\n  });\n}\n\n/**\n * DXT1 applicable function to calculate level size\n * @param width - level width\n * @param height - level height\n * @returns level size in bytes\n */\nexport function getDxt1LevelSize(width: number, height: number): number {\n  return ((width + 3) >> 2) * ((height + 3) >> 2) * 8;\n}\n\n/**\n * DXT3 & DXT5 applicable function to calculate level size\n * @param width - level width\n * @param height - level height\n * @returns level size in bytes\n */\nexport function getDxtXLevelSize(width: number, height: number): number {\n  return ((width + 3) >> 2) * ((height + 3) >> 2) * 16;\n}\n\n/**\n * Convert every byte of Int32 value to char\n * @param {number} value - Int32 number\n * @returns {string} string of 4 characters\n */\nfunction int32ToFourCC(value) {\n  return String.fromCharCode(\n    value & 0xff,\n    (value >> 8) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 24) & 0xff\n  );\n}\n","import {TextureLevel} from '../../types';\n/* eslint-disable camelcase */\n// Forked from PicoGL: https://github.com/tsherif/picogl.js/blob/master/examples/utils/utils.js\n// Copyright (c) 2017 Tarek Sherif, The MIT License (MIT)\nimport {GL} from '../gl-constants';\nimport {extractMipmapImages} from '../utils/extract-mipmap-images';\n\nconst PVR_CONSTANTS = {\n  MAGIC_NUMBER: 0x03525650,\n  MAGIC_NUMBER_EXTRA: 0x50565203,\n  HEADER_LENGTH: 13,\n  HEADER_SIZE: 52,\n  MAGIC_NUMBER_INDEX: 0,\n  PIXEL_FORMAT_INDEX: 2,\n  COLOUR_SPACE_INDEX: 4,\n  HEIGHT_INDEX: 6,\n  WIDTH_INDEX: 7,\n  MIPMAPCOUNT_INDEX: 11,\n  METADATA_SIZE_INDEX: 12\n};\n\nconst PVR_PIXEL_FORMATS = {\n  0: [GL.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],\n  1: [GL.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],\n  2: [GL.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],\n  3: [GL.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],\n  6: [GL.COMPRESSED_RGB_ETC1_WEBGL],\n  7: [GL.COMPRESSED_RGB_S3TC_DXT1_EXT],\n  9: [GL.COMPRESSED_RGBA_S3TC_DXT3_EXT],\n  11: [GL.COMPRESSED_RGBA_S3TC_DXT5_EXT],\n  22: [GL.COMPRESSED_RGB8_ETC2],\n  23: [GL.COMPRESSED_RGBA8_ETC2_EAC],\n  24: [GL.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],\n  25: [GL.COMPRESSED_R11_EAC],\n  26: [GL.COMPRESSED_RG11_EAC],\n  27: [GL.COMPRESSED_RGBA_ASTC_4X4_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],\n  28: [GL.COMPRESSED_RGBA_ASTC_5X4_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],\n  29: [GL.COMPRESSED_RGBA_ASTC_5X5_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],\n  30: [GL.COMPRESSED_RGBA_ASTC_6X5_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],\n  31: [GL.COMPRESSED_RGBA_ASTC_6X6_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],\n  32: [GL.COMPRESSED_RGBA_ASTC_8X5_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],\n  33: [GL.COMPRESSED_RGBA_ASTC_8X6_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],\n  34: [GL.COMPRESSED_RGBA_ASTC_8X8_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],\n  35: [GL.COMPRESSED_RGBA_ASTC_10X5_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],\n  36: [GL.COMPRESSED_RGBA_ASTC_10X6_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],\n  37: [GL.COMPRESSED_RGBA_ASTC_10X8_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],\n  38: [GL.COMPRESSED_RGBA_ASTC_10X10_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],\n  39: [GL.COMPRESSED_RGBA_ASTC_12X10_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],\n  40: [GL.COMPRESSED_RGBA_ASTC_12X12_KHR, GL.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]\n};\n\nconst PVR_SIZE_FUNCTIONS = {\n  0: pvrtc2bppSize,\n  1: pvrtc2bppSize,\n  2: pvrtc4bppSize,\n  3: pvrtc4bppSize,\n  6: dxtEtcSmallSize,\n  7: dxtEtcSmallSize,\n  9: dxtEtcAstcBigSize,\n  11: dxtEtcAstcBigSize,\n  22: dxtEtcSmallSize,\n  23: dxtEtcAstcBigSize,\n  24: dxtEtcSmallSize,\n  25: dxtEtcSmallSize,\n  26: dxtEtcAstcBigSize,\n  27: dxtEtcAstcBigSize,\n  28: atc5x4Size,\n  29: atc5x5Size,\n  30: atc6x5Size,\n  31: atc6x6Size,\n  32: atc8x5Size,\n  33: atc8x6Size,\n  34: atc8x8Size,\n  35: atc10x5Size,\n  36: atc10x6Size,\n  37: atc10x8Size,\n  38: atc10x10Size,\n  39: atc12x10Size,\n  40: atc12x12Size\n};\n\n/**\n * Check if data is in \"PVR\" format by its magic number\n * @param data - binary data of compressed texture\n * @returns true - data in \"PVR\" format, else - false\n */\nexport function isPVR(data: ArrayBuffer): boolean {\n  const header = new Uint32Array(data, 0, PVR_CONSTANTS.HEADER_LENGTH);\n  const version = header[PVR_CONSTANTS.MAGIC_NUMBER_INDEX];\n\n  return version === PVR_CONSTANTS.MAGIC_NUMBER || version === PVR_CONSTANTS.MAGIC_NUMBER_EXTRA;\n}\n\n/**\n * Parse texture data as \"PVR\" format\n * @param data - binary data of compressed texture\n * @returns Array of the texture levels\n * @see http://cdn.imgtec.com/sdk-documentation/PVR+File+Format.Specification.pdf\n */\nexport function parsePVR(data: ArrayBuffer): TextureLevel[] {\n  const header = new Uint32Array(data, 0, PVR_CONSTANTS.HEADER_LENGTH);\n\n  const pvrFormat = header[PVR_CONSTANTS.PIXEL_FORMAT_INDEX];\n  const colourSpace = header[PVR_CONSTANTS.COLOUR_SPACE_INDEX];\n  const pixelFormats = PVR_PIXEL_FORMATS[pvrFormat] || [];\n  const internalFormat = pixelFormats.length > 1 && colourSpace ? pixelFormats[1] : pixelFormats[0];\n\n  const sizeFunction = PVR_SIZE_FUNCTIONS[pvrFormat];\n\n  const mipMapLevels = header[PVR_CONSTANTS.MIPMAPCOUNT_INDEX];\n\n  const width = header[PVR_CONSTANTS.WIDTH_INDEX];\n  const height = header[PVR_CONSTANTS.HEIGHT_INDEX];\n\n  const dataOffset = PVR_CONSTANTS.HEADER_SIZE + header[PVR_CONSTANTS.METADATA_SIZE_INDEX];\n\n  const image = new Uint8Array(data, dataOffset);\n\n  return extractMipmapImages(image, {\n    mipMapLevels,\n    width,\n    height,\n    sizeFunction,\n    internalFormat\n  });\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_pvrtc/\nfunction pvrtc2bppSize(width, height) {\n  width = Math.max(width, 16);\n  height = Math.max(height, 8);\n\n  return (width * height) / 4;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_pvrtc/\nfunction pvrtc4bppSize(width, height) {\n  width = Math.max(width, 8);\n  height = Math.max(height, 8);\n\n  return (width * height) / 2;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_s3tc/\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/\n// Size for:\n// COMPRESSED_RGB_S3TC_DXT1_EXT\n// COMPRESSED_R11_EAC\n// COMPRESSED_SIGNED_R11_EAC\n// COMPRESSED_RGB8_ETC2\n// COMPRESSED_SRGB8_ETC2\n// COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2\n// COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2\nfunction dxtEtcSmallSize(width, height) {\n  return Math.floor((width + 3) / 4) * Math.floor((height + 3) / 4) * 8;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_s3tc/\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_etc/\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\n// Size for:\n// COMPRESSED_RGBA_S3TC_DXT3_EXT\n// COMPRESSED_RGBA_S3TC_DXT5_EXT\n// COMPRESSED_RG11_EAC\n// COMPRESSED_SIGNED_RG11_EAC\n// COMPRESSED_RGBA8_ETC2_EAC\n// COMPRESSED_SRGB8_ALPHA8_ETC2_EAC\n// COMPRESSED_RGBA_ASTC_4x4_KHR\nfunction dxtEtcAstcBigSize(width, height) {\n  return Math.floor((width + 3) / 4) * Math.floor((height + 3) / 4) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc5x4Size(width, height) {\n  return Math.floor((width + 4) / 5) * Math.floor((height + 3) / 4) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc5x5Size(width, height) {\n  return Math.floor((width + 4) / 5) * Math.floor((height + 4) / 5) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc6x5Size(width, height) {\n  return Math.floor((width + 5) / 6) * Math.floor((height + 4) / 5) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc6x6Size(width, height) {\n  return Math.floor((width + 5) / 6) * Math.floor((height + 5) / 6) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc8x5Size(width, height) {\n  return Math.floor((width + 7) / 8) * Math.floor((height + 4) / 5) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc8x6Size(width, height) {\n  return Math.floor((width + 7) / 8) * Math.floor((height + 5) / 6) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc8x8Size(width, height) {\n  return Math.floor((width + 7) / 8) * Math.floor((height + 7) / 8) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc10x5Size(width, height) {\n  return Math.floor((width + 9) / 10) * Math.floor((height + 4) / 5) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc10x6Size(width, height) {\n  return Math.floor((width + 9) / 10) * Math.floor((height + 5) / 6) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc10x8Size(width, height) {\n  return Math.floor((width + 9) / 10) * Math.floor((height + 7) / 8) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc10x10Size(width, height) {\n  return Math.floor((width + 9) / 10) * Math.floor((height + 9) / 10) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc12x10Size(width, height) {\n  return Math.floor((width + 11) / 12) * Math.floor((height + 9) / 10) * 16;\n}\n\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\nfunction atc12x12Size(width, height) {\n  return Math.floor((width + 11) / 12) * Math.floor((height + 11) / 12) * 16;\n}\n","import type {TextureLevel} from '../../types';\nimport {isKTX, parseKTX} from './parse-ktx';\nimport {isDDS, parseDDS} from './parse-dds';\nimport {isPVR, parsePVR} from './parse-pvr';\n\n/**\n * Deduces format and parses compressed texture loaded in ArrayBuffer\n * @param data - binary data of compressed texture\n * @returns Array of the texture levels\n */\nexport function parseCompressedTexture(data: ArrayBuffer): TextureLevel[] {\n  if (isKTX(data)) {\n    // TODO: remove @ts-ignore when `parseKTX` output is normalized to loaders.gl texture format\n    // @ts-ignore\n    return parseKTX(data);\n  }\n  if (isDDS(data)) {\n    return parseDDS(data);\n  }\n  if (isPVR(data)) {\n    return parsePVR(data);\n  }\n  throw new Error('Texture container format not recognized');\n}\n","import type {Loader, LoaderWithParser} from '@loaders.gl/loader-utils';\nimport {VERSION} from './lib/utils/version';\nimport {parseCompressedTexture} from './lib/parsers/parse-compressed-texture';\n\n/**\n * Worker Loader for KTX, DDS, and PVR texture container formats\n */\nexport const CompressedTextureWorkerLoader = {\n  name: 'Texture Containers',\n  id: 'compressed-texture',\n  module: 'textures',\n  version: VERSION,\n  worker: true,\n  extensions: [\n    'ktx',\n    'ktx2',\n    'dds', // WEBGL_compressed_texture_s3tc, WEBGL_compressed_texture_atc\n    'pvr' // WEBGL_compressed_texture_pvrtc\n  ],\n  mimeTypes: [\n    'image/ktx2',\n    'image/ktx',\n    'image/vnd-ms.dds',\n    'image/x-dds',\n    'application/octet-stream'\n  ],\n  binary: true,\n  options: {\n    'compressed-texture': {\n      libraryPath: 'libs/'\n    }\n  }\n};\n\n/**\n * Loader for KTX, DDS, and PVR texture container formats\n */\nexport const CompressedTextureLoader = {\n  ...CompressedTextureWorkerLoader,\n  parse: async (arrayBuffer) => parseCompressedTexture(arrayBuffer)\n};\n\n// TYPE TESTS - TODO find a better way than exporting junk\nexport const _TypecheckCompressedTextureWorkerLoader: Loader = CompressedTextureWorkerLoader;\nexport const _TypecheckCompressedTextureLoader: LoaderWithParser = CompressedTextureLoader;\n","// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n// TODO: use 'latest' instead of 'beta' when 3.0.0 version is released as 'latest'\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'beta';\n","import {Tile} from '../../types';\n\n/**\n * Generates url with token if it is exists.\n * @param {String} url\n * @param {any} token\n * @returns {string}\n */\nexport function getUrlWithToken(url, token = null) {\n  return token ? `${url}?token=${token}` : url;\n}\n\n/**\n * Generates attribute urls for tile.\n * @param tile\n * @returns list of attribute urls\n */\nexport function generateTileAttributeUrls(tile: Tile): string[] {\n  const {url, attributeData} = tile;\n  const attributeUrls: string[] = [];\n\n  for (let index = 0; index < attributeData.length; index++) {\n    const attributeUrl = attributeData[index].href.replace('./', '');\n    attributeUrls.push(`${url}/${attributeUrl}`);\n  }\n\n  return attributeUrls;\n}\n\n/**\n * Generates attribute urls for tileset based on tileset and resource\n * @param {Object} tileset\n * @param {number} resource\n * @returns {Array}\n */\nexport function generateTilesetAttributeUrls(tileset, resource) {\n  const attributeUrls: string[] = [];\n  const {attributeStorageInfo, url} = tileset;\n\n  for (let index = 0; index < attributeStorageInfo.length; index++) {\n    const fileName = attributeStorageInfo[index].key;\n    attributeUrls.push(`${url}/nodes/${resource}/attributes/${fileName}/0`);\n  }\n\n  return attributeUrls;\n}\n","export default {\n  DEPTH_BUFFER_BIT: 0x00000100,\n  STENCIL_BUFFER_BIT: 0x00000400,\n  COLOR_BUFFER_BIT: 0x00004000,\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006,\n  ZERO: 0,\n  ONE: 1,\n  SRC_COLOR: 0x0300,\n  ONE_MINUS_SRC_COLOR: 0x0301,\n  SRC_ALPHA: 0x0302,\n  ONE_MINUS_SRC_ALPHA: 0x0303,\n  DST_ALPHA: 0x0304,\n  ONE_MINUS_DST_ALPHA: 0x0305,\n  DST_COLOR: 0x0306,\n  ONE_MINUS_DST_COLOR: 0x0307,\n  SRC_ALPHA_SATURATE: 0x0308,\n  CONSTANT_COLOR: 0x8001,\n  ONE_MINUS_CONSTANT_COLOR: 0x8002,\n  CONSTANT_ALPHA: 0x8003,\n  ONE_MINUS_CONSTANT_ALPHA: 0x8004,\n  FUNC_ADD: 0x8006,\n  FUNC_SUBTRACT: 0x800a,\n  FUNC_REVERSE_SUBTRACT: 0x800b,\n  BLEND_EQUATION: 0x8009,\n  BLEND_EQUATION_RGB: 0x8009,\n  BLEND_EQUATION_ALPHA: 0x883d,\n  BLEND_DST_RGB: 0x80c8,\n  BLEND_SRC_RGB: 0x80c9,\n  BLEND_DST_ALPHA: 0x80ca,\n  BLEND_SRC_ALPHA: 0x80cb,\n  BLEND_COLOR: 0x8005,\n  ARRAY_BUFFER_BINDING: 0x8894,\n  ELEMENT_ARRAY_BUFFER_BINDING: 0x8895,\n  LINE_WIDTH: 0x0b21,\n  ALIASED_POINT_SIZE_RANGE: 0x846d,\n  ALIASED_LINE_WIDTH_RANGE: 0x846e,\n  CULL_FACE_MODE: 0x0b45,\n  FRONT_FACE: 0x0b46,\n  DEPTH_RANGE: 0x0b70,\n  DEPTH_WRITEMASK: 0x0b72,\n  DEPTH_CLEAR_VALUE: 0x0b73,\n  DEPTH_FUNC: 0x0b74,\n  STENCIL_CLEAR_VALUE: 0x0b91,\n  STENCIL_FUNC: 0x0b92,\n  STENCIL_FAIL: 0x0b94,\n  STENCIL_PASS_DEPTH_FAIL: 0x0b95,\n  STENCIL_PASS_DEPTH_PASS: 0x0b96,\n  STENCIL_REF: 0x0b97,\n  STENCIL_VALUE_MASK: 0x0b93,\n  STENCIL_WRITEMASK: 0x0b98,\n  STENCIL_BACK_FUNC: 0x8800,\n  STENCIL_BACK_FAIL: 0x8801,\n  STENCIL_BACK_PASS_DEPTH_FAIL: 0x8802,\n  STENCIL_BACK_PASS_DEPTH_PASS: 0x8803,\n  STENCIL_BACK_REF: 0x8ca3,\n  STENCIL_BACK_VALUE_MASK: 0x8ca4,\n  STENCIL_BACK_WRITEMASK: 0x8ca5,\n  VIEWPORT: 0x0ba2,\n  SCISSOR_BOX: 0x0c10,\n  COLOR_CLEAR_VALUE: 0x0c22,\n  COLOR_WRITEMASK: 0x0c23,\n  UNPACK_ALIGNMENT: 0x0cf5,\n  PACK_ALIGNMENT: 0x0d05,\n  MAX_TEXTURE_SIZE: 0x0d33,\n  MAX_VIEWPORT_DIMS: 0x0d3a,\n  SUBPIXEL_BITS: 0x0d50,\n  RED_BITS: 0x0d52,\n  GREEN_BITS: 0x0d53,\n  BLUE_BITS: 0x0d54,\n  ALPHA_BITS: 0x0d55,\n  DEPTH_BITS: 0x0d56,\n  STENCIL_BITS: 0x0d57,\n  POLYGON_OFFSET_UNITS: 0x2a00,\n  POLYGON_OFFSET_FACTOR: 0x8038,\n  TEXTURE_BINDING_2D: 0x8069,\n  SAMPLE_BUFFERS: 0x80a8,\n  SAMPLES: 0x80a9,\n  SAMPLE_COVERAGE_VALUE: 0x80aa,\n  SAMPLE_COVERAGE_INVERT: 0x80ab,\n  COMPRESSED_TEXTURE_FORMATS: 0x86a3,\n  VENDOR: 0x1f00,\n  RENDERER: 0x1f01,\n  VERSION: 0x1f02,\n  IMPLEMENTATION_COLOR_READ_TYPE: 0x8b9a,\n  IMPLEMENTATION_COLOR_READ_FORMAT: 0x8b9b,\n  BROWSER_DEFAULT_WEBGL: 0x9244,\n  STATIC_DRAW: 0x88e4,\n  STREAM_DRAW: 0x88e0,\n  DYNAMIC_DRAW: 0x88e8,\n  ARRAY_BUFFER: 0x8892,\n  ELEMENT_ARRAY_BUFFER: 0x8893,\n  BUFFER_SIZE: 0x8764,\n  BUFFER_USAGE: 0x8765,\n  CURRENT_VERTEX_ATTRIB: 0x8626,\n  VERTEX_ATTRIB_ARRAY_ENABLED: 0x8622,\n  VERTEX_ATTRIB_ARRAY_SIZE: 0x8623,\n  VERTEX_ATTRIB_ARRAY_STRIDE: 0x8624,\n  VERTEX_ATTRIB_ARRAY_TYPE: 0x8625,\n  VERTEX_ATTRIB_ARRAY_NORMALIZED: 0x886a,\n  VERTEX_ATTRIB_ARRAY_POINTER: 0x8645,\n  VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 0x889f,\n  CULL_FACE: 0x0b44,\n  FRONT: 0x0404,\n  BACK: 0x0405,\n  FRONT_AND_BACK: 0x0408,\n  BLEND: 0x0be2,\n  DEPTH_TEST: 0x0b71,\n  DITHER: 0x0bd0,\n  POLYGON_OFFSET_FILL: 0x8037,\n  SAMPLE_ALPHA_TO_COVERAGE: 0x809e,\n  SAMPLE_COVERAGE: 0x80a0,\n  SCISSOR_TEST: 0x0c11,\n  STENCIL_TEST: 0x0b90,\n  NO_ERROR: 0,\n  INVALID_ENUM: 0x0500,\n  INVALID_VALUE: 0x0501,\n  INVALID_OPERATION: 0x0502,\n  OUT_OF_MEMORY: 0x0505,\n  CONTEXT_LOST_WEBGL: 0x9242,\n  CW: 0x0900,\n  CCW: 0x0901,\n  DONT_CARE: 0x1100,\n  FASTEST: 0x1101,\n  NICEST: 0x1102,\n  GENERATE_MIPMAP_HINT: 0x8192,\n  BYTE: 0x1400,\n  UNSIGNED_BYTE: 0x1401,\n  SHORT: 0x1402,\n  UNSIGNED_SHORT: 0x1403,\n  INT: 0x1404,\n  UNSIGNED_INT: 0x1405,\n  FLOAT: 0x1406,\n  DOUBLE: 0x140a,\n  DEPTH_COMPONENT: 0x1902,\n  ALPHA: 0x1906,\n  RGB: 0x1907,\n  RGBA: 0x1908,\n  LUMINANCE: 0x1909,\n  LUMINANCE_ALPHA: 0x190a,\n  UNSIGNED_SHORT_4_4_4_4: 0x8033,\n  UNSIGNED_SHORT_5_5_5_1: 0x8034,\n  UNSIGNED_SHORT_5_6_5: 0x8363,\n  FRAGMENT_SHADER: 0x8b30,\n  VERTEX_SHADER: 0x8b31,\n  COMPILE_STATUS: 0x8b81,\n  DELETE_STATUS: 0x8b80,\n  LINK_STATUS: 0x8b82,\n  VALIDATE_STATUS: 0x8b83,\n  ATTACHED_SHADERS: 0x8b85,\n  ACTIVE_ATTRIBUTES: 0x8b89,\n  ACTIVE_UNIFORMS: 0x8b86,\n  MAX_VERTEX_ATTRIBS: 0x8869,\n  MAX_VERTEX_UNIFORM_VECTORS: 0x8dfb,\n  MAX_VARYING_VECTORS: 0x8dfc,\n  MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0x8b4d,\n  MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0x8b4c,\n  MAX_TEXTURE_IMAGE_UNITS: 0x8872,\n  MAX_FRAGMENT_UNIFORM_VECTORS: 0x8dfd,\n  SHADER_TYPE: 0x8b4f,\n  SHADING_LANGUAGE_VERSION: 0x8b8c,\n  CURRENT_PROGRAM: 0x8b8d,\n  NEVER: 0x0200,\n  ALWAYS: 0x0207,\n  LESS: 0x0201,\n  EQUAL: 0x0202,\n  LEQUAL: 0x0203,\n  GREATER: 0x0204,\n  GEQUAL: 0x0206,\n  NOTEQUAL: 0x0205,\n  KEEP: 0x1e00,\n  REPLACE: 0x1e01,\n  INCR: 0x1e02,\n  DECR: 0x1e03,\n  INVERT: 0x150a,\n  INCR_WRAP: 0x8507,\n  DECR_WRAP: 0x8508,\n  NEAREST: 0x2600,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_NEAREST: 0x2700,\n  LINEAR_MIPMAP_NEAREST: 0x2701,\n  NEAREST_MIPMAP_LINEAR: 0x2702,\n  LINEAR_MIPMAP_LINEAR: 0x2703,\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  TEXTURE_2D: 0x0de1,\n  TEXTURE: 0x1702,\n  TEXTURE_CUBE_MAP: 0x8513,\n  TEXTURE_BINDING_CUBE_MAP: 0x8514,\n  TEXTURE_CUBE_MAP_POSITIVE_X: 0x8515,\n  TEXTURE_CUBE_MAP_NEGATIVE_X: 0x8516,\n  TEXTURE_CUBE_MAP_POSITIVE_Y: 0x8517,\n  TEXTURE_CUBE_MAP_NEGATIVE_Y: 0x8518,\n  TEXTURE_CUBE_MAP_POSITIVE_Z: 0x8519,\n  TEXTURE_CUBE_MAP_NEGATIVE_Z: 0x851a,\n  MAX_CUBE_MAP_TEXTURE_SIZE: 0x851c,\n  TEXTURE0: 0x84c0,\n  ACTIVE_TEXTURE: 0x84e0,\n  REPEAT: 0x2901,\n  CLAMP_TO_EDGE: 0x812f,\n  MIRRORED_REPEAT: 0x8370,\n  TEXTURE_WIDTH: 0x1000,\n  TEXTURE_HEIGHT: 0x1001,\n  FLOAT_VEC2: 0x8b50,\n  FLOAT_VEC3: 0x8b51,\n  FLOAT_VEC4: 0x8b52,\n  INT_VEC2: 0x8b53,\n  INT_VEC3: 0x8b54,\n  INT_VEC4: 0x8b55,\n  BOOL: 0x8b56,\n  BOOL_VEC2: 0x8b57,\n  BOOL_VEC3: 0x8b58,\n  BOOL_VEC4: 0x8b59,\n  FLOAT_MAT2: 0x8b5a,\n  FLOAT_MAT3: 0x8b5b,\n  FLOAT_MAT4: 0x8b5c,\n  SAMPLER_2D: 0x8b5e,\n  SAMPLER_CUBE: 0x8b60,\n  LOW_FLOAT: 0x8df0,\n  MEDIUM_FLOAT: 0x8df1,\n  HIGH_FLOAT: 0x8df2,\n  LOW_INT: 0x8df3,\n  MEDIUM_INT: 0x8df4,\n  HIGH_INT: 0x8df5,\n  FRAMEBUFFER: 0x8d40,\n  RENDERBUFFER: 0x8d41,\n  RGBA4: 0x8056,\n  RGB5_A1: 0x8057,\n  RGB565: 0x8d62,\n  DEPTH_COMPONENT16: 0x81a5,\n  STENCIL_INDEX: 0x1901,\n  STENCIL_INDEX8: 0x8d48,\n  DEPTH_STENCIL: 0x84f9,\n  RENDERBUFFER_WIDTH: 0x8d42,\n  RENDERBUFFER_HEIGHT: 0x8d43,\n  RENDERBUFFER_INTERNAL_FORMAT: 0x8d44,\n  RENDERBUFFER_RED_SIZE: 0x8d50,\n  RENDERBUFFER_GREEN_SIZE: 0x8d51,\n  RENDERBUFFER_BLUE_SIZE: 0x8d52,\n  RENDERBUFFER_ALPHA_SIZE: 0x8d53,\n  RENDERBUFFER_DEPTH_SIZE: 0x8d54,\n  RENDERBUFFER_STENCIL_SIZE: 0x8d55,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 0x8cd0,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 0x8cd1,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 0x8cd2,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 0x8cd3,\n  COLOR_ATTACHMENT0: 0x8ce0,\n  DEPTH_ATTACHMENT: 0x8d00,\n  STENCIL_ATTACHMENT: 0x8d20,\n  DEPTH_STENCIL_ATTACHMENT: 0x821a,\n  NONE: 0,\n  FRAMEBUFFER_COMPLETE: 0x8cd5,\n  FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 0x8cd6,\n  FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 0x8cd7,\n  FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 0x8cd9,\n  FRAMEBUFFER_UNSUPPORTED: 0x8cdd,\n  FRAMEBUFFER_BINDING: 0x8ca6,\n  RENDERBUFFER_BINDING: 0x8ca7,\n  READ_FRAMEBUFFER: 0x8ca8,\n  DRAW_FRAMEBUFFER: 0x8ca9,\n  MAX_RENDERBUFFER_SIZE: 0x84e8,\n  INVALID_FRAMEBUFFER_OPERATION: 0x0506,\n  UNPACK_FLIP_Y_WEBGL: 0x9240,\n  UNPACK_PREMULTIPLY_ALPHA_WEBGL: 0x9241,\n  UNPACK_COLORSPACE_CONVERSION_WEBGL: 0x9243,\n  READ_BUFFER: 0x0c02,\n  UNPACK_ROW_LENGTH: 0x0cf2,\n  UNPACK_SKIP_ROWS: 0x0cf3,\n  UNPACK_SKIP_PIXELS: 0x0cf4,\n  PACK_ROW_LENGTH: 0x0d02,\n  PACK_SKIP_ROWS: 0x0d03,\n  PACK_SKIP_PIXELS: 0x0d04,\n  TEXTURE_BINDING_3D: 0x806a,\n  UNPACK_SKIP_IMAGES: 0x806d,\n  UNPACK_IMAGE_HEIGHT: 0x806e,\n  MAX_3D_TEXTURE_SIZE: 0x8073,\n  MAX_ELEMENTS_VERTICES: 0x80e8,\n  MAX_ELEMENTS_INDICES: 0x80e9,\n  MAX_TEXTURE_LOD_BIAS: 0x84fd,\n  MAX_FRAGMENT_UNIFORM_COMPONENTS: 0x8b49,\n  MAX_VERTEX_UNIFORM_COMPONENTS: 0x8b4a,\n  MAX_ARRAY_TEXTURE_LAYERS: 0x88ff,\n  MIN_PROGRAM_TEXEL_OFFSET: 0x8904,\n  MAX_PROGRAM_TEXEL_OFFSET: 0x8905,\n  MAX_VARYING_COMPONENTS: 0x8b4b,\n  FRAGMENT_SHADER_DERIVATIVE_HINT: 0x8b8b,\n  RASTERIZER_DISCARD: 0x8c89,\n  VERTEX_ARRAY_BINDING: 0x85b5,\n  MAX_VERTEX_OUTPUT_COMPONENTS: 0x9122,\n  MAX_FRAGMENT_INPUT_COMPONENTS: 0x9125,\n  MAX_SERVER_WAIT_TIMEOUT: 0x9111,\n  MAX_ELEMENT_INDEX: 0x8d6b,\n  RED: 0x1903,\n  RGB8: 0x8051,\n  RGBA8: 0x8058,\n  RGB10_A2: 0x8059,\n  TEXTURE_3D: 0x806f,\n  TEXTURE_WRAP_R: 0x8072,\n  TEXTURE_MIN_LOD: 0x813a,\n  TEXTURE_MAX_LOD: 0x813b,\n  TEXTURE_BASE_LEVEL: 0x813c,\n  TEXTURE_MAX_LEVEL: 0x813d,\n  TEXTURE_COMPARE_MODE: 0x884c,\n  TEXTURE_COMPARE_FUNC: 0x884d,\n  SRGB: 0x8c40,\n  SRGB8: 0x8c41,\n  SRGB8_ALPHA8: 0x8c43,\n  COMPARE_REF_TO_TEXTURE: 0x884e,\n  RGBA32F: 0x8814,\n  RGB32F: 0x8815,\n  RGBA16F: 0x881a,\n  RGB16F: 0x881b,\n  TEXTURE_2D_ARRAY: 0x8c1a,\n  TEXTURE_BINDING_2D_ARRAY: 0x8c1d,\n  R11F_G11F_B10F: 0x8c3a,\n  RGB9_E5: 0x8c3d,\n  RGBA32UI: 0x8d70,\n  RGB32UI: 0x8d71,\n  RGBA16UI: 0x8d76,\n  RGB16UI: 0x8d77,\n  RGBA8UI: 0x8d7c,\n  RGB8UI: 0x8d7d,\n  RGBA32I: 0x8d82,\n  RGB32I: 0x8d83,\n  RGBA16I: 0x8d88,\n  RGB16I: 0x8d89,\n  RGBA8I: 0x8d8e,\n  RGB8I: 0x8d8f,\n  RED_INTEGER: 0x8d94,\n  RGB_INTEGER: 0x8d98,\n  RGBA_INTEGER: 0x8d99,\n  R8: 0x8229,\n  RG8: 0x822b,\n  R16F: 0x822d,\n  R32F: 0x822e,\n  RG16F: 0x822f,\n  RG32F: 0x8230,\n  R8I: 0x8231,\n  R8UI: 0x8232,\n  R16I: 0x8233,\n  R16UI: 0x8234,\n  R32I: 0x8235,\n  R32UI: 0x8236,\n  RG8I: 0x8237,\n  RG8UI: 0x8238,\n  RG16I: 0x8239,\n  RG16UI: 0x823a,\n  RG32I: 0x823b,\n  RG32UI: 0x823c,\n  R8_SNORM: 0x8f94,\n  RG8_SNORM: 0x8f95,\n  RGB8_SNORM: 0x8f96,\n  RGBA8_SNORM: 0x8f97,\n  RGB10_A2UI: 0x906f,\n  TEXTURE_IMMUTABLE_FORMAT: 0x912f,\n  TEXTURE_IMMUTABLE_LEVELS: 0x82df,\n  UNSIGNED_INT_2_10_10_10_REV: 0x8368,\n  UNSIGNED_INT_10F_11F_11F_REV: 0x8c3b,\n  UNSIGNED_INT_5_9_9_9_REV: 0x8c3e,\n  FLOAT_32_UNSIGNED_INT_24_8_REV: 0x8dad,\n  UNSIGNED_INT_24_8: 0x84fa,\n  HALF_FLOAT: 0x140b,\n  RG: 0x8227,\n  RG_INTEGER: 0x8228,\n  INT_2_10_10_10_REV: 0x8d9f,\n  CURRENT_QUERY: 0x8865,\n  QUERY_RESULT: 0x8866,\n  QUERY_RESULT_AVAILABLE: 0x8867,\n  ANY_SAMPLES_PASSED: 0x8c2f,\n  ANY_SAMPLES_PASSED_CONSERVATIVE: 0x8d6a,\n  MAX_DRAW_BUFFERS: 0x8824,\n  DRAW_BUFFER0: 0x8825,\n  DRAW_BUFFER1: 0x8826,\n  DRAW_BUFFER2: 0x8827,\n  DRAW_BUFFER3: 0x8828,\n  DRAW_BUFFER4: 0x8829,\n  DRAW_BUFFER5: 0x882a,\n  DRAW_BUFFER6: 0x882b,\n  DRAW_BUFFER7: 0x882c,\n  DRAW_BUFFER8: 0x882d,\n  DRAW_BUFFER9: 0x882e,\n  DRAW_BUFFER10: 0x882f,\n  DRAW_BUFFER11: 0x8830,\n  DRAW_BUFFER12: 0x8831,\n  DRAW_BUFFER13: 0x8832,\n  DRAW_BUFFER14: 0x8833,\n  DRAW_BUFFER15: 0x8834,\n  MAX_COLOR_ATTACHMENTS: 0x8cdf,\n  COLOR_ATTACHMENT1: 0x8ce1,\n  COLOR_ATTACHMENT2: 0x8ce2,\n  COLOR_ATTACHMENT3: 0x8ce3,\n  COLOR_ATTACHMENT4: 0x8ce4,\n  COLOR_ATTACHMENT5: 0x8ce5,\n  COLOR_ATTACHMENT6: 0x8ce6,\n  COLOR_ATTACHMENT7: 0x8ce7,\n  COLOR_ATTACHMENT8: 0x8ce8,\n  COLOR_ATTACHMENT9: 0x8ce9,\n  COLOR_ATTACHMENT10: 0x8cea,\n  COLOR_ATTACHMENT11: 0x8ceb,\n  COLOR_ATTACHMENT12: 0x8cec,\n  COLOR_ATTACHMENT13: 0x8ced,\n  COLOR_ATTACHMENT14: 0x8cee,\n  COLOR_ATTACHMENT15: 0x8cef,\n  SAMPLER_3D: 0x8b5f,\n  SAMPLER_2D_SHADOW: 0x8b62,\n  SAMPLER_2D_ARRAY: 0x8dc1,\n  SAMPLER_2D_ARRAY_SHADOW: 0x8dc4,\n  SAMPLER_CUBE_SHADOW: 0x8dc5,\n  INT_SAMPLER_2D: 0x8dca,\n  INT_SAMPLER_3D: 0x8dcb,\n  INT_SAMPLER_CUBE: 0x8dcc,\n  INT_SAMPLER_2D_ARRAY: 0x8dcf,\n  UNSIGNED_INT_SAMPLER_2D: 0x8dd2,\n  UNSIGNED_INT_SAMPLER_3D: 0x8dd3,\n  UNSIGNED_INT_SAMPLER_CUBE: 0x8dd4,\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: 0x8dd7,\n  MAX_SAMPLES: 0x8d57,\n  SAMPLER_BINDING: 0x8919,\n  PIXEL_PACK_BUFFER: 0x88eb,\n  PIXEL_UNPACK_BUFFER: 0x88ec,\n  PIXEL_PACK_BUFFER_BINDING: 0x88ed,\n  PIXEL_UNPACK_BUFFER_BINDING: 0x88ef,\n  COPY_READ_BUFFER: 0x8f36,\n  COPY_WRITE_BUFFER: 0x8f37,\n  COPY_READ_BUFFER_BINDING: 0x8f36,\n  COPY_WRITE_BUFFER_BINDING: 0x8f37,\n  FLOAT_MAT2x3: 0x8b65,\n  FLOAT_MAT2x4: 0x8b66,\n  FLOAT_MAT3x2: 0x8b67,\n  FLOAT_MAT3x4: 0x8b68,\n  FLOAT_MAT4x2: 0x8b69,\n  FLOAT_MAT4x3: 0x8b6a,\n  UNSIGNED_INT_VEC2: 0x8dc6,\n  UNSIGNED_INT_VEC3: 0x8dc7,\n  UNSIGNED_INT_VEC4: 0x8dc8,\n  UNSIGNED_NORMALIZED: 0x8c17,\n  SIGNED_NORMALIZED: 0x8f9c,\n  VERTEX_ATTRIB_ARRAY_INTEGER: 0x88fd,\n  VERTEX_ATTRIB_ARRAY_DIVISOR: 0x88fe,\n  TRANSFORM_FEEDBACK_BUFFER_MODE: 0x8c7f,\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS: 0x8c80,\n  TRANSFORM_FEEDBACK_VARYINGS: 0x8c83,\n  TRANSFORM_FEEDBACK_BUFFER_START: 0x8c84,\n  TRANSFORM_FEEDBACK_BUFFER_SIZE: 0x8c85,\n  TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN: 0x8c88,\n  MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS: 0x8c8a,\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS: 0x8c8b,\n  INTERLEAVED_ATTRIBS: 0x8c8c,\n  SEPARATE_ATTRIBS: 0x8c8d,\n  TRANSFORM_FEEDBACK_BUFFER: 0x8c8e,\n  TRANSFORM_FEEDBACK_BUFFER_BINDING: 0x8c8f,\n  TRANSFORM_FEEDBACK: 0x8e22,\n  TRANSFORM_FEEDBACK_PAUSED: 0x8e23,\n  TRANSFORM_FEEDBACK_ACTIVE: 0x8e24,\n  TRANSFORM_FEEDBACK_BINDING: 0x8e25,\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: 0x8210,\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: 0x8211,\n  FRAMEBUFFER_ATTACHMENT_RED_SIZE: 0x8212,\n  FRAMEBUFFER_ATTACHMENT_GREEN_SIZE: 0x8213,\n  FRAMEBUFFER_ATTACHMENT_BLUE_SIZE: 0x8214,\n  FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE: 0x8215,\n  FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE: 0x8216,\n  FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE: 0x8217,\n  FRAMEBUFFER_DEFAULT: 0x8218,\n  DEPTH24_STENCIL8: 0x88f0,\n  DRAW_FRAMEBUFFER_BINDING: 0x8ca6,\n  READ_FRAMEBUFFER_BINDING: 0x8caa,\n  RENDERBUFFER_SAMPLES: 0x8cab,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER: 0x8cd4,\n  FRAMEBUFFER_INCOMPLETE_MULTISAMPLE: 0x8d56,\n  UNIFORM_BUFFER: 0x8a11,\n  UNIFORM_BUFFER_BINDING: 0x8a28,\n  UNIFORM_BUFFER_START: 0x8a29,\n  UNIFORM_BUFFER_SIZE: 0x8a2a,\n  MAX_VERTEX_UNIFORM_BLOCKS: 0x8a2b,\n  MAX_FRAGMENT_UNIFORM_BLOCKS: 0x8a2d,\n  MAX_COMBINED_UNIFORM_BLOCKS: 0x8a2e,\n  MAX_UNIFORM_BUFFER_BINDINGS: 0x8a2f,\n  MAX_UNIFORM_BLOCK_SIZE: 0x8a30,\n  MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS: 0x8a31,\n  MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS: 0x8a33,\n  UNIFORM_BUFFER_OFFSET_ALIGNMENT: 0x8a34,\n  ACTIVE_UNIFORM_BLOCKS: 0x8a36,\n  UNIFORM_TYPE: 0x8a37,\n  UNIFORM_SIZE: 0x8a38,\n  UNIFORM_BLOCK_INDEX: 0x8a3a,\n  UNIFORM_OFFSET: 0x8a3b,\n  UNIFORM_ARRAY_STRIDE: 0x8a3c,\n  UNIFORM_MATRIX_STRIDE: 0x8a3d,\n  UNIFORM_IS_ROW_MAJOR: 0x8a3e,\n  UNIFORM_BLOCK_BINDING: 0x8a3f,\n  UNIFORM_BLOCK_DATA_SIZE: 0x8a40,\n  UNIFORM_BLOCK_ACTIVE_UNIFORMS: 0x8a42,\n  UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES: 0x8a43,\n  UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER: 0x8a44,\n  UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER: 0x8a46,\n  OBJECT_TYPE: 0x9112,\n  SYNC_CONDITION: 0x9113,\n  SYNC_STATUS: 0x9114,\n  SYNC_FLAGS: 0x9115,\n  SYNC_FENCE: 0x9116,\n  SYNC_GPU_COMMANDS_COMPLETE: 0x9117,\n  UNSIGNALED: 0x9118,\n  SIGNALED: 0x9119,\n  ALREADY_SIGNALED: 0x911a,\n  TIMEOUT_EXPIRED: 0x911b,\n  CONDITION_SATISFIED: 0x911c,\n  WAIT_FAILED: 0x911d,\n  SYNC_FLUSH_COMMANDS_BIT: 0x00000001,\n  COLOR: 0x1800,\n  DEPTH: 0x1801,\n  STENCIL: 0x1802,\n  MIN: 0x8007,\n  MAX: 0x8008,\n  DEPTH_COMPONENT24: 0x81a6,\n  STREAM_READ: 0x88e1,\n  STREAM_COPY: 0x88e2,\n  STATIC_READ: 0x88e5,\n  STATIC_COPY: 0x88e6,\n  DYNAMIC_READ: 0x88e9,\n  DYNAMIC_COPY: 0x88ea,\n  DEPTH_COMPONENT32F: 0x8cac,\n  DEPTH32F_STENCIL8: 0x8cad,\n  INVALID_INDEX: 0xffffffff,\n  TIMEOUT_IGNORED: -1,\n  MAX_CLIENT_WAIT_TIMEOUT_WEBGL: 0x9247,\n  VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE: 0x88fe,\n  UNMASKED_VENDOR_WEBGL: 0x9245,\n  UNMASKED_RENDERER_WEBGL: 0x9246,\n  MAX_TEXTURE_MAX_ANISOTROPY_EXT: 0x84ff,\n  TEXTURE_MAX_ANISOTROPY_EXT: 0x84fe,\n  COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83f0,\n  COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83f1,\n  COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83f2,\n  COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83f3,\n  COMPRESSED_R11_EAC: 0x9270,\n  COMPRESSED_SIGNED_R11_EAC: 0x9271,\n  COMPRESSED_RG11_EAC: 0x9272,\n  COMPRESSED_SIGNED_RG11_EAC: 0x9273,\n  COMPRESSED_RGB8_ETC2: 0x9274,\n  COMPRESSED_RGBA8_ETC2_EAC: 0x9275,\n  COMPRESSED_SRGB8_ETC2: 0x9276,\n  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 0x9277,\n  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9278,\n  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9279,\n  COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 0x8c00,\n  COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 0x8c02,\n  COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 0x8c01,\n  COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 0x8c03,\n  COMPRESSED_RGB_ETC1_WEBGL: 0x8d64,\n  COMPRESSED_RGB_ATC_WEBGL: 0x8c92,\n  COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL: 0x8c92,\n  COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL: 0x87ee,\n  UNSIGNED_INT_24_8_WEBGL: 0x84fa,\n  HALF_FLOAT_OES: 0x8d61,\n  RGBA32F_EXT: 0x8814,\n  RGB32F_EXT: 0x8815,\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\n  UNSIGNED_NORMALIZED_EXT: 0x8c17,\n  MIN_EXT: 0x8007,\n  MAX_EXT: 0x8008,\n  SRGB_EXT: 0x8c40,\n  SRGB_ALPHA_EXT: 0x8c42,\n  SRGB8_ALPHA8_EXT: 0x8c43,\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT: 0x8210,\n  FRAGMENT_SHADER_DERIVATIVE_HINT_OES: 0x8b8b,\n  COLOR_ATTACHMENT0_WEBGL: 0x8ce0,\n  COLOR_ATTACHMENT1_WEBGL: 0x8ce1,\n  COLOR_ATTACHMENT2_WEBGL: 0x8ce2,\n  COLOR_ATTACHMENT3_WEBGL: 0x8ce3,\n  COLOR_ATTACHMENT4_WEBGL: 0x8ce4,\n  COLOR_ATTACHMENT5_WEBGL: 0x8ce5,\n  COLOR_ATTACHMENT6_WEBGL: 0x8ce6,\n  COLOR_ATTACHMENT7_WEBGL: 0x8ce7,\n  COLOR_ATTACHMENT8_WEBGL: 0x8ce8,\n  COLOR_ATTACHMENT9_WEBGL: 0x8ce9,\n  COLOR_ATTACHMENT10_WEBGL: 0x8cea,\n  COLOR_ATTACHMENT11_WEBGL: 0x8ceb,\n  COLOR_ATTACHMENT12_WEBGL: 0x8cec,\n  COLOR_ATTACHMENT13_WEBGL: 0x8ced,\n  COLOR_ATTACHMENT14_WEBGL: 0x8cee,\n  COLOR_ATTACHMENT15_WEBGL: 0x8cef,\n  DRAW_BUFFER0_WEBGL: 0x8825,\n  DRAW_BUFFER1_WEBGL: 0x8826,\n  DRAW_BUFFER2_WEBGL: 0x8827,\n  DRAW_BUFFER3_WEBGL: 0x8828,\n  DRAW_BUFFER4_WEBGL: 0x8829,\n  DRAW_BUFFER5_WEBGL: 0x882a,\n  DRAW_BUFFER6_WEBGL: 0x882b,\n  DRAW_BUFFER7_WEBGL: 0x882c,\n  DRAW_BUFFER8_WEBGL: 0x882d,\n  DRAW_BUFFER9_WEBGL: 0x882e,\n  DRAW_BUFFER10_WEBGL: 0x882f,\n  DRAW_BUFFER11_WEBGL: 0x8830,\n  DRAW_BUFFER12_WEBGL: 0x8831,\n  DRAW_BUFFER13_WEBGL: 0x8832,\n  DRAW_BUFFER14_WEBGL: 0x8833,\n  DRAW_BUFFER15_WEBGL: 0x8834,\n  MAX_COLOR_ATTACHMENTS_WEBGL: 0x8cdf,\n  MAX_DRAW_BUFFERS_WEBGL: 0x8824,\n  VERTEX_ARRAY_BINDING_OES: 0x85b5,\n  QUERY_COUNTER_BITS_EXT: 0x8864,\n  CURRENT_QUERY_EXT: 0x8865,\n  QUERY_RESULT_EXT: 0x8866,\n  QUERY_RESULT_AVAILABLE_EXT: 0x8867,\n  TIME_ELAPSED_EXT: 0x88bf,\n  TIMESTAMP_EXT: 0x8e28,\n  GPU_DISJOINT_EXT: 0x8fbb\n};\n//# sourceMappingURL=index.js.map","import GL from '@luma.gl/constants';\n\nexport const TYPE_ARRAY_MAP = {\n  UInt8: Uint8Array,\n  UInt16: Uint16Array,\n  UInt32: Uint32Array,\n  Float32: Float32Array,\n  UInt64: Float64Array\n};\n\nexport const GL_TYPE_MAP = {\n  UInt8: GL.UNSIGNED_BYTE,\n  UInt16: GL.UNSIGNED_INT,\n  Float32: GL.FLOAT,\n  UInt32: GL.UNSIGNED_INT,\n  UInt64: GL.DOUBLE\n};\n\nexport const I3S_NAMED_VERTEX_ATTRIBUTES = {\n  position: 'position',\n  normal: 'normal',\n  uv0: 'uv0',\n  color: 'color',\n  region: 'region'\n};\n\nexport const I3S_NAMED_GEOMETRY_ATTRIBUTES = {\n  vertexAttributes: 'vertexAttributes',\n  featureAttributeOrder: 'featureAttributeOrder',\n  featureAttributes: 'featureAttributes'\n};\n\nexport const I3S_NAMED_HEADER_ATTRIBUTES = {\n  header: 'header',\n  vertexCount: 'vertexCount',\n  featureCount: 'featureCount'\n};\n\nexport const SIZEOF = {\n  UInt8: 1,\n  UInt16: 2,\n  UInt32: 4,\n  Float32: 4,\n  UInt64: 8\n};\n\nexport const STRING_ATTRIBUTE_TYPE = 'String';\nexport const OBJECT_ID_ATTRIBUTE_TYPE = 'Oid32';\nexport const FLOAT_64_TYPE = 'Float64';\n","import type {TypedArray} from '@loaders.gl/schema';\nimport {load, parse} from '@loaders.gl/core';\nimport {Vector3, Matrix4} from '@math.gl/core';\nimport {Ellipsoid} from '@math.gl/geospatial';\n\nimport type {LoaderOptions, LoaderContext} from '@loaders.gl/loader-utils';\nimport {ImageLoader} from '@loaders.gl/images';\nimport {DracoLoader} from '@loaders.gl/draco';\nimport {CompressedTextureLoader} from '@loaders.gl/textures';\n\nimport {Tileset, Tile} from '../../types';\nimport {getUrlWithToken} from '../utils/url-utils';\n\nimport {\n  GL_TYPE_MAP,\n  TYPE_ARRAY_MAP,\n  SIZEOF,\n  I3S_NAMED_HEADER_ATTRIBUTES,\n  I3S_NAMED_VERTEX_ATTRIBUTES,\n  I3S_NAMED_GEOMETRY_ATTRIBUTES\n} from './constants';\n\nconst scratchVector = new Vector3([0, 0, 0]);\n\nconst FORMAT_LOADER_MAP = {\n  jpeg: ImageLoader,\n  png: ImageLoader,\n  'ktx-etc2': CompressedTextureLoader,\n  dds: CompressedTextureLoader\n};\n\nconst I3S_ATTRIBUTE_TYPE = 'i3s-attribute-type';\n\nexport async function parseI3STileContent(\n  arrayBuffer: ArrayBuffer,\n  tile: Tile,\n  tileset: Tileset,\n  options?: LoaderOptions,\n  context?: LoaderContext\n) {\n  tile.content = tile.content || {};\n  tile.content.featureIds = tile.content.featureIds || null;\n\n  // construct featureData from defaultGeometrySchema;\n  tile.content.featureData = constructFeatureDataStruct(tile, tileset);\n  tile.content.attributes = {};\n\n  if (tile.textureUrl) {\n    const url = getUrlWithToken(tile.textureUrl, options?.i3s?.token);\n    const loader = FORMAT_LOADER_MAP[tile.textureFormat] || ImageLoader;\n    // @ts-ignore context must be defined\n    const response = await fetch(url);\n    const arrayBuffer = await response.arrayBuffer();\n\n    if (loader === ImageLoader) {\n      const options = {image: {type: 'data'}};\n      // @ts-ignore context must be defined\n      // Image constructor is not supported in worker thread.\n      // Do parsing image data on the main thread by using context to avoid worker issues.\n      tile.content.texture = await context.parse(arrayBuffer, options);\n    } else if (loader === CompressedTextureLoader) {\n      // @ts-ignore context must be defined\n      const texture = await load(arrayBuffer, CompressedTextureLoader);\n      tile.content.texture = {\n        compressed: true,\n        mipmaps: false,\n        width: texture[0].width,\n        height: texture[0].height,\n        data: texture\n      };\n    }\n  }\n\n  tile.content.material = makePbrMaterial(tile.materialDefinition, tile.content.texture);\n  if (tile.content.material) {\n    tile.content.texture = null;\n  }\n\n  return await parseI3SNodeGeometry(arrayBuffer, tile, context);\n}\n\n/* eslint-disable max-statements */\nasync function parseI3SNodeGeometry(\n  arrayBuffer: ArrayBuffer,\n  tile: Tile = {},\n  context?: LoaderContext\n) {\n  if (!tile.content) {\n    return tile;\n  }\n\n  const content = tile.content;\n  let attributes;\n  let vertexCount;\n  let byteOffset = 0;\n  let featureCount = 0;\n\n  if (tile.isDracoGeometry) {\n    const decompressedGeometry = await parse(arrayBuffer, DracoLoader, {\n      draco: {\n        attributeNameEntry: I3S_ATTRIBUTE_TYPE\n      }\n    });\n\n    vertexCount = decompressedGeometry.header.vertexCount;\n    const indices = decompressedGeometry.indices.value;\n    const {\n      POSITION,\n      NORMAL,\n      COLOR_0,\n      TEXCOORD_0,\n      ['feature-index']: featureIndex,\n      ['uv-region']: uvRegion\n    } = decompressedGeometry.attributes;\n\n    attributes = {\n      position: POSITION,\n      normal: NORMAL,\n      color: COLOR_0,\n      uv0: TEXCOORD_0,\n      uvRegion,\n      id: featureIndex,\n      indices\n    };\n\n    updateAttributesMetadata(attributes, decompressedGeometry);\n\n    const featureIds = getFeatureIdsFromFeatureIndexMetadata(featureIndex);\n\n    if (featureIds) {\n      flattenFeatureIdsByFeatureIndices(attributes, featureIds);\n    }\n  } else {\n    const {vertexAttributes, attributesOrder, featureAttributes, featureAttributeOrder} =\n      content.featureData;\n    // First 8 bytes reserved for header (vertexCount and featureCount)\n    const headers = parseHeaders(content, arrayBuffer);\n    byteOffset = headers.byteOffset;\n    vertexCount = headers.vertexCount;\n    featureCount = headers.featureCount;\n    // Getting vertex attributes such as positions, normals, colors, etc...\n    const {attributes: normalizedVertexAttributes, byteOffset: offset} = normalizeAttributes(\n      arrayBuffer,\n      byteOffset,\n      vertexAttributes,\n      vertexCount,\n      attributesOrder\n    );\n\n    // Getting feature attributes such as featureIds and faceRange\n    const {attributes: normalizedFeatureAttributes} = normalizeAttributes(\n      arrayBuffer,\n      offset,\n      featureAttributes,\n      featureCount,\n      featureAttributeOrder\n    );\n\n    flattenFeatureIdsByFaceRanges(normalizedFeatureAttributes);\n    attributes = concatAttributes(normalizedVertexAttributes, normalizedFeatureAttributes);\n  }\n\n  const {enuMatrix, cartographicOrigin, cartesianOrigin} = parsePositions(\n    attributes.position,\n    tile\n  );\n\n  const matrix = new Matrix4().multiplyRight(enuMatrix);\n\n  content.attributes = {\n    positions: attributes.position,\n    normals: attributes.normal,\n    colors: normalizeAttribute(attributes.color), // Normalize from UInt8\n    texCoords: attributes.uv0,\n    uvRegions: normalizeAttribute(attributes.uvRegion) // Normalize from UInt16\n  };\n  content.indices = attributes.indices || null;\n\n  if (attributes.id && attributes.id.value) {\n    tile.content.featureIds = attributes.id.value;\n  }\n\n  // Remove undefined attributes\n  for (const attributeIndex in content.attributes) {\n    if (!content.attributes[attributeIndex]) {\n      delete content.attributes[attributeIndex];\n    }\n  }\n\n  content.vertexCount = vertexCount;\n  content.cartographicCenter = cartographicOrigin;\n  content.cartesianOrigin = cartesianOrigin;\n  content.modelMatrix = matrix.invert();\n  content.byteLength = arrayBuffer.byteLength;\n\n  return tile;\n}\n\n/**\n * Update attributes with metadata from decompressed geometry.\n * @param decompressedGeometry\n * @param attributes\n */\nfunction updateAttributesMetadata(attributes, decompressedGeometry) {\n  for (const key in decompressedGeometry.loaderData.attributes) {\n    const dracoAttribute = decompressedGeometry.loaderData.attributes[key];\n\n    switch (dracoAttribute.name) {\n      case 'POSITION':\n        attributes.position.metadata = dracoAttribute.metadata;\n        break;\n      case 'feature-index':\n        attributes.id.metadata = dracoAttribute.metadata;\n        break;\n      default:\n        break;\n    }\n  }\n}\n\n/**\n * Do concatenation of attribute objects.\n * Done as separate fucntion to avoid ts errors.\n * @param {Object} normalizedVertexAttributes\n * @param {Object} normalizedFeatureAttributes\n * @returns {object} - result of attributes concatenation.\n */\nfunction concatAttributes(normalizedVertexAttributes, normalizedFeatureAttributes) {\n  return {...normalizedVertexAttributes, ...normalizedFeatureAttributes};\n}\n\n/**\n * Normalize attribute to range [0..1] . Eg. convert colors buffer from [255,255,255,255] to [1,1,1,1]\n * @param {Object} attribute - geometry attribute\n * @returns {Object} - geometry attribute in right format\n */\nfunction normalizeAttribute(attribute) {\n  if (!attribute) {\n    return attribute;\n  }\n  attribute.normalized = true;\n  return attribute;\n}\n\nfunction constructFeatureDataStruct(tile, tileset) {\n  // seed featureData from defaultGeometrySchema\n  const defaultGeometrySchema = tileset.store.defaultGeometrySchema;\n  const featureData = defaultGeometrySchema;\n  // populate the vertex attributes value types and values per element\n  for (const geometryAttribute in I3S_NAMED_GEOMETRY_ATTRIBUTES) {\n    for (const namedAttribute in I3S_NAMED_VERTEX_ATTRIBUTES) {\n      const attribute = defaultGeometrySchema[geometryAttribute][namedAttribute];\n      if (attribute) {\n        const {byteOffset = 0, count = 0, valueType, valuesPerElement} = attribute;\n\n        featureData[geometryAttribute][namedAttribute] = {\n          valueType,\n          valuesPerElement,\n          byteOffset,\n          count\n        };\n      }\n    }\n  }\n\n  featureData.attributesOrder = defaultGeometrySchema.ordering;\n  return featureData;\n}\n\nfunction parseHeaders(content, buffer) {\n  let byteOffset = 0;\n  // First 8 bytes reserved for header (vertexCount and featurecount)\n  let vertexCount = 0;\n  let featureCount = 0;\n  const headers = content.featureData[I3S_NAMED_HEADER_ATTRIBUTES.header];\n  for (const header in headers) {\n    const {property, type} = headers[header];\n    const TypedArrayTypeHeader = TYPE_ARRAY_MAP[type];\n    if (property === I3S_NAMED_HEADER_ATTRIBUTES.vertexCount) {\n      vertexCount = new TypedArrayTypeHeader(buffer, 0, 4)[0];\n      byteOffset += SIZEOF[type];\n    }\n    if (property === I3S_NAMED_HEADER_ATTRIBUTES.featureCount) {\n      featureCount = new TypedArrayTypeHeader(buffer, 4, 4)[0];\n      byteOffset += SIZEOF[type];\n    }\n  }\n  return {\n    vertexCount,\n    featureCount,\n    byteOffset\n  };\n}\n\n/* eslint-enable max-statements */\n\nfunction normalizeAttributes(\n  arrayBuffer,\n  byteOffset,\n  vertexAttributes,\n  vertexCount,\n  attributesOrder\n) {\n  const attributes = {};\n\n  // the order of attributes depend on the order being added to the vertexAttributes object\n  for (const attribute of attributesOrder) {\n    if (vertexAttributes[attribute]) {\n      const {valueType, valuesPerElement} = vertexAttributes[attribute];\n      // update count and byteOffset count by calculating from defaultGeometrySchema + binnary content\n      const count = vertexCount;\n      // protect from arrayBuffer read overunns by NOT assuming node has regions always even though its declared in defaultGeometrySchema.\n      // In i3s 1.6: client is required to decide that based on ./shared resource of the node (materialDefinitions.[Mat_id].params.vertexRegions == true)\n      // In i3s 1.7 the property has been rolled into the 3d scene layer json/node pages.\n      // Code below does not account when the bytelength is actually bigger than\n      // the calculated value (b\\c the tile potentially could have mesh segmentation information).\n      // In those cases tiles without regions could fail or have garbage values.\n      if (byteOffset + count * valuesPerElement > arrayBuffer.byteLength) {\n        break;\n      }\n      const buffer = arrayBuffer.slice(byteOffset);\n      let value: number[] | TypedArray = [];\n\n      if (valueType === 'UInt64') {\n        value = parseUint64Values(buffer, count * valuesPerElement, SIZEOF[valueType]);\n      } else {\n        const TypedArrayType = TYPE_ARRAY_MAP[valueType];\n        value = new TypedArrayType(buffer, 0, count * valuesPerElement);\n      }\n\n      attributes[attribute] = {\n        value,\n        type: GL_TYPE_MAP[valueType],\n        size: valuesPerElement\n      };\n\n      switch (attribute) {\n        case 'color':\n          // @ts-ignore\n          attributes.color.normalized = true;\n          break;\n        case 'position':\n        case 'region':\n        case 'normal':\n        default:\n      }\n\n      byteOffset = byteOffset + count * valuesPerElement * SIZEOF[valueType];\n    }\n  }\n\n  return {attributes, byteOffset};\n}\n\n/**\n * Parse buffer to return array of uint64 values\n *\n * @param buffer\n * @param elementsCount\n * @returns 64-bit array of values until precision is lost after Number.MAX_SAFE_INTEGER\n */\nfunction parseUint64Values(\n  buffer: ArrayBuffer,\n  elementsCount: number,\n  attributeSize: number\n): number[] {\n  const values: number[] = [];\n  const dataView = new DataView(buffer);\n  let offset = 0;\n\n  for (let index = 0; index < elementsCount; index++) {\n    // split 64-bit number into two 32-bit parts\n    const left = dataView.getUint32(offset, true);\n    const right = dataView.getUint32(offset + 4, true);\n    // combine the two 32-bit values\n    const value = left + 2 ** 32 * right;\n\n    values.push(value);\n    offset += attributeSize;\n  }\n\n  return values;\n}\n\nfunction parsePositions(attribute, tile) {\n  const mbs = tile.mbs;\n  const value = attribute.value;\n  const metadata = attribute.metadata;\n  const enuMatrix = new Matrix4();\n  const cartographicOrigin = new Vector3(mbs[0], mbs[1], mbs[2]);\n  const cartesianOrigin = new Vector3();\n  Ellipsoid.WGS84.cartographicToCartesian(cartographicOrigin, cartesianOrigin);\n  Ellipsoid.WGS84.eastNorthUpToFixedFrame(cartesianOrigin, enuMatrix);\n  attribute.value = offsetsToCartesians(value, metadata, cartographicOrigin);\n\n  return {\n    enuMatrix,\n    fixedFrameToENUMatrix: enuMatrix.invert(),\n    cartographicOrigin,\n    cartesianOrigin\n  };\n}\n\n/**\n * Converts position coordinates to absolute cartesian coordinates\n * @param {Float32Array} vertices - \"position\" attribute data\n * @param {Object} metadata - When the geometry is DRACO compressed, contain position attribute's metadata\n *  https://github.com/Esri/i3s-spec/blob/master/docs/1.7/compressedAttributes.cmn.md\n * @param {Vector3} cartographicOrigin - Cartographic origin coordinates\n * @returns {Float64Array} - converted \"position\" data\n */\nfunction offsetsToCartesians(vertices, metadata = {}, cartographicOrigin) {\n  const positions = new Float64Array(vertices.length);\n  const scaleX = (metadata['i3s-scale_x'] && metadata['i3s-scale_x'].double) || 1;\n  const scaleY = (metadata['i3s-scale_y'] && metadata['i3s-scale_y'].double) || 1;\n  for (let i = 0; i < positions.length; i += 3) {\n    positions[i] = vertices[i] * scaleX + cartographicOrigin.x;\n    positions[i + 1] = vertices[i + 1] * scaleY + cartographicOrigin.y;\n    positions[i + 2] = vertices[i + 2] + cartographicOrigin.z;\n  }\n\n  for (let i = 0; i < positions.length; i += 3) {\n    // @ts-ignore\n    Ellipsoid.WGS84.cartographicToCartesian(positions.subarray(i, i + 3), scratchVector);\n    positions[i] = scratchVector.x;\n    positions[i + 1] = scratchVector.y;\n    positions[i + 2] = scratchVector.z;\n  }\n\n  return positions;\n}\n\n/**\n * Makes a glTF-compatible PBR material from an I3S material definition\n * @param {object} materialDefinition - i3s material definition\n *  https://github.com/Esri/i3s-spec/blob/master/docs/1.7/materialDefinitions.cmn.md\n * @param {object} texture - texture image\n * @returns {object}\n */\nfunction makePbrMaterial(materialDefinition, texture) {\n  let pbrMaterial;\n  if (materialDefinition) {\n    pbrMaterial = {\n      ...materialDefinition,\n      pbrMetallicRoughness: materialDefinition.pbrMetallicRoughness\n        ? {...materialDefinition.pbrMetallicRoughness}\n        : {baseColorFactor: [255, 255, 255, 255]}\n    };\n  } else {\n    pbrMaterial = {\n      pbrMetallicRoughness: {}\n    };\n    if (texture) {\n      pbrMaterial.pbrMetallicRoughness.baseColorTexture = {texCoord: 0};\n    } else {\n      pbrMaterial.pbrMetallicRoughness.baseColorFactor = [255, 255, 255, 255];\n    }\n  }\n\n  // Set default 0.25 per spec https://github.com/Esri/i3s-spec/blob/master/docs/1.7/materialDefinitions.cmn.md\n  pbrMaterial.alphaCutoff = pbrMaterial.alphaCutoff || 0.25;\n\n  if (pbrMaterial.alphaMode) {\n    // I3S contain alphaMode in lowerCase\n    pbrMaterial.alphaMode = pbrMaterial.alphaMode.toUpperCase();\n  }\n\n  // Convert colors from [255,255,255,255] to [1,1,1,1]\n  if (pbrMaterial.emissiveFactor) {\n    pbrMaterial.emissiveFactor = convertColorFormat(pbrMaterial.emissiveFactor);\n  }\n  if (pbrMaterial.pbrMetallicRoughness && pbrMaterial.pbrMetallicRoughness.baseColorFactor) {\n    pbrMaterial.pbrMetallicRoughness.baseColorFactor = convertColorFormat(\n      pbrMaterial.pbrMetallicRoughness.baseColorFactor\n    );\n  }\n\n  setMaterialTexture(pbrMaterial, texture);\n\n  return pbrMaterial;\n}\n\n/**\n * Convert color from [255,255,255,255] to [1,1,1,1]\n * @param {Array} colorFactor - color array\n * @returns {Array} - new color array\n */\nfunction convertColorFormat(colorFactor) {\n  const normalizedColor = [...colorFactor];\n  for (let index = 0; index < colorFactor.length; index++) {\n    normalizedColor[index] = colorFactor[index] / 255;\n  }\n  return normalizedColor;\n}\n\n/**\n * Set texture in PBR material\n * @param {object} material - i3s material definition\n * @param {object} image - texture image\n * @returns {void}\n */\nfunction setMaterialTexture(material, image) {\n  const texture = {source: {image}};\n  // I3SLoader now support loading only one texture. This elseif sequence will assign this texture to one of\n  // properties defined in materialDefinition\n  if (material.pbrMetallicRoughness && material.pbrMetallicRoughness.baseColorTexture) {\n    material.pbrMetallicRoughness.baseColorTexture = {\n      ...material.pbrMetallicRoughness.baseColorTexture,\n      texture\n    };\n  } else if (material.emissiveTexture) {\n    material.emissiveTexture = {...material.emissiveTexture, texture};\n  } else if (\n    material.pbrMetallicRoughness &&\n    material.pbrMetallicRoughness.metallicRoughnessTexture\n  ) {\n    material.pbrMetallicRoughness.metallicRoughnessTexture = {\n      ...material.pbrMetallicRoughness.metallicRoughnessTexture,\n      texture\n    };\n  } else if (material.normalTexture) {\n    material.normalTexture = {...material.normalTexture, texture};\n  } else if (material.occlusionTexture) {\n    material.occlusionTexture = {...material.occlusionTexture, texture};\n  }\n}\n\n/**\n * Flatten feature ids using face ranges\n * @param {object} normalizedFeatureAttributes\n * @returns {void}\n */\nfunction flattenFeatureIdsByFaceRanges(normalizedFeatureAttributes) {\n  const {id, faceRange} = normalizedFeatureAttributes;\n\n  if (!id || !faceRange) {\n    return;\n  }\n\n  const featureIds = id.value;\n  const range = faceRange.value;\n  const featureIdsLength = range[range.length - 1] + 1;\n  const orderedFeatureIndices = new Uint32Array(featureIdsLength * 3);\n\n  let featureIndex = 0;\n  let startIndex = 0;\n\n  for (let index = 1; index < range.length; index += 2) {\n    const fillId = Number(featureIds[featureIndex]);\n    const endValue = range[index];\n    const prevValue = range[index - 1];\n    const trianglesCount = endValue - prevValue + 1;\n    const endIndex = startIndex + trianglesCount * 3;\n\n    orderedFeatureIndices.fill(fillId, startIndex, endIndex);\n\n    featureIndex++;\n    startIndex = endIndex;\n  }\n\n  normalizedFeatureAttributes.id.value = orderedFeatureIndices;\n}\n\n/**\n * Flatten feature ids using featureIndices\n * @param {object} attributes\n * @param {any} featureIds\n * @returns {void}\n */\nfunction flattenFeatureIdsByFeatureIndices(attributes, featureIds) {\n  const featureIndices = attributes.id.value;\n  const result = new Float32Array(featureIndices.length);\n\n  for (let index = 0; index < featureIndices.length; index++) {\n    result[index] = featureIds[featureIndices[index]];\n  }\n\n  attributes.id.value = result;\n}\n\n/**\n * Flatten feature ids using featureIndices\n * @param {object} featureIndex\n * @returns {Int32Array}\n */\nfunction getFeatureIdsFromFeatureIndexMetadata(featureIndex) {\n  return (\n    featureIndex &&\n    featureIndex.metadata &&\n    featureIndex.metadata['i3s-feature-ids'] &&\n    featureIndex.metadata['i3s-feature-ids'].intArray\n  );\n}\n","import type {LoaderWithParser, LoaderOptions, LoaderContext} from '@loaders.gl/loader-utils';\nimport {parseI3STileContent} from './lib/parsers/parse-i3s-tile-content';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\n\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n/**\n * Loader for I3S - Indexed 3D Scene Layer\n */\nexport const I3SContentLoader: LoaderWithParser = {\n  name: 'I3S Content (Indexed Scene Layers)',\n  id: 'i3s-content',\n  module: 'i3s',\n  worker: true,\n  version: VERSION,\n  mimeTypes: ['application/octet-stream'],\n  parse,\n  extensions: ['bin'],\n  options: {\n    'i3s-content': {}\n  }\n};\n\nasync function parse(data, options?: LoaderOptions, context?: LoaderContext) {\n  const {tile, tileset} = options?.i3s || {};\n  await parseI3STileContent(data, tile, tileset, options, context);\n  return tile.content;\n}\n","// Purpose: include this in your module to avoid\n// dependencies on micro modules like 'global' and 'is-browser';\n\n/* eslint-disable no-restricted-globals */\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\n\ntype obj = {[key: string]: any};\nconst self_: obj = globals.self || globals.window || globals.global || {};\nconst window_: obj = globals.window || globals.self || globals.global || {};\nconst global_: obj = globals.global || globals.self || globals.window || {};\nconst document_: obj = globals.document || {};\n\nexport {self_ as self, window_ as window, global_ as global, document_ as document};\n\n/** true if running in a browser */\nexport const isBrowser: boolean =\n  // @ts-ignore process does not exist on browser\n  typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n\n/** true if running in a worker thread */\nexport const isWorker: boolean = typeof importScripts === 'function';\n\n// Extract node major version\nconst matches =\n  typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n/** Major Node version (as a number) */\nexport const nodeVersion: number = (matches && parseFloat(matches[1])) || 0;\n"],"sourceRoot":""}